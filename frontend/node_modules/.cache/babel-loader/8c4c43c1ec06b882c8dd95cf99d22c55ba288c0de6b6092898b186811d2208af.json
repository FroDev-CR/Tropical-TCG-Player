{"ast":null,"code":"var _jsxFileName = \"/home/frodev/Downloads/FroDev-CR-TropicalTCGPlayers/src/components/P2PCheckout.js\",\n  _s = $RefreshSig$();\n// src/components/P2PCheckout.js\n// Componente de checkout P2P multi-vendedor\n\nimport React, { useState, useEffect } from 'react';\nimport { Modal, Button, Card, Form, Alert, Spinner, Badge } from 'react-bootstrap';\nimport { useP2PTransactions } from '../hooks/useP2PTransactions';\nimport { useCart } from '../contexts/CartContext';\nimport verificationService from '../services/verificationService';\nimport './P2PCheckout.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function P2PCheckout({\n  show,\n  onHide,\n  onSuccess\n}) {\n  _s();\n  var _availabilityCheck$er;\n  const {\n    createP2PTransactions,\n    actionLoading,\n    error,\n    clearError,\n    checkAtomicAvailability,\n    getCartByVendor\n  } = useP2PTransactions();\n  const {\n    cart,\n    getTotalItems,\n    clearCart\n  } = useCart();\n  const [vendors, setVendors] = useState([]);\n  const [selectedVendors, setSelectedVendors] = useState(new Set());\n  const [contactMethod, setContactMethod] = useState('whatsapp');\n  const [buyerNotes, setBuyerNotes] = useState('');\n  const [availabilityCheck, setAvailabilityCheck] = useState(null);\n  const [isCheckingAvailability, setIsCheckingAvailability] = useState(false);\n  const [verificationStatus, setVerificationStatus] = useState(null);\n  const [isCheckingVerification, setIsCheckingVerification] = useState(false);\n\n  // Cargar vendedores cuando se abre el modal\n  useEffect(() => {\n    if (show && cart.length > 0) {\n      const vendorGroups = getCartByVendor();\n      setVendors(vendorGroups);\n      setSelectedVendors(new Set(vendorGroups.map(v => v.vendorId)));\n      checkAvailability();\n    }\n  }, [show, cart]);\n\n  // Verificar disponibilidad atómica\n  const checkAvailability = async () => {\n    if (cart.length === 0) return;\n    setIsCheckingAvailability(true);\n    try {\n      const result = await checkAtomicAvailability(cart);\n      setAvailabilityCheck(result);\n    } catch (error) {\n      console.error('Error verificando disponibilidad:', error);\n      setAvailabilityCheck({\n        available: false,\n        errors: [{\n          item: 'general',\n          message: 'Error verificando disponibilidad'\n        }]\n      });\n    } finally {\n      setIsCheckingAvailability(false);\n    }\n  };\n\n  // Manejar selección de vendedor\n  const handleVendorToggle = vendorId => {\n    const newSelected = new Set(selectedVendors);\n    if (newSelected.has(vendorId)) {\n      newSelected.delete(vendorId);\n    } else {\n      newSelected.add(vendorId);\n    }\n    setSelectedVendors(newSelected);\n  };\n\n  // Obtener vendedores seleccionados\n  const getSelectedVendors = () => {\n    return vendors.filter(vendor => selectedVendors.has(vendor.vendorId));\n  };\n\n  // Calcular totales de vendedores seleccionados\n  const getSelectedTotals = () => {\n    const selected = getSelectedVendors();\n    return {\n      totalAmount: selected.reduce((sum, vendor) => sum + vendor.totalAmount, 0),\n      shippingCost: selected.reduce((sum, vendor) => sum + (vendor.hasShipping ? 600 : 0), 0),\n      totalItems: selected.reduce((sum, vendor) => sum + vendor.totalItems, 0),\n      vendorCount: selected.length\n    };\n  };\n\n  // Manejar checkout\n  const handleCheckout = async () => {\n    if (selectedVendors.size === 0) {\n      alert('Selecciona al menos un vendedor para continuar');\n      return;\n    }\n    clearError();\n    try {\n      const selectedVendorData = getSelectedVendors();\n      const results = await createP2PTransactions(contactMethod, buyerNotes.trim());\n\n      // Analizar resultados\n      const successful = results.filter(r => r.success);\n      const failed = results.filter(r => !r.success);\n      if (successful.length > 0 && failed.length === 0) {\n        // Todas las transacciones exitosas\n        onSuccess && onSuccess({\n          type: 'complete',\n          successful,\n          message: `¡Perfecto! Se crearon ${successful.length} transacción${successful.length > 1 ? 'es' : ''} exitosamente.`\n        });\n      } else if (successful.length > 0 && failed.length > 0) {\n        // Algunas exitosas, algunas fallaron\n        onSuccess && onSuccess({\n          type: 'partial',\n          successful,\n          failed,\n          message: `${successful.length} transacción${successful.length > 1 ? 'es' : ''} creada${successful.length > 1 ? 's' : ''}, pero ${failed.length} falló${failed.length > 1 ? 'n' : ''}.`\n        });\n      } else {\n        // Todas fallaron\n        throw new Error('No se pudo crear ninguna transacción. Por favor intenta nuevamente.');\n      }\n      onHide();\n    } catch (error) {\n      console.error('Error en checkout:', error);\n      // El error ya está manejado por el hook\n    }\n  };\n  const totals = getSelectedTotals();\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    show: show,\n    onHide: onHide,\n    size: \"lg\",\n    className: \"p2p-checkout-modal\",\n    children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n      closeButton: true,\n      className: \"border-0 pb-0\",\n      children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n        className: \"text-primary fw-bold\",\n        children: \"\\uD83D\\uDED2 Confirmar Compras P2P\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n      className: \"px-4\",\n      children: [error && /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"danger\",\n        dismissible: true,\n        onClose: clearError,\n        children: [/*#__PURE__*/_jsxDEV(Alert.Heading, {\n          children: \"Error en el checkout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mb-0\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }, this), isCheckingAvailability && /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"info\",\n        className: \"d-flex align-items-center\",\n        children: [/*#__PURE__*/_jsxDEV(Spinner, {\n          size: \"sm\",\n          className: \"me-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 13\n        }, this), \"Verificando disponibilidad de productos...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }, this), availabilityCheck && !availabilityCheck.available && /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"warning\",\n        children: [/*#__PURE__*/_jsxDEV(Alert.Heading, {\n          children: \"\\u26A0\\uFE0F Problemas de Disponibilidad\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"mb-0\",\n          children: (_availabilityCheck$er = availabilityCheck.errors) === null || _availabilityCheck$er === void 0 ? void 0 : _availabilityCheck$er.map((error, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: error.message\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-end\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline-warning\",\n            size: \"sm\",\n            onClick: checkAvailability,\n            children: \"Verificar Nuevamente\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"vendors-section mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"mb-3\",\n          children: [\"\\uD83D\\uDCE6 Vendedores (\", vendors.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this), vendors.map(vendor => /*#__PURE__*/_jsxDEV(Card, {\n          className: `vendor-card mb-3 ${selectedVendors.has(vendor.vendorId) ? 'selected' : 'unselected'}`,\n          children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n            className: \"d-flex justify-content-between align-items-center p-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Check, {\n              type: \"checkbox\",\n              id: `vendor-${vendor.vendorId}`,\n              checked: selectedVendors.has(vendor.vendorId),\n              onChange: () => handleVendorToggle(vendor.vendorId),\n              label: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"vendor-header-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: vendor.vendorName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 193,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-muted small\",\n                  children: [\"\\uD83D\\uDCF1 \", vendor.vendorPhone, \" \\u2022 \\u2709\\uFE0F \", vendor.vendorEmail]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"vendor-summary text-end\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"fw-bold text-primary\",\n                children: [\"\\u20A1\", (vendor.totalAmount + (vendor.hasShipping ? 600 : 0)).toLocaleString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"small text-muted\",\n                children: [vendor.totalItems, \" item\", vendor.totalItems > 1 ? 's' : '', vendor.hasShipping && /*#__PURE__*/_jsxDEV(Badge, {\n                  bg: \"info\",\n                  className: \"ms-1\",\n                  children: \"+Env\\xEDo\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 15\n          }, this), selectedVendors.has(vendor.vendorId) && /*#__PURE__*/_jsxDEV(Card.Body, {\n            className: \"pt-0\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"items-list\",\n              children: vendor.items.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"item-row d-flex justify-content-between align-items-center py-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"item-info d-flex align-items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: item.cardImage,\n                    alt: item.cardName,\n                    className: \"item-thumbnail me-3\",\n                    onError: e => e.target.src = '/placeholder-card.png'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 219,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"item-name fw-medium\",\n                      children: item.cardName\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 226,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"item-details small text-muted\",\n                      children: [item.condition, \" \\u2022 \", item.setName]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 227,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 225,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"item-pricing text-end\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"item-price fw-bold\",\n                    children: [\"\\u20A1\", item.price.toLocaleString(), item.quantity > 1 && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"quantity-badge ms-2\",\n                      children: [\"x\", item.quantity]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 236,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 233,\n                    columnNumber: 27\n                  }, this), item.quantity > 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"small text-muted\",\n                    children: [\"Total: \\u20A1\", (item.price * item.quantity).toLocaleString()]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 240,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 25\n                }, this)]\n              }, `${item.id}-${index}`, true, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cost-breakdown mt-3 pt-3 border-top\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Productos:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 252,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"\\u20A1\", vendor.totalAmount.toLocaleString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Env\\xEDo:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 256,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: vendor.hasShipping ? '₡600' : /*#__PURE__*/_jsxDEV(Badge, {\n                    bg: \"success\",\n                    children: \"Gratis\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 259,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 257,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n                className: \"my-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-between fw-bold text-primary\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Total:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 265,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"\\u20A1\", (vendor.totalAmount + (vendor.hasShipping ? 600 : 0)).toLocaleString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 17\n          }, this)]\n        }, vendor.vendorId, true, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        className: \"checkout-config mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n          className: \"bg-light\",\n          children: /*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"mb-0\",\n            children: \"\\u2699\\uFE0F Configuraci\\xF3n de Compra\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"\\uD83D\\uDCDE M\\xE9todo de contacto preferido\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"contact-methods\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Check, {\n                type: \"radio\",\n                id: \"contact-whatsapp\",\n                name: \"contactMethod\",\n                value: \"whatsapp\",\n                checked: contactMethod === 'whatsapp',\n                onChange: e => setContactMethod(e.target.value),\n                label: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"me-2\",\n                    children: \"\\uD83D\\uDCF1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 294,\n                    columnNumber: 23\n                  }, this), \"WhatsApp \", /*#__PURE__*/_jsxDEV(Badge, {\n                    bg: \"success\",\n                    children: \"Recomendado\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 295,\n                    columnNumber: 32\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 293,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Check, {\n                type: \"radio\",\n                id: \"contact-email\",\n                name: \"contactMethod\",\n                value: \"email\",\n                checked: contactMethod === 'email',\n                onChange: e => setContactMethod(e.target.value),\n                label: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"me-2\",\n                    children: \"\\u2709\\uFE0F\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 308,\n                    columnNumber: 23\n                  }, this), \"Email\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 307,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Check, {\n                type: \"radio\",\n                id: \"contact-phone\",\n                name: \"contactMethod\",\n                value: \"phone\",\n                checked: contactMethod === 'phone',\n                onChange: e => setContactMethod(e.target.value),\n                label: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"me-2\",\n                    children: \"\\u260E\\uFE0F\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 322,\n                    columnNumber: 23\n                  }, this), \"Llamada telef\\xF3nica\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 321,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"\\uD83D\\uDCDD Notas adicionales (opcional)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              as: \"textarea\",\n              rows: 3,\n              value: buyerNotes,\n              onChange: e => setBuyerNotes(e.target.value),\n              placeholder: \"Mensaje para el vendedor, preferencias de entrega, etc...\",\n              maxLength: 500\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Text, {\n              className: \"text-muted\",\n              children: [buyerNotes.length, \"/500 caracteres\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }, this), totals.vendorCount > 0 && /*#__PURE__*/_jsxDEV(Card, {\n        className: \"checkout-summary\",\n        children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n          className: \"bg-primary text-white\",\n          children: /*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"mb-0\",\n            children: \"\\uD83D\\uDCB0 Resumen de Compra\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-rows\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Vendedores seleccionados:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"fw-bold\",\n                children: totals.vendorCount\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Total de productos:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 361,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"fw-bold\",\n                children: totals.totalItems\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 362,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Subtotal productos:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"\\u20A1\", totals.totalAmount.toLocaleString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Costos de env\\xEDo:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: totals.shippingCost > 0 ? `₡${totals.shippingCost.toLocaleString()}` : 'Gratis'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between fs-5 fw-bold text-primary\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Total a coordinar:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"\\u20A1\", (totals.totalAmount + totals.shippingCost).toLocaleString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n      className: \"border-0 pt-0\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outline-secondary\",\n        onClick: onHide,\n        disabled: actionLoading,\n        children: \"Cancelar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        onClick: handleCheckout,\n        disabled: actionLoading || totals.vendorCount === 0 || availabilityCheck && !availabilityCheck.available,\n        className: \"px-4\",\n        children: actionLoading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Spinner, {\n            size: \"sm\",\n            className: \"me-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 15\n          }, this), \"Procesando...\"]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [\"\\uD83D\\uDE80 Confirmar Compra\", totals.vendorCount > 1 ? 's' : '', totals.vendorCount > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ms-2\",\n            children: [\"(\\u20A1\", (totals.totalAmount + totals.shippingCost).toLocaleString(), \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 135,\n    columnNumber: 5\n  }, this);\n}\n_s(P2PCheckout, \"JHI/TSv8GG2wm6DV2FJ2z0fl0Dg=\", false, function () {\n  return [useP2PTransactions, useCart];\n});\n_c = P2PCheckout;\nvar _c;\n$RefreshReg$(_c, \"P2PCheckout\");","map":{"version":3,"names":["React","useState","useEffect","Modal","Button","Card","Form","Alert","Spinner","Badge","useP2PTransactions","useCart","verificationService","jsxDEV","_jsxDEV","Fragment","_Fragment","P2PCheckout","show","onHide","onSuccess","_s","_availabilityCheck$er","createP2PTransactions","actionLoading","error","clearError","checkAtomicAvailability","getCartByVendor","cart","getTotalItems","clearCart","vendors","setVendors","selectedVendors","setSelectedVendors","Set","contactMethod","setContactMethod","buyerNotes","setBuyerNotes","availabilityCheck","setAvailabilityCheck","isCheckingAvailability","setIsCheckingAvailability","verificationStatus","setVerificationStatus","isCheckingVerification","setIsCheckingVerification","length","vendorGroups","map","v","vendorId","checkAvailability","result","console","available","errors","item","message","handleVendorToggle","newSelected","has","delete","add","getSelectedVendors","filter","vendor","getSelectedTotals","selected","totalAmount","reduce","sum","shippingCost","hasShipping","totalItems","vendorCount","handleCheckout","size","alert","selectedVendorData","results","trim","successful","r","success","failed","type","Error","totals","className","children","Header","closeButton","Title","fileName","_jsxFileName","lineNumber","columnNumber","Body","variant","dismissible","onClose","Heading","index","onClick","Check","id","checked","onChange","label","vendorName","vendorPhone","vendorEmail","toLocaleString","bg","items","src","cardImage","alt","cardName","onError","e","target","condition","setName","price","quantity","Group","Label","name","value","Control","as","rows","placeholder","maxLength","Text","Footer","disabled","_c","$RefreshReg$"],"sources":["/home/frodev/Downloads/FroDev-CR-TropicalTCGPlayers/src/components/P2PCheckout.js"],"sourcesContent":["// src/components/P2PCheckout.js\n// Componente de checkout P2P multi-vendedor\n\nimport React, { useState, useEffect } from 'react';\nimport { Modal, Button, Card, Form, Alert, Spinner, Badge } from 'react-bootstrap';\nimport { useP2PTransactions } from '../hooks/useP2PTransactions';\nimport { useCart } from '../contexts/CartContext';\nimport verificationService from '../services/verificationService';\nimport './P2PCheckout.css';\n\nexport default function P2PCheckout({ show, onHide, onSuccess }) {\n  const {\n    createP2PTransactions,\n    actionLoading,\n    error,\n    clearError,\n    checkAtomicAvailability,\n    getCartByVendor\n  } = useP2PTransactions();\n\n  const { cart, getTotalItems, clearCart } = useCart();\n\n  const [vendors, setVendors] = useState([]);\n  const [selectedVendors, setSelectedVendors] = useState(new Set());\n  const [contactMethod, setContactMethod] = useState('whatsapp');\n  const [buyerNotes, setBuyerNotes] = useState('');\n  const [availabilityCheck, setAvailabilityCheck] = useState(null);\n  const [isCheckingAvailability, setIsCheckingAvailability] = useState(false);\n  const [verificationStatus, setVerificationStatus] = useState(null);\n  const [isCheckingVerification, setIsCheckingVerification] = useState(false);\n\n  // Cargar vendedores cuando se abre el modal\n  useEffect(() => {\n    if (show && cart.length > 0) {\n      const vendorGroups = getCartByVendor();\n      setVendors(vendorGroups);\n      setSelectedVendors(new Set(vendorGroups.map(v => v.vendorId)));\n      checkAvailability();\n    }\n  }, [show, cart]);\n\n  // Verificar disponibilidad atómica\n  const checkAvailability = async () => {\n    if (cart.length === 0) return;\n\n    setIsCheckingAvailability(true);\n    try {\n      const result = await checkAtomicAvailability(cart);\n      setAvailabilityCheck(result);\n    } catch (error) {\n      console.error('Error verificando disponibilidad:', error);\n      setAvailabilityCheck({ \n        available: false, \n        errors: [{ item: 'general', message: 'Error verificando disponibilidad' }]\n      });\n    } finally {\n      setIsCheckingAvailability(false);\n    }\n  };\n\n  // Manejar selección de vendedor\n  const handleVendorToggle = (vendorId) => {\n    const newSelected = new Set(selectedVendors);\n    if (newSelected.has(vendorId)) {\n      newSelected.delete(vendorId);\n    } else {\n      newSelected.add(vendorId);\n    }\n    setSelectedVendors(newSelected);\n  };\n\n  // Obtener vendedores seleccionados\n  const getSelectedVendors = () => {\n    return vendors.filter(vendor => selectedVendors.has(vendor.vendorId));\n  };\n\n  // Calcular totales de vendedores seleccionados\n  const getSelectedTotals = () => {\n    const selected = getSelectedVendors();\n    return {\n      totalAmount: selected.reduce((sum, vendor) => sum + vendor.totalAmount, 0),\n      shippingCost: selected.reduce((sum, vendor) => sum + (vendor.hasShipping ? 600 : 0), 0),\n      totalItems: selected.reduce((sum, vendor) => sum + vendor.totalItems, 0),\n      vendorCount: selected.length\n    };\n  };\n\n  // Manejar checkout\n  const handleCheckout = async () => {\n    if (selectedVendors.size === 0) {\n      alert('Selecciona al menos un vendedor para continuar');\n      return;\n    }\n\n    clearError();\n\n    try {\n      const selectedVendorData = getSelectedVendors();\n      const results = await createP2PTransactions(contactMethod, buyerNotes.trim());\n\n      // Analizar resultados\n      const successful = results.filter(r => r.success);\n      const failed = results.filter(r => !r.success);\n\n      if (successful.length > 0 && failed.length === 0) {\n        // Todas las transacciones exitosas\n        onSuccess && onSuccess({\n          type: 'complete',\n          successful,\n          message: `¡Perfecto! Se crearon ${successful.length} transacción${successful.length > 1 ? 'es' : ''} exitosamente.`\n        });\n      } else if (successful.length > 0 && failed.length > 0) {\n        // Algunas exitosas, algunas fallaron\n        onSuccess && onSuccess({\n          type: 'partial',\n          successful,\n          failed,\n          message: `${successful.length} transacción${successful.length > 1 ? 'es' : ''} creada${successful.length > 1 ? 's' : ''}, pero ${failed.length} falló${failed.length > 1 ? 'n' : ''}.`\n        });\n      } else {\n        // Todas fallaron\n        throw new Error('No se pudo crear ninguna transacción. Por favor intenta nuevamente.');\n      }\n\n      onHide();\n    } catch (error) {\n      console.error('Error en checkout:', error);\n      // El error ya está manejado por el hook\n    }\n  };\n\n  const totals = getSelectedTotals();\n\n  return (\n    <Modal show={show} onHide={onHide} size=\"lg\" className=\"p2p-checkout-modal\">\n      <Modal.Header closeButton className=\"border-0 pb-0\">\n        <Modal.Title className=\"text-primary fw-bold\">\n          🛒 Confirmar Compras P2P\n        </Modal.Title>\n      </Modal.Header>\n\n      <Modal.Body className=\"px-4\">\n        {/* Error Alert */}\n        {error && (\n          <Alert variant=\"danger\" dismissible onClose={clearError}>\n            <Alert.Heading>Error en el checkout</Alert.Heading>\n            <p className=\"mb-0\">{error}</p>\n          </Alert>\n        )}\n\n        {/* Verificación de Disponibilidad */}\n        {isCheckingAvailability && (\n          <Alert variant=\"info\" className=\"d-flex align-items-center\">\n            <Spinner size=\"sm\" className=\"me-2\" />\n            Verificando disponibilidad de productos...\n          </Alert>\n        )}\n\n        {availabilityCheck && !availabilityCheck.available && (\n          <Alert variant=\"warning\">\n            <Alert.Heading>⚠️ Problemas de Disponibilidad</Alert.Heading>\n            <ul className=\"mb-0\">\n              {availabilityCheck.errors?.map((error, index) => (\n                <li key={index}>{error.message}</li>\n              ))}\n            </ul>\n            <hr />\n            <div className=\"d-flex justify-content-end\">\n              <Button variant=\"outline-warning\" size=\"sm\" onClick={checkAvailability}>\n                Verificar Nuevamente\n              </Button>\n            </div>\n          </Alert>\n        )}\n\n        {/* Lista de Vendedores */}\n        <div className=\"vendors-section mb-4\">\n          <h5 className=\"mb-3\">📦 Vendedores ({vendors.length})</h5>\n          \n          {vendors.map((vendor) => (\n            <Card \n              key={vendor.vendorId} \n              className={`vendor-card mb-3 ${selectedVendors.has(vendor.vendorId) ? 'selected' : 'unselected'}`}\n            >\n              <Card.Header className=\"d-flex justify-content-between align-items-center p-3\">\n                <Form.Check\n                  type=\"checkbox\"\n                  id={`vendor-${vendor.vendorId}`}\n                  checked={selectedVendors.has(vendor.vendorId)}\n                  onChange={() => handleVendorToggle(vendor.vendorId)}\n                  label={\n                    <div className=\"vendor-header-info\">\n                      <strong>{vendor.vendorName}</strong>\n                      <div className=\"text-muted small\">\n                        📱 {vendor.vendorPhone} • ✉️ {vendor.vendorEmail}\n                      </div>\n                    </div>\n                  }\n                />\n                <div className=\"vendor-summary text-end\">\n                  <div className=\"fw-bold text-primary\">\n                    ₡{(vendor.totalAmount + (vendor.hasShipping ? 600 : 0)).toLocaleString()}\n                  </div>\n                  <div className=\"small text-muted\">\n                    {vendor.totalItems} item{vendor.totalItems > 1 ? 's' : ''}\n                    {vendor.hasShipping && (\n                      <Badge bg=\"info\" className=\"ms-1\">+Envío</Badge>\n                    )}\n                  </div>\n                </div>\n              </Card.Header>\n\n              {selectedVendors.has(vendor.vendorId) && (\n                <Card.Body className=\"pt-0\">\n                  <div className=\"items-list\">\n                    {vendor.items.map((item, index) => (\n                      <div key={`${item.id}-${index}`} className=\"item-row d-flex justify-content-between align-items-center py-2\">\n                        <div className=\"item-info d-flex align-items-center\">\n                          <img \n                            src={item.cardImage} \n                            alt={item.cardName}\n                            className=\"item-thumbnail me-3\"\n                            onError={(e) => e.target.src = '/placeholder-card.png'}\n                          />\n                          <div>\n                            <div className=\"item-name fw-medium\">{item.cardName}</div>\n                            <div className=\"item-details small text-muted\">\n                              {item.condition} • {item.setName}\n                            </div>\n                          </div>\n                        </div>\n                        <div className=\"item-pricing text-end\">\n                          <div className=\"item-price fw-bold\">\n                            ₡{item.price.toLocaleString()}\n                            {item.quantity > 1 && (\n                              <span className=\"quantity-badge ms-2\">x{item.quantity}</span>\n                            )}\n                          </div>\n                          {item.quantity > 1 && (\n                            <div className=\"small text-muted\">\n                              Total: ₡{(item.price * item.quantity).toLocaleString()}\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n\n                  {/* Desglose de Costos */}\n                  <div className=\"cost-breakdown mt-3 pt-3 border-top\">\n                    <div className=\"d-flex justify-content-between\">\n                      <span>Productos:</span>\n                      <span>₡{vendor.totalAmount.toLocaleString()}</span>\n                    </div>\n                    <div className=\"d-flex justify-content-between\">\n                      <span>Envío:</span>\n                      <span>\n                        {vendor.hasShipping ? '₡600' : (\n                          <Badge bg=\"success\">Gratis</Badge>\n                        )}\n                      </span>\n                    </div>\n                    <hr className=\"my-2\" />\n                    <div className=\"d-flex justify-content-between fw-bold text-primary\">\n                      <span>Total:</span>\n                      <span>₡{(vendor.totalAmount + (vendor.hasShipping ? 600 : 0)).toLocaleString()}</span>\n                    </div>\n                  </div>\n                </Card.Body>\n              )}\n            </Card>\n          ))}\n        </div>\n\n        {/* Configuración de Compra */}\n        <Card className=\"checkout-config mb-4\">\n          <Card.Header className=\"bg-light\">\n            <h6 className=\"mb-0\">⚙️ Configuración de Compra</h6>\n          </Card.Header>\n          <Card.Body>\n            {/* Método de Contacto */}\n            <Form.Group className=\"mb-3\">\n              <Form.Label>📞 Método de contacto preferido</Form.Label>\n              <div className=\"contact-methods\">\n                <Form.Check\n                  type=\"radio\"\n                  id=\"contact-whatsapp\"\n                  name=\"contactMethod\"\n                  value=\"whatsapp\"\n                  checked={contactMethod === 'whatsapp'}\n                  onChange={(e) => setContactMethod(e.target.value)}\n                  label={\n                    <span>\n                      <span className=\"me-2\">📱</span>\n                      WhatsApp <Badge bg=\"success\">Recomendado</Badge>\n                    </span>\n                  }\n                />\n                <Form.Check\n                  type=\"radio\"\n                  id=\"contact-email\"\n                  name=\"contactMethod\"\n                  value=\"email\"\n                  checked={contactMethod === 'email'}\n                  onChange={(e) => setContactMethod(e.target.value)}\n                  label={\n                    <span>\n                      <span className=\"me-2\">✉️</span>\n                      Email\n                    </span>\n                  }\n                />\n                <Form.Check\n                  type=\"radio\"\n                  id=\"contact-phone\"\n                  name=\"contactMethod\"\n                  value=\"phone\"\n                  checked={contactMethod === 'phone'}\n                  onChange={(e) => setContactMethod(e.target.value)}\n                  label={\n                    <span>\n                      <span className=\"me-2\">☎️</span>\n                      Llamada telefónica\n                    </span>\n                  }\n                />\n              </div>\n            </Form.Group>\n\n            {/* Notas del Comprador */}\n            <Form.Group>\n              <Form.Label>📝 Notas adicionales (opcional)</Form.Label>\n              <Form.Control\n                as=\"textarea\"\n                rows={3}\n                value={buyerNotes}\n                onChange={(e) => setBuyerNotes(e.target.value)}\n                placeholder=\"Mensaje para el vendedor, preferencias de entrega, etc...\"\n                maxLength={500}\n              />\n              <Form.Text className=\"text-muted\">\n                {buyerNotes.length}/500 caracteres\n              </Form.Text>\n            </Form.Group>\n          </Card.Body>\n        </Card>\n\n        {/* Resumen Final */}\n        {totals.vendorCount > 0 && (\n          <Card className=\"checkout-summary\">\n            <Card.Header className=\"bg-primary text-white\">\n              <h6 className=\"mb-0\">💰 Resumen de Compra</h6>\n            </Card.Header>\n            <Card.Body>\n              <div className=\"summary-rows\">\n                <div className=\"d-flex justify-content-between\">\n                  <span>Vendedores seleccionados:</span>\n                  <span className=\"fw-bold\">{totals.vendorCount}</span>\n                </div>\n                <div className=\"d-flex justify-content-between\">\n                  <span>Total de productos:</span>\n                  <span className=\"fw-bold\">{totals.totalItems}</span>\n                </div>\n                <div className=\"d-flex justify-content-between\">\n                  <span>Subtotal productos:</span>\n                  <span>₡{totals.totalAmount.toLocaleString()}</span>\n                </div>\n                <div className=\"d-flex justify-content-between\">\n                  <span>Costos de envío:</span>\n                  <span>\n                    {totals.shippingCost > 0 ? `₡${totals.shippingCost.toLocaleString()}` : 'Gratis'}\n                  </span>\n                </div>\n                <hr />\n                <div className=\"d-flex justify-content-between fs-5 fw-bold text-primary\">\n                  <span>Total a coordinar:</span>\n                  <span>₡{(totals.totalAmount + totals.shippingCost).toLocaleString()}</span>\n                </div>\n              </div>\n            </Card.Body>\n          </Card>\n        )}\n      </Modal.Body>\n\n      <Modal.Footer className=\"border-0 pt-0\">\n        <Button variant=\"outline-secondary\" onClick={onHide} disabled={actionLoading}>\n          Cancelar\n        </Button>\n        <Button \n          variant=\"primary\" \n          onClick={handleCheckout}\n          disabled={actionLoading || totals.vendorCount === 0 || (availabilityCheck && !availabilityCheck.available)}\n          className=\"px-4\"\n        >\n          {actionLoading ? (\n            <>\n              <Spinner size=\"sm\" className=\"me-2\" />\n              Procesando...\n            </>\n          ) : (\n            <>\n              🚀 Confirmar Compra{totals.vendorCount > 1 ? 's' : ''}\n              {totals.vendorCount > 0 && (\n                <span className=\"ms-2\">\n                  (₡{(totals.totalAmount + totals.shippingCost).toLocaleString()})\n                </span>\n              )}\n            </>\n          )}\n        </Button>\n      </Modal.Footer>\n    </Modal>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}