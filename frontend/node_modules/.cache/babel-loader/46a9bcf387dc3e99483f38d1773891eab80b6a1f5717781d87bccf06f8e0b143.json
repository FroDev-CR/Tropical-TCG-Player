{"ast":null,"code":"var _jsxFileName = \"/home/frodev/Downloads/FroDev-CR-TropicalTCGPlayers/src/components/P2PCheckout.js\",\n  _s = $RefreshSig$();\n// src/components/P2PCheckout.js\n// Componente de checkout P2P multi-vendedor\n\nimport React, { useState, useEffect } from 'react';\nimport { Modal, Button, Card, Form, Alert, Spinner, Badge } from 'react-bootstrap';\nimport { useP2PTransactions } from '../hooks/useP2PTransactions';\nimport { useCart } from '../contexts/CartContext';\nimport verificationService from '../services/verificationService';\nimport './P2PCheckout.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function P2PCheckout({\n  show,\n  onHide,\n  onSuccess\n}) {\n  _s();\n  var _availabilityCheck$er;\n  const {\n    createP2PTransactions,\n    actionLoading,\n    error,\n    clearError,\n    checkAtomicAvailability,\n    getCartByVendor\n  } = useP2PTransactions();\n  const {\n    cart,\n    getTotalItems,\n    clearCart\n  } = useCart();\n  const [vendors, setVendors] = useState([]);\n  const [selectedVendors, setSelectedVendors] = useState(new Set());\n  const [contactMethod, setContactMethod] = useState('whatsapp');\n  const [buyerNotes, setBuyerNotes] = useState('');\n  const [availabilityCheck, setAvailabilityCheck] = useState(null);\n  const [isCheckingAvailability, setIsCheckingAvailability] = useState(false);\n  const [verificationStatus, setVerificationStatus] = useState(null);\n  const [isCheckingVerification, setIsCheckingVerification] = useState(false);\n\n  // Cargar vendedores cuando se abre el modal\n  useEffect(() => {\n    if (show && cart.length > 0) {\n      const vendorGroups = getCartByVendor();\n      setVendors(vendorGroups);\n      setSelectedVendors(new Set(vendorGroups.map(v => v.vendorId)));\n      checkAvailability();\n      checkUserVerification();\n    }\n  }, [show, cart]);\n\n  // Verificar estado de verificación del usuario\n  const checkUserVerification = async () => {\n    setIsCheckingVerification(true);\n    try {\n      const userDoc = await getDoc(doc(db, 'users', user.uid));\n      if (userDoc.exists()) {\n        const status = await verificationService.getVerificationStatus(user.uid);\n        setVerificationStatus(status);\n      }\n    } catch (error) {\n      console.error('Error verificando usuario:', error);\n    }\n    setIsCheckingVerification(false);\n  };\n\n  // Verificar disponibilidad atómica\n  const checkAvailability = async () => {\n    if (cart.length === 0) return;\n    setIsCheckingAvailability(true);\n    try {\n      const result = await checkAtomicAvailability(cart);\n      setAvailabilityCheck(result);\n    } catch (error) {\n      console.error('Error verificando disponibilidad:', error);\n      setAvailabilityCheck({\n        available: false,\n        errors: [{\n          item: 'general',\n          message: 'Error verificando disponibilidad'\n        }]\n      });\n    } finally {\n      setIsCheckingAvailability(false);\n    }\n  };\n\n  // Manejar selección de vendedor\n  const handleVendorToggle = vendorId => {\n    const newSelected = new Set(selectedVendors);\n    if (newSelected.has(vendorId)) {\n      newSelected.delete(vendorId);\n    } else {\n      newSelected.add(vendorId);\n    }\n    setSelectedVendors(newSelected);\n  };\n\n  // Obtener vendedores seleccionados\n  const getSelectedVendors = () => {\n    return vendors.filter(vendor => selectedVendors.has(vendor.vendorId));\n  };\n\n  // Calcular totales de vendedores seleccionados\n  const getSelectedTotals = () => {\n    const selected = getSelectedVendors();\n    return {\n      totalAmount: selected.reduce((sum, vendor) => sum + vendor.totalAmount, 0),\n      shippingCost: selected.reduce((sum, vendor) => sum + (vendor.hasShipping ? 600 : 0), 0),\n      totalItems: selected.reduce((sum, vendor) => sum + vendor.totalItems, 0),\n      vendorCount: selected.length\n    };\n  };\n\n  // Manejar checkout\n  const handleCheckout = async () => {\n    if (selectedVendors.size === 0) {\n      alert('Selecciona al menos un vendedor para continuar');\n      return;\n    }\n    clearError();\n    try {\n      const selectedVendorData = getSelectedVendors();\n      const results = await createP2PTransactions(contactMethod, buyerNotes.trim());\n\n      // Analizar resultados\n      const successful = results.filter(r => r.success);\n      const failed = results.filter(r => !r.success);\n      if (successful.length > 0 && failed.length === 0) {\n        // Todas las transacciones exitosas\n        onSuccess && onSuccess({\n          type: 'complete',\n          successful,\n          message: `¡Perfecto! Se crearon ${successful.length} transacción${successful.length > 1 ? 'es' : ''} exitosamente.`\n        });\n      } else if (successful.length > 0 && failed.length > 0) {\n        // Algunas exitosas, algunas fallaron\n        onSuccess && onSuccess({\n          type: 'partial',\n          successful,\n          failed,\n          message: `${successful.length} transacción${successful.length > 1 ? 'es' : ''} creada${successful.length > 1 ? 's' : ''}, pero ${failed.length} falló${failed.length > 1 ? 'n' : ''}.`\n        });\n      } else {\n        // Todas fallaron\n        throw new Error('No se pudo crear ninguna transacción. Por favor intenta nuevamente.');\n      }\n      onHide();\n    } catch (error) {\n      console.error('Error en checkout:', error);\n      // El error ya está manejado por el hook\n    }\n  };\n  const totals = getSelectedTotals();\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    show: show,\n    onHide: onHide,\n    size: \"lg\",\n    className: \"p2p-checkout-modal\",\n    children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n      closeButton: true,\n      className: \"border-0 pb-0\",\n      children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n        className: \"text-primary fw-bold\",\n        children: \"\\uD83D\\uDED2 Confirmar Compras P2P\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n      className: \"px-4\",\n      children: [error && /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"danger\",\n        dismissible: true,\n        onClose: clearError,\n        children: [/*#__PURE__*/_jsxDEV(Alert.Heading, {\n          children: \"Error en el checkout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mb-0\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 11\n      }, this), isCheckingAvailability && /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"info\",\n        className: \"d-flex align-items-center\",\n        children: [/*#__PURE__*/_jsxDEV(Spinner, {\n          size: \"sm\",\n          className: \"me-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 13\n        }, this), \"Verificando disponibilidad de productos...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 11\n      }, this), availabilityCheck && !availabilityCheck.available && /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"warning\",\n        children: [/*#__PURE__*/_jsxDEV(Alert.Heading, {\n          children: \"\\u26A0\\uFE0F Problemas de Disponibilidad\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"mb-0\",\n          children: (_availabilityCheck$er = availabilityCheck.errors) === null || _availabilityCheck$er === void 0 ? void 0 : _availabilityCheck$er.map((error, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: error.message\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-end\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline-warning\",\n            size: \"sm\",\n            onClick: checkAvailability,\n            children: \"Verificar Nuevamente\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"vendors-section mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"mb-3\",\n          children: [\"\\uD83D\\uDCE6 Vendedores (\", vendors.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this), vendors.map(vendor => /*#__PURE__*/_jsxDEV(Card, {\n          className: `vendor-card mb-3 ${selectedVendors.has(vendor.vendorId) ? 'selected' : 'unselected'}`,\n          children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n            className: \"d-flex justify-content-between align-items-center p-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Check, {\n              type: \"checkbox\",\n              id: `vendor-${vendor.vendorId}`,\n              checked: selectedVendors.has(vendor.vendorId),\n              onChange: () => handleVendorToggle(vendor.vendorId),\n              label: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"vendor-header-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: vendor.vendorName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-muted small\",\n                  children: [\"\\uD83D\\uDCF1 \", vendor.vendorPhone, \" \\u2022 \\u2709\\uFE0F \", vendor.vendorEmail]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"vendor-summary text-end\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"fw-bold text-primary\",\n                children: [\"\\u20A1\", (vendor.totalAmount + (vendor.hasShipping ? 600 : 0)).toLocaleString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"small text-muted\",\n                children: [vendor.totalItems, \" item\", vendor.totalItems > 1 ? 's' : '', vendor.hasShipping && /*#__PURE__*/_jsxDEV(Badge, {\n                  bg: \"info\",\n                  className: \"ms-1\",\n                  children: \"+Env\\xEDo\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 15\n          }, this), selectedVendors.has(vendor.vendorId) && /*#__PURE__*/_jsxDEV(Card.Body, {\n            className: \"pt-0\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"items-list\",\n              children: vendor.items.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"item-row d-flex justify-content-between align-items-center py-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"item-info d-flex align-items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: item.cardImage,\n                    alt: item.cardName,\n                    className: \"item-thumbnail me-3\",\n                    onError: e => e.target.src = '/placeholder-card.png'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 235,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"item-name fw-medium\",\n                      children: item.cardName\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 242,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"item-details small text-muted\",\n                      children: [item.condition, \" \\u2022 \", item.setName]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 243,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 241,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"item-pricing text-end\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"item-price fw-bold\",\n                    children: [\"\\u20A1\", item.price.toLocaleString(), item.quantity > 1 && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"quantity-badge ms-2\",\n                      children: [\"x\", item.quantity]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 252,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 249,\n                    columnNumber: 27\n                  }, this), item.quantity > 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"small text-muted\",\n                    children: [\"Total: \\u20A1\", (item.price * item.quantity).toLocaleString()]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 256,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 25\n                }, this)]\n              }, `${item.id}-${index}`, true, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cost-breakdown mt-3 pt-3 border-top\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Productos:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 268,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"\\u20A1\", vendor.totalAmount.toLocaleString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Env\\xEDo:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 272,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: vendor.hasShipping ? '₡600' : /*#__PURE__*/_jsxDEV(Badge, {\n                    bg: \"success\",\n                    children: \"Gratis\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 275,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n                className: \"my-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-between fw-bold text-primary\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Total:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 281,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"\\u20A1\", (vendor.totalAmount + (vendor.hasShipping ? 600 : 0)).toLocaleString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 282,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 17\n          }, this)]\n        }, vendor.vendorId, true, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        className: \"checkout-config mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n          className: \"bg-light\",\n          children: /*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"mb-0\",\n            children: \"\\u2699\\uFE0F Configuraci\\xF3n de Compra\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"\\uD83D\\uDCDE M\\xE9todo de contacto preferido\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"contact-methods\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Check, {\n                type: \"radio\",\n                id: \"contact-whatsapp\",\n                name: \"contactMethod\",\n                value: \"whatsapp\",\n                checked: contactMethod === 'whatsapp',\n                onChange: e => setContactMethod(e.target.value),\n                label: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"me-2\",\n                    children: \"\\uD83D\\uDCF1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 310,\n                    columnNumber: 23\n                  }, this), \"WhatsApp \", /*#__PURE__*/_jsxDEV(Badge, {\n                    bg: \"success\",\n                    children: \"Recomendado\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 311,\n                    columnNumber: 32\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 309,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Check, {\n                type: \"radio\",\n                id: \"contact-email\",\n                name: \"contactMethod\",\n                value: \"email\",\n                checked: contactMethod === 'email',\n                onChange: e => setContactMethod(e.target.value),\n                label: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"me-2\",\n                    children: \"\\u2709\\uFE0F\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 324,\n                    columnNumber: 23\n                  }, this), \"Email\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 323,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 315,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Check, {\n                type: \"radio\",\n                id: \"contact-phone\",\n                name: \"contactMethod\",\n                value: \"phone\",\n                checked: contactMethod === 'phone',\n                onChange: e => setContactMethod(e.target.value),\n                label: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"me-2\",\n                    children: \"\\u260E\\uFE0F\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 338,\n                    columnNumber: 23\n                  }, this), \"Llamada telef\\xF3nica\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 337,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"\\uD83D\\uDCDD Notas adicionales (opcional)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              as: \"textarea\",\n              rows: 3,\n              value: buyerNotes,\n              onChange: e => setBuyerNotes(e.target.value),\n              placeholder: \"Mensaje para el vendedor, preferencias de entrega, etc...\",\n              maxLength: 500\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Text, {\n              className: \"text-muted\",\n              children: [buyerNotes.length, \"/500 caracteres\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 9\n      }, this), totals.vendorCount > 0 && /*#__PURE__*/_jsxDEV(Card, {\n        className: \"checkout-summary\",\n        children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n          className: \"bg-primary text-white\",\n          children: /*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"mb-0\",\n            children: \"\\uD83D\\uDCB0 Resumen de Compra\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-rows\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Vendedores seleccionados:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"fw-bold\",\n                children: totals.vendorCount\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Total de productos:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"fw-bold\",\n                children: totals.totalItems\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 378,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Subtotal productos:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 381,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"\\u20A1\", totals.totalAmount.toLocaleString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 382,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Costos de env\\xEDo:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: totals.shippingCost > 0 ? `₡${totals.shippingCost.toLocaleString()}` : 'Gratis'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between fs-5 fw-bold text-primary\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Total a coordinar:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"\\u20A1\", (totals.totalAmount + totals.shippingCost).toLocaleString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n      className: \"border-0 pt-0\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outline-secondary\",\n        onClick: onHide,\n        disabled: actionLoading,\n        children: \"Cancelar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        onClick: handleCheckout,\n        disabled: actionLoading || totals.vendorCount === 0 || availabilityCheck && !availabilityCheck.available,\n        className: \"px-4\",\n        children: actionLoading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Spinner, {\n            size: \"sm\",\n            className: \"me-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 15\n          }, this), \"Procesando...\"]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [\"\\uD83D\\uDE80 Confirmar Compra\", totals.vendorCount > 1 ? 's' : '', totals.vendorCount > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ms-2\",\n            children: [\"(\\u20A1\", (totals.totalAmount + totals.shippingCost).toLocaleString(), \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 151,\n    columnNumber: 5\n  }, this);\n}\n_s(P2PCheckout, \"JHI/TSv8GG2wm6DV2FJ2z0fl0Dg=\", false, function () {\n  return [useP2PTransactions, useCart];\n});\n_c = P2PCheckout;\nvar _c;\n$RefreshReg$(_c, \"P2PCheckout\");","map":{"version":3,"names":["React","useState","useEffect","Modal","Button","Card","Form","Alert","Spinner","Badge","useP2PTransactions","useCart","verificationService","jsxDEV","_jsxDEV","Fragment","_Fragment","P2PCheckout","show","onHide","onSuccess","_s","_availabilityCheck$er","createP2PTransactions","actionLoading","error","clearError","checkAtomicAvailability","getCartByVendor","cart","getTotalItems","clearCart","vendors","setVendors","selectedVendors","setSelectedVendors","Set","contactMethod","setContactMethod","buyerNotes","setBuyerNotes","availabilityCheck","setAvailabilityCheck","isCheckingAvailability","setIsCheckingAvailability","verificationStatus","setVerificationStatus","isCheckingVerification","setIsCheckingVerification","length","vendorGroups","map","v","vendorId","checkAvailability","checkUserVerification","userDoc","getDoc","doc","db","user","uid","exists","status","getVerificationStatus","console","result","available","errors","item","message","handleVendorToggle","newSelected","has","delete","add","getSelectedVendors","filter","vendor","getSelectedTotals","selected","totalAmount","reduce","sum","shippingCost","hasShipping","totalItems","vendorCount","handleCheckout","size","alert","selectedVendorData","results","trim","successful","r","success","failed","type","Error","totals","className","children","Header","closeButton","Title","fileName","_jsxFileName","lineNumber","columnNumber","Body","variant","dismissible","onClose","Heading","index","onClick","Check","id","checked","onChange","label","vendorName","vendorPhone","vendorEmail","toLocaleString","bg","items","src","cardImage","alt","cardName","onError","e","target","condition","setName","price","quantity","Group","Label","name","value","Control","as","rows","placeholder","maxLength","Text","Footer","disabled","_c","$RefreshReg$"],"sources":["/home/frodev/Downloads/FroDev-CR-TropicalTCGPlayers/src/components/P2PCheckout.js"],"sourcesContent":["// src/components/P2PCheckout.js\n// Componente de checkout P2P multi-vendedor\n\nimport React, { useState, useEffect } from 'react';\nimport { Modal, Button, Card, Form, Alert, Spinner, Badge } from 'react-bootstrap';\nimport { useP2PTransactions } from '../hooks/useP2PTransactions';\nimport { useCart } from '../contexts/CartContext';\nimport verificationService from '../services/verificationService';\nimport './P2PCheckout.css';\n\nexport default function P2PCheckout({ show, onHide, onSuccess }) {\n  const {\n    createP2PTransactions,\n    actionLoading,\n    error,\n    clearError,\n    checkAtomicAvailability,\n    getCartByVendor\n  } = useP2PTransactions();\n\n  const { cart, getTotalItems, clearCart } = useCart();\n\n  const [vendors, setVendors] = useState([]);\n  const [selectedVendors, setSelectedVendors] = useState(new Set());\n  const [contactMethod, setContactMethod] = useState('whatsapp');\n  const [buyerNotes, setBuyerNotes] = useState('');\n  const [availabilityCheck, setAvailabilityCheck] = useState(null);\n  const [isCheckingAvailability, setIsCheckingAvailability] = useState(false);\n  const [verificationStatus, setVerificationStatus] = useState(null);\n  const [isCheckingVerification, setIsCheckingVerification] = useState(false);\n\n  // Cargar vendedores cuando se abre el modal\n  useEffect(() => {\n    if (show && cart.length > 0) {\n      const vendorGroups = getCartByVendor();\n      setVendors(vendorGroups);\n      setSelectedVendors(new Set(vendorGroups.map(v => v.vendorId)));\n      checkAvailability();\n      checkUserVerification();\n    }\n  }, [show, cart]);\n\n  // Verificar estado de verificación del usuario\n  const checkUserVerification = async () => {\n    setIsCheckingVerification(true);\n    try {\n      const userDoc = await getDoc(doc(db, 'users', user.uid));\n      if (userDoc.exists()) {\n        const status = await verificationService.getVerificationStatus(user.uid);\n        setVerificationStatus(status);\n      }\n    } catch (error) {\n      console.error('Error verificando usuario:', error);\n    }\n    setIsCheckingVerification(false);\n  };\n\n  // Verificar disponibilidad atómica\n  const checkAvailability = async () => {\n    if (cart.length === 0) return;\n\n    setIsCheckingAvailability(true);\n    try {\n      const result = await checkAtomicAvailability(cart);\n      setAvailabilityCheck(result);\n    } catch (error) {\n      console.error('Error verificando disponibilidad:', error);\n      setAvailabilityCheck({ \n        available: false, \n        errors: [{ item: 'general', message: 'Error verificando disponibilidad' }]\n      });\n    } finally {\n      setIsCheckingAvailability(false);\n    }\n  };\n\n  // Manejar selección de vendedor\n  const handleVendorToggle = (vendorId) => {\n    const newSelected = new Set(selectedVendors);\n    if (newSelected.has(vendorId)) {\n      newSelected.delete(vendorId);\n    } else {\n      newSelected.add(vendorId);\n    }\n    setSelectedVendors(newSelected);\n  };\n\n  // Obtener vendedores seleccionados\n  const getSelectedVendors = () => {\n    return vendors.filter(vendor => selectedVendors.has(vendor.vendorId));\n  };\n\n  // Calcular totales de vendedores seleccionados\n  const getSelectedTotals = () => {\n    const selected = getSelectedVendors();\n    return {\n      totalAmount: selected.reduce((sum, vendor) => sum + vendor.totalAmount, 0),\n      shippingCost: selected.reduce((sum, vendor) => sum + (vendor.hasShipping ? 600 : 0), 0),\n      totalItems: selected.reduce((sum, vendor) => sum + vendor.totalItems, 0),\n      vendorCount: selected.length\n    };\n  };\n\n  // Manejar checkout\n  const handleCheckout = async () => {\n    if (selectedVendors.size === 0) {\n      alert('Selecciona al menos un vendedor para continuar');\n      return;\n    }\n\n    clearError();\n\n    try {\n      const selectedVendorData = getSelectedVendors();\n      const results = await createP2PTransactions(contactMethod, buyerNotes.trim());\n\n      // Analizar resultados\n      const successful = results.filter(r => r.success);\n      const failed = results.filter(r => !r.success);\n\n      if (successful.length > 0 && failed.length === 0) {\n        // Todas las transacciones exitosas\n        onSuccess && onSuccess({\n          type: 'complete',\n          successful,\n          message: `¡Perfecto! Se crearon ${successful.length} transacción${successful.length > 1 ? 'es' : ''} exitosamente.`\n        });\n      } else if (successful.length > 0 && failed.length > 0) {\n        // Algunas exitosas, algunas fallaron\n        onSuccess && onSuccess({\n          type: 'partial',\n          successful,\n          failed,\n          message: `${successful.length} transacción${successful.length > 1 ? 'es' : ''} creada${successful.length > 1 ? 's' : ''}, pero ${failed.length} falló${failed.length > 1 ? 'n' : ''}.`\n        });\n      } else {\n        // Todas fallaron\n        throw new Error('No se pudo crear ninguna transacción. Por favor intenta nuevamente.');\n      }\n\n      onHide();\n    } catch (error) {\n      console.error('Error en checkout:', error);\n      // El error ya está manejado por el hook\n    }\n  };\n\n  const totals = getSelectedTotals();\n\n  return (\n    <Modal show={show} onHide={onHide} size=\"lg\" className=\"p2p-checkout-modal\">\n      <Modal.Header closeButton className=\"border-0 pb-0\">\n        <Modal.Title className=\"text-primary fw-bold\">\n          🛒 Confirmar Compras P2P\n        </Modal.Title>\n      </Modal.Header>\n\n      <Modal.Body className=\"px-4\">\n        {/* Error Alert */}\n        {error && (\n          <Alert variant=\"danger\" dismissible onClose={clearError}>\n            <Alert.Heading>Error en el checkout</Alert.Heading>\n            <p className=\"mb-0\">{error}</p>\n          </Alert>\n        )}\n\n        {/* Verificación de Disponibilidad */}\n        {isCheckingAvailability && (\n          <Alert variant=\"info\" className=\"d-flex align-items-center\">\n            <Spinner size=\"sm\" className=\"me-2\" />\n            Verificando disponibilidad de productos...\n          </Alert>\n        )}\n\n        {availabilityCheck && !availabilityCheck.available && (\n          <Alert variant=\"warning\">\n            <Alert.Heading>⚠️ Problemas de Disponibilidad</Alert.Heading>\n            <ul className=\"mb-0\">\n              {availabilityCheck.errors?.map((error, index) => (\n                <li key={index}>{error.message}</li>\n              ))}\n            </ul>\n            <hr />\n            <div className=\"d-flex justify-content-end\">\n              <Button variant=\"outline-warning\" size=\"sm\" onClick={checkAvailability}>\n                Verificar Nuevamente\n              </Button>\n            </div>\n          </Alert>\n        )}\n\n        {/* Lista de Vendedores */}\n        <div className=\"vendors-section mb-4\">\n          <h5 className=\"mb-3\">📦 Vendedores ({vendors.length})</h5>\n          \n          {vendors.map((vendor) => (\n            <Card \n              key={vendor.vendorId} \n              className={`vendor-card mb-3 ${selectedVendors.has(vendor.vendorId) ? 'selected' : 'unselected'}`}\n            >\n              <Card.Header className=\"d-flex justify-content-between align-items-center p-3\">\n                <Form.Check\n                  type=\"checkbox\"\n                  id={`vendor-${vendor.vendorId}`}\n                  checked={selectedVendors.has(vendor.vendorId)}\n                  onChange={() => handleVendorToggle(vendor.vendorId)}\n                  label={\n                    <div className=\"vendor-header-info\">\n                      <strong>{vendor.vendorName}</strong>\n                      <div className=\"text-muted small\">\n                        📱 {vendor.vendorPhone} • ✉️ {vendor.vendorEmail}\n                      </div>\n                    </div>\n                  }\n                />\n                <div className=\"vendor-summary text-end\">\n                  <div className=\"fw-bold text-primary\">\n                    ₡{(vendor.totalAmount + (vendor.hasShipping ? 600 : 0)).toLocaleString()}\n                  </div>\n                  <div className=\"small text-muted\">\n                    {vendor.totalItems} item{vendor.totalItems > 1 ? 's' : ''}\n                    {vendor.hasShipping && (\n                      <Badge bg=\"info\" className=\"ms-1\">+Envío</Badge>\n                    )}\n                  </div>\n                </div>\n              </Card.Header>\n\n              {selectedVendors.has(vendor.vendorId) && (\n                <Card.Body className=\"pt-0\">\n                  <div className=\"items-list\">\n                    {vendor.items.map((item, index) => (\n                      <div key={`${item.id}-${index}`} className=\"item-row d-flex justify-content-between align-items-center py-2\">\n                        <div className=\"item-info d-flex align-items-center\">\n                          <img \n                            src={item.cardImage} \n                            alt={item.cardName}\n                            className=\"item-thumbnail me-3\"\n                            onError={(e) => e.target.src = '/placeholder-card.png'}\n                          />\n                          <div>\n                            <div className=\"item-name fw-medium\">{item.cardName}</div>\n                            <div className=\"item-details small text-muted\">\n                              {item.condition} • {item.setName}\n                            </div>\n                          </div>\n                        </div>\n                        <div className=\"item-pricing text-end\">\n                          <div className=\"item-price fw-bold\">\n                            ₡{item.price.toLocaleString()}\n                            {item.quantity > 1 && (\n                              <span className=\"quantity-badge ms-2\">x{item.quantity}</span>\n                            )}\n                          </div>\n                          {item.quantity > 1 && (\n                            <div className=\"small text-muted\">\n                              Total: ₡{(item.price * item.quantity).toLocaleString()}\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n\n                  {/* Desglose de Costos */}\n                  <div className=\"cost-breakdown mt-3 pt-3 border-top\">\n                    <div className=\"d-flex justify-content-between\">\n                      <span>Productos:</span>\n                      <span>₡{vendor.totalAmount.toLocaleString()}</span>\n                    </div>\n                    <div className=\"d-flex justify-content-between\">\n                      <span>Envío:</span>\n                      <span>\n                        {vendor.hasShipping ? '₡600' : (\n                          <Badge bg=\"success\">Gratis</Badge>\n                        )}\n                      </span>\n                    </div>\n                    <hr className=\"my-2\" />\n                    <div className=\"d-flex justify-content-between fw-bold text-primary\">\n                      <span>Total:</span>\n                      <span>₡{(vendor.totalAmount + (vendor.hasShipping ? 600 : 0)).toLocaleString()}</span>\n                    </div>\n                  </div>\n                </Card.Body>\n              )}\n            </Card>\n          ))}\n        </div>\n\n        {/* Configuración de Compra */}\n        <Card className=\"checkout-config mb-4\">\n          <Card.Header className=\"bg-light\">\n            <h6 className=\"mb-0\">⚙️ Configuración de Compra</h6>\n          </Card.Header>\n          <Card.Body>\n            {/* Método de Contacto */}\n            <Form.Group className=\"mb-3\">\n              <Form.Label>📞 Método de contacto preferido</Form.Label>\n              <div className=\"contact-methods\">\n                <Form.Check\n                  type=\"radio\"\n                  id=\"contact-whatsapp\"\n                  name=\"contactMethod\"\n                  value=\"whatsapp\"\n                  checked={contactMethod === 'whatsapp'}\n                  onChange={(e) => setContactMethod(e.target.value)}\n                  label={\n                    <span>\n                      <span className=\"me-2\">📱</span>\n                      WhatsApp <Badge bg=\"success\">Recomendado</Badge>\n                    </span>\n                  }\n                />\n                <Form.Check\n                  type=\"radio\"\n                  id=\"contact-email\"\n                  name=\"contactMethod\"\n                  value=\"email\"\n                  checked={contactMethod === 'email'}\n                  onChange={(e) => setContactMethod(e.target.value)}\n                  label={\n                    <span>\n                      <span className=\"me-2\">✉️</span>\n                      Email\n                    </span>\n                  }\n                />\n                <Form.Check\n                  type=\"radio\"\n                  id=\"contact-phone\"\n                  name=\"contactMethod\"\n                  value=\"phone\"\n                  checked={contactMethod === 'phone'}\n                  onChange={(e) => setContactMethod(e.target.value)}\n                  label={\n                    <span>\n                      <span className=\"me-2\">☎️</span>\n                      Llamada telefónica\n                    </span>\n                  }\n                />\n              </div>\n            </Form.Group>\n\n            {/* Notas del Comprador */}\n            <Form.Group>\n              <Form.Label>📝 Notas adicionales (opcional)</Form.Label>\n              <Form.Control\n                as=\"textarea\"\n                rows={3}\n                value={buyerNotes}\n                onChange={(e) => setBuyerNotes(e.target.value)}\n                placeholder=\"Mensaje para el vendedor, preferencias de entrega, etc...\"\n                maxLength={500}\n              />\n              <Form.Text className=\"text-muted\">\n                {buyerNotes.length}/500 caracteres\n              </Form.Text>\n            </Form.Group>\n          </Card.Body>\n        </Card>\n\n        {/* Resumen Final */}\n        {totals.vendorCount > 0 && (\n          <Card className=\"checkout-summary\">\n            <Card.Header className=\"bg-primary text-white\">\n              <h6 className=\"mb-0\">💰 Resumen de Compra</h6>\n            </Card.Header>\n            <Card.Body>\n              <div className=\"summary-rows\">\n                <div className=\"d-flex justify-content-between\">\n                  <span>Vendedores seleccionados:</span>\n                  <span className=\"fw-bold\">{totals.vendorCount}</span>\n                </div>\n                <div className=\"d-flex justify-content-between\">\n                  <span>Total de productos:</span>\n                  <span className=\"fw-bold\">{totals.totalItems}</span>\n                </div>\n                <div className=\"d-flex justify-content-between\">\n                  <span>Subtotal productos:</span>\n                  <span>₡{totals.totalAmount.toLocaleString()}</span>\n                </div>\n                <div className=\"d-flex justify-content-between\">\n                  <span>Costos de envío:</span>\n                  <span>\n                    {totals.shippingCost > 0 ? `₡${totals.shippingCost.toLocaleString()}` : 'Gratis'}\n                  </span>\n                </div>\n                <hr />\n                <div className=\"d-flex justify-content-between fs-5 fw-bold text-primary\">\n                  <span>Total a coordinar:</span>\n                  <span>₡{(totals.totalAmount + totals.shippingCost).toLocaleString()}</span>\n                </div>\n              </div>\n            </Card.Body>\n          </Card>\n        )}\n      </Modal.Body>\n\n      <Modal.Footer className=\"border-0 pt-0\">\n        <Button variant=\"outline-secondary\" onClick={onHide} disabled={actionLoading}>\n          Cancelar\n        </Button>\n        <Button \n          variant=\"primary\" \n          onClick={handleCheckout}\n          disabled={actionLoading || totals.vendorCount === 0 || (availabilityCheck && !availabilityCheck.available)}\n          className=\"px-4\"\n        >\n          {actionLoading ? (\n            <>\n              <Spinner size=\"sm\" className=\"me-2\" />\n              Procesando...\n            </>\n          ) : (\n            <>\n              🚀 Confirmar Compra{totals.vendorCount > 1 ? 's' : ''}\n              {totals.vendorCount > 0 && (\n                <span className=\"ms-2\">\n                  (₡{(totals.totalAmount + totals.shippingCost).toLocaleString()})\n                </span>\n              )}\n            </>\n          )}\n        </Button>\n      </Modal.Footer>\n    </Modal>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}