{"ast":null,"code":"var _jsxFileName = \"/home/frodev/Downloads/FroDev-CR-TropicalTCGPlayers/src/contexts/CartContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// src/contexts/CartContext.js\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport apiClient from '../services/api';\nimport { useAuth } from './AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\nexport function CartProvider({\n  children\n}) {\n  _s();\n  const [cart, setCart] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  // Verificar si AuthContext está disponible\n  let user = null;\n  let isAuthenticated = false;\n  try {\n    const authContext = useAuth();\n    user = authContext.user;\n    isAuthenticated = authContext.isAuthenticated;\n  } catch (error) {\n    // AuthContext no disponible - solo renderizar children sin funcionalidad de carrito\n    return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n      value: {\n        cart: [],\n        loading: false,\n        addToCart: () => {},\n        removeFromCart: () => {},\n        clearCart: () => {},\n        getCartCount: () => 0,\n        getCartTotal: () => 0\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Cargar carrito cuando el usuario cambie\n  useEffect(() => {\n    if (isAuthenticated && user) {\n      loadUserCart();\n    } else {\n      // Usuario no autenticado, carrito vacío\n      setCart([]);\n      setLoading(false);\n    }\n  }, [isAuthenticated, user]);\n  const loadUserCart = async () => {\n    setLoading(true);\n    try {\n      // Por ahora usamos localStorage, luego se puede implementar endpoint de carrito\n      const savedCart = localStorage.getItem(`cart_${user.id}`);\n      if (savedCart) {\n        setCart(JSON.parse(savedCart));\n      } else {\n        setCart([]);\n      }\n    } catch (error) {\n      console.error('Error cargando carrito:', error);\n      setCart([]);\n    }\n    setLoading(false);\n  };\n  const saveCart = newCart => {\n    if (user) {\n      localStorage.setItem(`cart_${user.id}`, JSON.stringify(newCart));\n    }\n  };\n\n  // Función para agregar al carrito\n  const addToCart = async (listing, requestedQuantity = 1) => {\n    try {\n      console.log('🛒 Intentando agregar al carrito:', listing === null || listing === void 0 ? void 0 : listing.cardName, 'ID:', (listing === null || listing === void 0 ? void 0 : listing.id) || (listing === null || listing === void 0 ? void 0 : listing.listingId), 'Cantidad:', requestedQuantity);\n\n      // Normalizar el ID del listing\n      const listingId = listing.id || listing.listingId;\n      if (!listing || !listingId) {\n        console.error('❌ Listing inválido:', listing);\n        alert('No se puede agregar al carrito: Datos de carta inválidos');\n        return false;\n      }\n\n      // Verificar disponibilidad\n      const availability = await checkListingAvailability(listingId, requestedQuantity);\n      if (!availability.available) {\n        console.log('❌ No disponible:', availability.reason);\n        alert(`No se puede agregar al carrito: ${availability.reason}`);\n        return false;\n      }\n\n      // Verificar si ya está en el carrito\n      let existingItemIndex = -1;\n      if (!Array.isArray(cart)) {\n        console.error('❌ Carrito no es un array:', cart);\n        setCart([]);\n      } else {\n        existingItemIndex = cart.findIndex(item => item && (item.id === listingId || item.listingId === listingId));\n      }\n      let newCart;\n      if (existingItemIndex >= 0) {\n        // Si ya existe, verificar si la nueva cantidad total no excede la disponible\n        const currentQuantityInCart = cart[existingItemIndex].quantity || 1;\n        const totalQuantity = currentQuantityInCart + requestedQuantity;\n        if (totalQuantity > availability.availableQuantity) {\n          alert(`Solo puedes agregar ${availability.availableQuantity - currentQuantityInCart} unidades más de esta carta`);\n          return false;\n        }\n        newCart = [...cart];\n        newCart[existingItemIndex].quantity = totalQuantity;\n      } else {\n        var _listing$images, _listing$sellerId, _listing$sellerId2, _listing$sellerId3;\n        // Agregar nuevo item\n        const cartItem = {\n          id: listingId,\n          listingId: listingId,\n          cardId: listing.cardId || listing.id,\n          cardName: listing.cardName || listing.name,\n          cardImage: listing.cardImage || ((_listing$images = listing.images) === null || _listing$images === void 0 ? void 0 : _listing$images.small),\n          price: listing.price,\n          condition: listing.condition,\n          quantity: requestedQuantity,\n          sellerId: ((_listing$sellerId = listing.sellerId) === null || _listing$sellerId === void 0 ? void 0 : _listing$sellerId._id) || listing.sellerId,\n          sellerName: ((_listing$sellerId2 = listing.sellerId) === null || _listing$sellerId2 === void 0 ? void 0 : _listing$sellerId2.username) || listing.sellerName,\n          userPhone: ((_listing$sellerId3 = listing.sellerId) === null || _listing$sellerId3 === void 0 ? void 0 : _listing$sellerId3.phone) || listing.userPhone,\n          setName: listing.setName,\n          rarity: listing.rarity,\n          tcgType: listing.tcgType,\n          maxQuantity: availability.availableQuantity\n        };\n        newCart = [...cart, cartItem];\n      }\n      setCart(newCart);\n      saveCart(newCart);\n      console.log('✅ Agregado al carrito exitosamente');\n      return true;\n    } catch (error) {\n      console.error('❌ Error agregando al carrito:', error);\n      alert('Error agregando al carrito. Inténtalo de nuevo.');\n      return false;\n    }\n  };\n\n  // Función para remover del carrito\n  const removeFromCart = async listingId => {\n    try {\n      const newCart = cart.filter(item => item.id !== listingId && item.listingId !== listingId);\n      setCart(newCart);\n      saveCart(newCart);\n      return true;\n    } catch (error) {\n      console.error('Error removiendo del carrito:', error);\n      return false;\n    }\n  };\n\n  // Función para limpiar carrito\n  const clearCart = async () => {\n    try {\n      setCart([]);\n      saveCart([]);\n      return true;\n    } catch (error) {\n      console.error('Error limpiando carrito:', error);\n      return false;\n    }\n  };\n\n  // Función para actualizar cantidad\n  const updateCartItemQuantity = async (listingId, newQuantity) => {\n    try {\n      if (newQuantity <= 0) {\n        return await removeFromCart(listingId);\n      }\n      const newCart = cart.map(item => {\n        if (item.id === listingId || item.listingId === listingId) {\n          return {\n            ...item,\n            quantity: newQuantity\n          };\n        }\n        return item;\n      });\n      setCart(newCart);\n      saveCart(newCart);\n      return true;\n    } catch (error) {\n      console.error('Error actualizando cantidad:', error);\n      return false;\n    }\n  };\n\n  // Función para verificar disponibilidad\n  const checkListingAvailability = async (listingId, requestedQuantity = 1) => {\n    try {\n      console.log('🔍 Verificando disponibilidad para listing:', listingId, 'cantidad:', requestedQuantity);\n      const response = await apiClient.get(`/api/v1/listings/${listingId}`);\n      if (!response.data.success) {\n        console.log('❌ Listing no existe:', listingId);\n        return {\n          available: false,\n          reason: 'El listado no existe'\n        };\n      }\n      const listingData = response.data.listing;\n      console.log('📦 Datos del listing:', listingData);\n      const availableQuantity = listingData.availableQuantity || listingData.quantity || 0;\n      const status = listingData.status || 'active';\n      console.log('📊 Estado:', status, 'Disponible:', availableQuantity, 'Solicitado:', requestedQuantity);\n      if (status === 'inactive') {\n        return {\n          available: false,\n          reason: 'El listado está inactivo'\n        };\n      }\n      if (status === 'sold_out' || availableQuantity === 0) {\n        return {\n          available: false,\n          reason: 'Producto agotado'\n        };\n      }\n      if (availableQuantity < requestedQuantity) {\n        return {\n          available: false,\n          reason: `Solo hay ${availableQuantity} unidad${availableQuantity > 1 ? 'es' : ''} disponible${availableQuantity > 1 ? 's' : ''}`,\n          availableQuantity\n        };\n      }\n      return {\n        available: true,\n        availableQuantity,\n        listing: listingData\n      };\n    } catch (error) {\n      console.error('❌ Error verificando disponibilidad:', error);\n      return {\n        available: false,\n        reason: 'Error verificando disponibilidad'\n      };\n    }\n  };\n\n  // Funciones de cálculo\n  const getTotalItems = () => {\n    return cart.reduce((total, item) => total + (item.quantity || 1), 0);\n  };\n  const getTotalPrice = () => {\n    return cart.reduce((total, item) => total + item.price * (item.quantity || 1), 0);\n  };\n\n  // Obtener items del carrito agrupados por vendedor\n  const getCartByVendor = () => {\n    const vendors = {};\n    cart.forEach(item => {\n      const vendorId = item.sellerId;\n      if (!vendors[vendorId]) {\n        vendors[vendorId] = {\n          vendorId,\n          vendorName: item.sellerName,\n          items: [],\n          totalAmount: 0\n        };\n      }\n      vendors[vendorId].items.push(item);\n      vendors[vendorId].totalAmount += item.price * (item.quantity || 1);\n    });\n    return vendors;\n  };\n  const value = {\n    cart,\n    loading,\n    user,\n    addToCart,\n    removeFromCart,\n    clearCart,\n    updateCartItemQuantity,\n    checkListingAvailability,\n    getTotalItems,\n    getTotalPrice,\n    getCartByVendor\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 294,\n    columnNumber: 10\n  }, this);\n}\n_s(CartProvider, \"+rE5GjGyDId6815O5hYd983HKig=\", false, function () {\n  return [useAuth];\n});\n_c = CartProvider;\nexport function useCart() {\n  _s2();\n  const context = useContext(CartContext);\n  if (context === undefined) {\n    throw new Error('useCart must be used within a CartProvider');\n  }\n  return context;\n}\n_s2(useCart, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport default CartContext;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","apiClient","useAuth","jsxDEV","_jsxDEV","CartContext","CartProvider","children","_s","cart","setCart","loading","setLoading","user","isAuthenticated","authContext","error","Provider","value","addToCart","removeFromCart","clearCart","getCartCount","getCartTotal","fileName","_jsxFileName","lineNumber","columnNumber","loadUserCart","savedCart","localStorage","getItem","id","JSON","parse","console","saveCart","newCart","setItem","stringify","listing","requestedQuantity","log","cardName","listingId","alert","availability","checkListingAvailability","available","reason","existingItemIndex","Array","isArray","findIndex","item","currentQuantityInCart","quantity","totalQuantity","availableQuantity","_listing$images","_listing$sellerId","_listing$sellerId2","_listing$sellerId3","cartItem","cardId","name","cardImage","images","small","price","condition","sellerId","_id","sellerName","username","userPhone","phone","setName","rarity","tcgType","maxQuantity","filter","updateCartItemQuantity","newQuantity","map","response","get","data","success","listingData","status","getTotalItems","reduce","total","getTotalPrice","getCartByVendor","vendors","forEach","vendorId","vendorName","items","totalAmount","push","_c","useCart","_s2","context","undefined","Error","$RefreshReg$"],"sources":["/home/frodev/Downloads/FroDev-CR-TropicalTCGPlayers/src/contexts/CartContext.js"],"sourcesContent":["// src/contexts/CartContext.js\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport apiClient from '../services/api';\nimport { useAuth } from './AuthContext';\n\nconst CartContext = createContext();\n\nexport function CartProvider({ children }) {\n  const [cart, setCart] = useState([]);\n  const [loading, setLoading] = useState(true);\n  \n  // Verificar si AuthContext está disponible\n  let user = null;\n  let isAuthenticated = false;\n  \n  try {\n    const authContext = useAuth();\n    user = authContext.user;\n    isAuthenticated = authContext.isAuthenticated;\n  } catch (error) {\n    // AuthContext no disponible - solo renderizar children sin funcionalidad de carrito\n    return <CartContext.Provider value={{\n      cart: [],\n      loading: false,\n      addToCart: () => {},\n      removeFromCart: () => {},\n      clearCart: () => {},\n      getCartCount: () => 0,\n      getCartTotal: () => 0\n    }}>{children}</CartContext.Provider>;\n  }\n\n  // Cargar carrito cuando el usuario cambie\n  useEffect(() => {\n    if (isAuthenticated && user) {\n      loadUserCart();\n    } else {\n      // Usuario no autenticado, carrito vacío\n      setCart([]);\n      setLoading(false);\n    }\n  }, [isAuthenticated, user]);\n\n  const loadUserCart = async () => {\n    setLoading(true);\n    try {\n      // Por ahora usamos localStorage, luego se puede implementar endpoint de carrito\n      const savedCart = localStorage.getItem(`cart_${user.id}`);\n      if (savedCart) {\n        setCart(JSON.parse(savedCart));\n      } else {\n        setCart([]);\n      }\n    } catch (error) {\n      console.error('Error cargando carrito:', error);\n      setCart([]);\n    }\n    setLoading(false);\n  };\n\n  const saveCart = (newCart) => {\n    if (user) {\n      localStorage.setItem(`cart_${user.id}`, JSON.stringify(newCart));\n    }\n  };\n\n  // Función para agregar al carrito\n  const addToCart = async (listing, requestedQuantity = 1) => {\n    try {\n      console.log('🛒 Intentando agregar al carrito:', listing?.cardName, 'ID:', listing?.id || listing?.listingId, 'Cantidad:', requestedQuantity);\n      \n      // Normalizar el ID del listing\n      const listingId = listing.id || listing.listingId;\n      \n      if (!listing || !listingId) {\n        console.error('❌ Listing inválido:', listing);\n        alert('No se puede agregar al carrito: Datos de carta inválidos');\n        return false;\n      }\n      \n      // Verificar disponibilidad\n      const availability = await checkListingAvailability(listingId, requestedQuantity);\n      \n      if (!availability.available) {\n        console.log('❌ No disponible:', availability.reason);\n        alert(`No se puede agregar al carrito: ${availability.reason}`);\n        return false;\n      }\n\n      // Verificar si ya está en el carrito\n      let existingItemIndex = -1;\n      if (!Array.isArray(cart)) {\n        console.error('❌ Carrito no es un array:', cart);\n        setCart([]);\n      } else {\n        existingItemIndex = cart.findIndex(item => item && (item.id === listingId || item.listingId === listingId));\n      }\n      \n      let newCart;\n      \n      if (existingItemIndex >= 0) {\n        // Si ya existe, verificar si la nueva cantidad total no excede la disponible\n        const currentQuantityInCart = cart[existingItemIndex].quantity || 1;\n        const totalQuantity = currentQuantityInCart + requestedQuantity;\n        \n        if (totalQuantity > availability.availableQuantity) {\n          alert(`Solo puedes agregar ${availability.availableQuantity - currentQuantityInCart} unidades más de esta carta`);\n          return false;\n        }\n        \n        newCart = [...cart];\n        newCart[existingItemIndex].quantity = totalQuantity;\n      } else {\n        // Agregar nuevo item\n        const cartItem = {\n          id: listingId,\n          listingId: listingId,\n          cardId: listing.cardId || listing.id,\n          cardName: listing.cardName || listing.name,\n          cardImage: listing.cardImage || listing.images?.small,\n          price: listing.price,\n          condition: listing.condition,\n          quantity: requestedQuantity,\n          sellerId: listing.sellerId?._id || listing.sellerId,\n          sellerName: listing.sellerId?.username || listing.sellerName,\n          userPhone: listing.sellerId?.phone || listing.userPhone,\n          setName: listing.setName,\n          rarity: listing.rarity,\n          tcgType: listing.tcgType,\n          maxQuantity: availability.availableQuantity\n        };\n        \n        newCart = [...cart, cartItem];\n      }\n      \n      setCart(newCart);\n      saveCart(newCart);\n      \n      console.log('✅ Agregado al carrito exitosamente');\n      return true;\n      \n    } catch (error) {\n      console.error('❌ Error agregando al carrito:', error);\n      alert('Error agregando al carrito. Inténtalo de nuevo.');\n      return false;\n    }\n  };\n\n  // Función para remover del carrito\n  const removeFromCart = async (listingId) => {\n    try {\n      const newCart = cart.filter(item => \n        item.id !== listingId && item.listingId !== listingId\n      );\n      setCart(newCart);\n      saveCart(newCart);\n      return true;\n    } catch (error) {\n      console.error('Error removiendo del carrito:', error);\n      return false;\n    }\n  };\n\n  // Función para limpiar carrito\n  const clearCart = async () => {\n    try {\n      setCart([]);\n      saveCart([]);\n      return true;\n    } catch (error) {\n      console.error('Error limpiando carrito:', error);\n      return false;\n    }\n  };\n\n  // Función para actualizar cantidad\n  const updateCartItemQuantity = async (listingId, newQuantity) => {\n    try {\n      if (newQuantity <= 0) {\n        return await removeFromCart(listingId);\n      }\n      \n      const newCart = cart.map(item => {\n        if (item.id === listingId || item.listingId === listingId) {\n          return { ...item, quantity: newQuantity };\n        }\n        return item;\n      });\n      \n      setCart(newCart);\n      saveCart(newCart);\n      return true;\n    } catch (error) {\n      console.error('Error actualizando cantidad:', error);\n      return false;\n    }\n  };\n\n  // Función para verificar disponibilidad\n  const checkListingAvailability = async (listingId, requestedQuantity = 1) => {\n    try {\n      console.log('🔍 Verificando disponibilidad para listing:', listingId, 'cantidad:', requestedQuantity);\n      \n      const response = await apiClient.get(`/api/v1/listings/${listingId}`);\n      \n      if (!response.data.success) {\n        console.log('❌ Listing no existe:', listingId);\n        return { available: false, reason: 'El listado no existe' };\n      }\n\n      const listingData = response.data.listing;\n      console.log('📦 Datos del listing:', listingData);\n      \n      const availableQuantity = listingData.availableQuantity || listingData.quantity || 0;\n      const status = listingData.status || 'active';\n      \n      console.log('📊 Estado:', status, 'Disponible:', availableQuantity, 'Solicitado:', requestedQuantity);\n      \n      if (status === 'inactive') {\n        return { available: false, reason: 'El listado está inactivo' };\n      }\n      \n      if (status === 'sold_out' || availableQuantity === 0) {\n        return { available: false, reason: 'Producto agotado' };\n      }\n      \n      if (availableQuantity < requestedQuantity) {\n        return { \n          available: false, \n          reason: `Solo hay ${availableQuantity} unidad${availableQuantity > 1 ? 'es' : ''} disponible${availableQuantity > 1 ? 's' : ''}`,\n          availableQuantity \n        };\n      }\n      \n      return { \n        available: true, \n        availableQuantity,\n        listing: listingData \n      };\n      \n    } catch (error) {\n      console.error('❌ Error verificando disponibilidad:', error);\n      return { \n        available: false, \n        reason: 'Error verificando disponibilidad' \n      };\n    }\n  };\n\n  // Funciones de cálculo\n  const getTotalItems = () => {\n    return cart.reduce((total, item) => total + (item.quantity || 1), 0);\n  };\n\n  const getTotalPrice = () => {\n    return cart.reduce((total, item) => total + (item.price * (item.quantity || 1)), 0);\n  };\n\n  // Obtener items del carrito agrupados por vendedor\n  const getCartByVendor = () => {\n    const vendors = {};\n    \n    cart.forEach(item => {\n      const vendorId = item.sellerId;\n      if (!vendors[vendorId]) {\n        vendors[vendorId] = {\n          vendorId,\n          vendorName: item.sellerName,\n          items: [],\n          totalAmount: 0\n        };\n      }\n      vendors[vendorId].items.push(item);\n      vendors[vendorId].totalAmount += item.price * (item.quantity || 1);\n    });\n    \n    return vendors;\n  };\n\n  const value = {\n    cart,\n    loading,\n    user,\n    addToCart,\n    removeFromCart,\n    clearCart,\n    updateCartItemQuantity,\n    checkListingAvailability,\n    getTotalItems,\n    getTotalPrice,\n    getCartByVendor\n  };\n\n  return <CartContext.Provider value={value}>{children}</CartContext.Provider>;\n}\n\nexport function useCart() {\n  const context = useContext(CartContext);\n  if (context === undefined) {\n    throw new Error('useCart must be used within a CartProvider');\n  }\n  return context;\n}\n\nexport default CartContext;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}