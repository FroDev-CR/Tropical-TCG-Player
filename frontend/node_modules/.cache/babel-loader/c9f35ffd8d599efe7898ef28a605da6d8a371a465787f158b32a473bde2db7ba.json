{"ast":null,"code":"// src/components/P2PCheckout.js\n// Componente de checkout P2P multi-vendedor\nimport React,{useState,useEffect}from'react';import{Modal,Button,Card,Form,Alert,Spinner,Badge}from'react-bootstrap';import{useP2PTransactions}from'../hooks/useP2PTransactions';import{useCart}from'../contexts/CartContext';import verificationService from'../services/verificationService';// Comentado Firebase - ahora usa backend API\n// import { doc, getDoc } from 'firebase/firestore';\n// import { db } from '../firebase';\nimport backendAPI from'../services/backendAPI';import'./P2PCheckout.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function P2PCheckout(_ref){var _availabilityCheck$er;let{show,onHide,onSuccess}=_ref;const{createP2PTransactions,actionLoading,error,clearError,checkAtomicAvailability,getCartByVendor}=useP2PTransactions();const{cart,getTotalItems,clearCart,user}=useCart();const[vendors,setVendors]=useState([]);const[selectedVendors,setSelectedVendors]=useState(new Set());const[contactMethod,setContactMethod]=useState('whatsapp');const[buyerNotes,setBuyerNotes]=useState('');const[availabilityCheck,setAvailabilityCheck]=useState(null);const[isCheckingAvailability,setIsCheckingAvailability]=useState(false);const[verificationStatus,setVerificationStatus]=useState(null);const[isCheckingVerification,setIsCheckingVerification]=useState(false);// Cargar vendedores cuando se abre el modal\nuseEffect(()=>{if(show&&cart.length>0){const vendorGroups=getCartByVendor();setVendors(vendorGroups);setSelectedVendors(new Set(vendorGroups.map(v=>v.vendorId)));checkAvailability();checkUserVerification();}},[show,cart]);// Verificar estado de verificación del usuario\nconst checkUserVerification=async()=>{setIsCheckingVerification(true);try{// TODO: Implementar verificación con backend API\n// const userResponse = await backendAPI.getProfile();\n// if (userResponse.success) {\n//   const status = userResponse.user.verification;\n//   setVerificationStatus(status);\n// }\n// Por ahora usar verificación de prueba\nsetVerificationStatus({phone:{verified:true},identity:{verified:true},canUseP2P:true});}catch(error){console.error('Error verificando usuario:',error);}setIsCheckingVerification(false);};// Verificar disponibilidad atómica\nconst checkAvailability=async()=>{if(cart.length===0)return;setIsCheckingAvailability(true);try{const result=await checkAtomicAvailability(cart);setAvailabilityCheck(result);}catch(error){console.error('Error verificando disponibilidad:',error);setAvailabilityCheck({available:false,errors:[{item:'general',message:'Error verificando disponibilidad'}]});}finally{setIsCheckingAvailability(false);}};// Manejar selección de vendedor\nconst handleVendorToggle=vendorId=>{const newSelected=new Set(selectedVendors);if(newSelected.has(vendorId)){newSelected.delete(vendorId);}else{newSelected.add(vendorId);}setSelectedVendors(newSelected);};// Obtener vendedores seleccionados\nconst getSelectedVendors=()=>{return vendors.filter(vendor=>selectedVendors.has(vendor.vendorId));};// Calcular totales de vendedores seleccionados\nconst getSelectedTotals=()=>{const selected=getSelectedVendors();return{totalAmount:selected.reduce((sum,vendor)=>sum+vendor.totalAmount,0),shippingCost:selected.reduce((sum,vendor)=>sum+(vendor.hasShipping?600:0),0),totalItems:selected.reduce((sum,vendor)=>sum+vendor.totalItems,0),vendorCount:selected.length};};// Manejar checkout\nconst handleCheckout=async()=>{if(selectedVendors.size===0){alert('Selecciona al menos un vendedor para continuar');return;}// Verificar que el usuario esté verificado para P2P\nif(!verificationStatus||!verificationStatus.phone||!verificationStatus.identity){alert('Para usar el sistema P2P debes verificar tu teléfono y cédula en tu perfil.');return;}clearError();try{const selectedVendorData=getSelectedVendors();const results=await createP2PTransactions(contactMethod,buyerNotes.trim());// Analizar resultados\nconst successful=results.filter(r=>r.success);const failed=results.filter(r=>!r.success);if(successful.length>0&&failed.length===0){// Todas las transacciones exitosas\nonSuccess&&onSuccess({type:'complete',successful,message:`¡Perfecto! Se crearon ${successful.length} transacción${successful.length>1?'es':''} exitosamente.`});}else if(successful.length>0&&failed.length>0){// Algunas exitosas, algunas fallaron\nonSuccess&&onSuccess({type:'partial',successful,failed,message:`${successful.length} transacción${successful.length>1?'es':''} creada${successful.length>1?'s':''}, pero ${failed.length} falló${failed.length>1?'n':''}.`});}else{// Todas fallaron\nthrow new Error('No se pudo crear ninguna transacción. Por favor intenta nuevamente.');}onHide();}catch(error){console.error('Error en checkout:',error);// El error ya está manejado por el hook\n}};const totals=getSelectedTotals();return/*#__PURE__*/_jsxs(Modal,{show:show,onHide:onHide,size:\"lg\",className:\"p2p-checkout-modal\",children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,className:\"border-0 pb-0\",children:/*#__PURE__*/_jsx(Modal.Title,{className:\"text-primary fw-bold\",children:\"\\uD83D\\uDED2 Confirmar Compras P2P\"})}),/*#__PURE__*/_jsxs(Modal.Body,{className:\"px-4\",children:[error&&/*#__PURE__*/_jsxs(Alert,{variant:\"danger\",dismissible:true,onClose:clearError,children:[/*#__PURE__*/_jsx(Alert.Heading,{children:\"Error en el checkout\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:error})]}),isCheckingAvailability&&/*#__PURE__*/_jsxs(Alert,{variant:\"info\",className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(Spinner,{size:\"sm\",className:\"me-2\"}),\"Verificando disponibilidad de productos...\"]}),availabilityCheck&&!availabilityCheck.available&&/*#__PURE__*/_jsxs(Alert,{variant:\"warning\",children:[/*#__PURE__*/_jsx(Alert.Heading,{children:\"\\u26A0\\uFE0F Problemas de Disponibilidad\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"mb-0\",children:(_availabilityCheck$er=availabilityCheck.errors)===null||_availabilityCheck$er===void 0?void 0:_availabilityCheck$er.map((error,index)=>/*#__PURE__*/_jsx(\"li\",{children:error.message},index))}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-end\",children:/*#__PURE__*/_jsx(Button,{variant:\"outline-warning\",size:\"sm\",onClick:checkAvailability,children:\"Verificar Nuevamente\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"vendors-section mb-4\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-3\",children:[\"\\uD83D\\uDCE6 Vendedores (\",vendors.length,\")\"]}),vendors.map(vendor=>/*#__PURE__*/_jsxs(Card,{className:`vendor-card mb-3 ${selectedVendors.has(vendor.vendorId)?'selected':'unselected'}`,children:[/*#__PURE__*/_jsxs(Card.Header,{className:\"d-flex justify-content-between align-items-center p-3\",children:[/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",id:`vendor-${vendor.vendorId}`,checked:selectedVendors.has(vendor.vendorId),onChange:()=>handleVendorToggle(vendor.vendorId),label:/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-header-info\",children:[/*#__PURE__*/_jsx(\"strong\",{children:vendor.vendorName}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-muted small\",children:[\"\\uD83D\\uDCF1 \",vendor.vendorPhone,\" \\u2022 \\u2709\\uFE0F \",vendor.vendorEmail]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-summary text-end\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fw-bold text-primary\",children:[\"\\u20A1\",(vendor.totalAmount+(vendor.hasShipping?600:0)).toLocaleString()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"small text-muted\",children:[vendor.totalItems,\" item\",vendor.totalItems>1?'s':'',vendor.hasShipping&&/*#__PURE__*/_jsx(Badge,{bg:\"info\",className:\"ms-1\",children:\"+Env\\xEDo\"})]})]})]}),selectedVendors.has(vendor.vendorId)&&/*#__PURE__*/_jsxs(Card.Body,{className:\"pt-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"items-list\",children:vendor.items.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"item-row d-flex justify-content-between align-items-center py-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item-info d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"img\",{src:item.cardImage,alt:item.cardName,className:\"item-thumbnail me-3\",onError:e=>e.target.src='/placeholder-card.png'}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"item-name fw-medium\",children:item.cardName}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-details small text-muted\",children:[item.condition,\" \\u2022 \",item.setName]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-pricing text-end\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item-price fw-bold\",children:[\"\\u20A1\",item.price.toLocaleString(),item.quantity>1&&/*#__PURE__*/_jsxs(\"span\",{className:\"quantity-badge ms-2\",children:[\"x\",item.quantity]})]}),item.quantity>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"small text-muted\",children:[\"Total: \\u20A1\",(item.price*item.quantity).toLocaleString()]})]})]},`${item.id}-${index}`))}),/*#__PURE__*/_jsxs(\"div\",{className:\"cost-breakdown mt-3 pt-3 border-top\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Productos:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20A1\",vendor.totalAmount.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Env\\xEDo:\"}),/*#__PURE__*/_jsx(\"span\",{children:vendor.hasShipping?'₡600':/*#__PURE__*/_jsx(Badge,{bg:\"success\",children:\"Gratis\"})})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between fw-bold text-primary\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20A1\",(vendor.totalAmount+(vendor.hasShipping?600:0)).toLocaleString()]})]})]})]})]},vendor.vendorId))]}),/*#__PURE__*/_jsxs(Card,{className:\"checkout-config mb-4\",children:[/*#__PURE__*/_jsx(Card.Header,{className:\"bg-light\",children:/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:\"\\u2699\\uFE0F Configuraci\\xF3n de Compra\"})}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\uD83D\\uDCDE M\\xE9todo de contacto preferido\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"contact-methods\",children:[/*#__PURE__*/_jsx(Form.Check,{type:\"radio\",id:\"contact-whatsapp\",name:\"contactMethod\",value:\"whatsapp\",checked:contactMethod==='whatsapp',onChange:e=>setContactMethod(e.target.value),label:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"me-2\",children:\"\\uD83D\\uDCF1\"}),\"WhatsApp \",/*#__PURE__*/_jsx(Badge,{bg:\"success\",children:\"Recomendado\"})]})}),/*#__PURE__*/_jsx(Form.Check,{type:\"radio\",id:\"contact-email\",name:\"contactMethod\",value:\"email\",checked:contactMethod==='email',onChange:e=>setContactMethod(e.target.value),label:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"me-2\",children:\"\\u2709\\uFE0F\"}),\"Email\"]})}),/*#__PURE__*/_jsx(Form.Check,{type:\"radio\",id:\"contact-phone\",name:\"contactMethod\",value:\"phone\",checked:contactMethod==='phone',onChange:e=>setContactMethod(e.target.value),label:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"me-2\",children:\"\\u260E\\uFE0F\"}),\"Llamada telef\\xF3nica\"]})})]})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\uD83D\\uDCDD Notas adicionales (opcional)\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",rows:3,value:buyerNotes,onChange:e=>setBuyerNotes(e.target.value),placeholder:\"Mensaje para el vendedor, preferencias de entrega, etc...\",maxLength:500}),/*#__PURE__*/_jsxs(Form.Text,{className:\"text-muted\",children:[buyerNotes.length,\"/500 caracteres\"]})]})]})]}),totals.vendorCount>0&&/*#__PURE__*/_jsxs(Card,{className:\"checkout-summary\",children:[/*#__PURE__*/_jsx(Card.Header,{className:\"bg-primary text-white\",children:/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:\"\\uD83D\\uDCB0 Resumen de Compra\"})}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"summary-rows\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Vendedores seleccionados:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"fw-bold\",children:totals.vendorCount})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total de productos:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"fw-bold\",children:totals.totalItems})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Subtotal productos:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20A1\",totals.totalAmount.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Costos de env\\xEDo:\"}),/*#__PURE__*/_jsx(\"span\",{children:totals.shippingCost>0?`₡${totals.shippingCost.toLocaleString()}`:'Gratis'})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between fs-5 fw-bold text-primary\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total a coordinar:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20A1\",(totals.totalAmount+totals.shippingCost).toLocaleString()]})]})]})})]})]}),/*#__PURE__*/_jsxs(Modal.Footer,{className:\"border-0 pt-0\",children:[/*#__PURE__*/_jsx(Button,{variant:\"outline-secondary\",onClick:onHide,disabled:actionLoading,children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleCheckout,disabled:actionLoading||totals.vendorCount===0||availabilityCheck&&!availabilityCheck.available,className:\"px-4\",children:actionLoading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Spinner,{size:\"sm\",className:\"me-2\"}),\"Procesando...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[\"\\uD83D\\uDE80 Confirmar Compra\",totals.vendorCount>1?'s':'',totals.vendorCount>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"ms-2\",children:[\"(\\u20A1\",(totals.totalAmount+totals.shippingCost).toLocaleString(),\")\"]})]})})]})]});}","map":{"version":3,"names":["React","useState","useEffect","Modal","Button","Card","Form","Alert","Spinner","Badge","useP2PTransactions","useCart","verificationService","backendAPI","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","P2PCheckout","_ref","_availabilityCheck$er","show","onHide","onSuccess","createP2PTransactions","actionLoading","error","clearError","checkAtomicAvailability","getCartByVendor","cart","getTotalItems","clearCart","user","vendors","setVendors","selectedVendors","setSelectedVendors","Set","contactMethod","setContactMethod","buyerNotes","setBuyerNotes","availabilityCheck","setAvailabilityCheck","isCheckingAvailability","setIsCheckingAvailability","verificationStatus","setVerificationStatus","isCheckingVerification","setIsCheckingVerification","length","vendorGroups","map","v","vendorId","checkAvailability","checkUserVerification","phone","verified","identity","canUseP2P","console","result","available","errors","item","message","handleVendorToggle","newSelected","has","delete","add","getSelectedVendors","filter","vendor","getSelectedTotals","selected","totalAmount","reduce","sum","shippingCost","hasShipping","totalItems","vendorCount","handleCheckout","size","alert","selectedVendorData","results","trim","successful","r","success","failed","type","Error","totals","className","children","Header","closeButton","Title","Body","variant","dismissible","onClose","Heading","index","onClick","Check","id","checked","onChange","label","vendorName","vendorPhone","vendorEmail","toLocaleString","bg","items","src","cardImage","alt","cardName","onError","e","target","condition","setName","price","quantity","Group","Label","name","value","Control","as","rows","placeholder","maxLength","Text","Footer","disabled"],"sources":["/home/frodev/Downloads/FroDev-CR-TropicalTCGPlayers/src/components/P2PCheckout.js"],"sourcesContent":["// src/components/P2PCheckout.js\n// Componente de checkout P2P multi-vendedor\n\nimport React, { useState, useEffect } from 'react';\nimport { Modal, Button, Card, Form, Alert, Spinner, Badge } from 'react-bootstrap';\nimport { useP2PTransactions } from '../hooks/useP2PTransactions';\nimport { useCart } from '../contexts/CartContext';\nimport verificationService from '../services/verificationService';\n// Comentado Firebase - ahora usa backend API\n// import { doc, getDoc } from 'firebase/firestore';\n// import { db } from '../firebase';\nimport backendAPI from '../services/backendAPI';\nimport './P2PCheckout.css';\n\nexport default function P2PCheckout({ show, onHide, onSuccess }) {\n  const {\n    createP2PTransactions,\n    actionLoading,\n    error,\n    clearError,\n    checkAtomicAvailability,\n    getCartByVendor\n  } = useP2PTransactions();\n\n  const { cart, getTotalItems, clearCart, user } = useCart();\n\n  const [vendors, setVendors] = useState([]);\n  const [selectedVendors, setSelectedVendors] = useState(new Set());\n  const [contactMethod, setContactMethod] = useState('whatsapp');\n  const [buyerNotes, setBuyerNotes] = useState('');\n  const [availabilityCheck, setAvailabilityCheck] = useState(null);\n  const [isCheckingAvailability, setIsCheckingAvailability] = useState(false);\n  const [verificationStatus, setVerificationStatus] = useState(null);\n  const [isCheckingVerification, setIsCheckingVerification] = useState(false);\n\n  // Cargar vendedores cuando se abre el modal\n  useEffect(() => {\n    if (show && cart.length > 0) {\n      const vendorGroups = getCartByVendor();\n      setVendors(vendorGroups);\n      setSelectedVendors(new Set(vendorGroups.map(v => v.vendorId)));\n      checkAvailability();\n      checkUserVerification();\n    }\n  }, [show, cart]);\n\n  // Verificar estado de verificación del usuario\n  const checkUserVerification = async () => {\n    setIsCheckingVerification(true);\n    try {\n      // TODO: Implementar verificación con backend API\n      // const userResponse = await backendAPI.getProfile();\n      // if (userResponse.success) {\n      //   const status = userResponse.user.verification;\n      //   setVerificationStatus(status);\n      // }\n      \n      // Por ahora usar verificación de prueba\n      setVerificationStatus({\n        phone: { verified: true },\n        identity: { verified: true },\n        canUseP2P: true\n      });\n    } catch (error) {\n      console.error('Error verificando usuario:', error);\n    }\n    setIsCheckingVerification(false);\n  };\n\n  // Verificar disponibilidad atómica\n  const checkAvailability = async () => {\n    if (cart.length === 0) return;\n\n    setIsCheckingAvailability(true);\n    try {\n      const result = await checkAtomicAvailability(cart);\n      setAvailabilityCheck(result);\n    } catch (error) {\n      console.error('Error verificando disponibilidad:', error);\n      setAvailabilityCheck({ \n        available: false, \n        errors: [{ item: 'general', message: 'Error verificando disponibilidad' }]\n      });\n    } finally {\n      setIsCheckingAvailability(false);\n    }\n  };\n\n  // Manejar selección de vendedor\n  const handleVendorToggle = (vendorId) => {\n    const newSelected = new Set(selectedVendors);\n    if (newSelected.has(vendorId)) {\n      newSelected.delete(vendorId);\n    } else {\n      newSelected.add(vendorId);\n    }\n    setSelectedVendors(newSelected);\n  };\n\n  // Obtener vendedores seleccionados\n  const getSelectedVendors = () => {\n    return vendors.filter(vendor => selectedVendors.has(vendor.vendorId));\n  };\n\n  // Calcular totales de vendedores seleccionados\n  const getSelectedTotals = () => {\n    const selected = getSelectedVendors();\n    return {\n      totalAmount: selected.reduce((sum, vendor) => sum + vendor.totalAmount, 0),\n      shippingCost: selected.reduce((sum, vendor) => sum + (vendor.hasShipping ? 600 : 0), 0),\n      totalItems: selected.reduce((sum, vendor) => sum + vendor.totalItems, 0),\n      vendorCount: selected.length\n    };\n  };\n\n  // Manejar checkout\n  const handleCheckout = async () => {\n    if (selectedVendors.size === 0) {\n      alert('Selecciona al menos un vendedor para continuar');\n      return;\n    }\n\n    // Verificar que el usuario esté verificado para P2P\n    if (!verificationStatus || (!verificationStatus.phone || !verificationStatus.identity)) {\n      alert('Para usar el sistema P2P debes verificar tu teléfono y cédula en tu perfil.');\n      return;\n    }\n\n    clearError();\n\n    try {\n      const selectedVendorData = getSelectedVendors();\n      const results = await createP2PTransactions(contactMethod, buyerNotes.trim());\n\n      // Analizar resultados\n      const successful = results.filter(r => r.success);\n      const failed = results.filter(r => !r.success);\n\n      if (successful.length > 0 && failed.length === 0) {\n        // Todas las transacciones exitosas\n        onSuccess && onSuccess({\n          type: 'complete',\n          successful,\n          message: `¡Perfecto! Se crearon ${successful.length} transacción${successful.length > 1 ? 'es' : ''} exitosamente.`\n        });\n      } else if (successful.length > 0 && failed.length > 0) {\n        // Algunas exitosas, algunas fallaron\n        onSuccess && onSuccess({\n          type: 'partial',\n          successful,\n          failed,\n          message: `${successful.length} transacción${successful.length > 1 ? 'es' : ''} creada${successful.length > 1 ? 's' : ''}, pero ${failed.length} falló${failed.length > 1 ? 'n' : ''}.`\n        });\n      } else {\n        // Todas fallaron\n        throw new Error('No se pudo crear ninguna transacción. Por favor intenta nuevamente.');\n      }\n\n      onHide();\n    } catch (error) {\n      console.error('Error en checkout:', error);\n      // El error ya está manejado por el hook\n    }\n  };\n\n  const totals = getSelectedTotals();\n\n  return (\n    <Modal show={show} onHide={onHide} size=\"lg\" className=\"p2p-checkout-modal\">\n      <Modal.Header closeButton className=\"border-0 pb-0\">\n        <Modal.Title className=\"text-primary fw-bold\">\n          🛒 Confirmar Compras P2P\n        </Modal.Title>\n      </Modal.Header>\n\n      <Modal.Body className=\"px-4\">\n        {/* Error Alert */}\n        {error && (\n          <Alert variant=\"danger\" dismissible onClose={clearError}>\n            <Alert.Heading>Error en el checkout</Alert.Heading>\n            <p className=\"mb-0\">{error}</p>\n          </Alert>\n        )}\n\n        {/* Verificación de Disponibilidad */}\n        {isCheckingAvailability && (\n          <Alert variant=\"info\" className=\"d-flex align-items-center\">\n            <Spinner size=\"sm\" className=\"me-2\" />\n            Verificando disponibilidad de productos...\n          </Alert>\n        )}\n\n        {availabilityCheck && !availabilityCheck.available && (\n          <Alert variant=\"warning\">\n            <Alert.Heading>⚠️ Problemas de Disponibilidad</Alert.Heading>\n            <ul className=\"mb-0\">\n              {availabilityCheck.errors?.map((error, index) => (\n                <li key={index}>{error.message}</li>\n              ))}\n            </ul>\n            <hr />\n            <div className=\"d-flex justify-content-end\">\n              <Button variant=\"outline-warning\" size=\"sm\" onClick={checkAvailability}>\n                Verificar Nuevamente\n              </Button>\n            </div>\n          </Alert>\n        )}\n\n        {/* Lista de Vendedores */}\n        <div className=\"vendors-section mb-4\">\n          <h5 className=\"mb-3\">📦 Vendedores ({vendors.length})</h5>\n          \n          {vendors.map((vendor) => (\n            <Card \n              key={vendor.vendorId} \n              className={`vendor-card mb-3 ${selectedVendors.has(vendor.vendorId) ? 'selected' : 'unselected'}`}\n            >\n              <Card.Header className=\"d-flex justify-content-between align-items-center p-3\">\n                <Form.Check\n                  type=\"checkbox\"\n                  id={`vendor-${vendor.vendorId}`}\n                  checked={selectedVendors.has(vendor.vendorId)}\n                  onChange={() => handleVendorToggle(vendor.vendorId)}\n                  label={\n                    <div className=\"vendor-header-info\">\n                      <strong>{vendor.vendorName}</strong>\n                      <div className=\"text-muted small\">\n                        📱 {vendor.vendorPhone} • ✉️ {vendor.vendorEmail}\n                      </div>\n                    </div>\n                  }\n                />\n                <div className=\"vendor-summary text-end\">\n                  <div className=\"fw-bold text-primary\">\n                    ₡{(vendor.totalAmount + (vendor.hasShipping ? 600 : 0)).toLocaleString()}\n                  </div>\n                  <div className=\"small text-muted\">\n                    {vendor.totalItems} item{vendor.totalItems > 1 ? 's' : ''}\n                    {vendor.hasShipping && (\n                      <Badge bg=\"info\" className=\"ms-1\">+Envío</Badge>\n                    )}\n                  </div>\n                </div>\n              </Card.Header>\n\n              {selectedVendors.has(vendor.vendorId) && (\n                <Card.Body className=\"pt-0\">\n                  <div className=\"items-list\">\n                    {vendor.items.map((item, index) => (\n                      <div key={`${item.id}-${index}`} className=\"item-row d-flex justify-content-between align-items-center py-2\">\n                        <div className=\"item-info d-flex align-items-center\">\n                          <img \n                            src={item.cardImage} \n                            alt={item.cardName}\n                            className=\"item-thumbnail me-3\"\n                            onError={(e) => e.target.src = '/placeholder-card.png'}\n                          />\n                          <div>\n                            <div className=\"item-name fw-medium\">{item.cardName}</div>\n                            <div className=\"item-details small text-muted\">\n                              {item.condition} • {item.setName}\n                            </div>\n                          </div>\n                        </div>\n                        <div className=\"item-pricing text-end\">\n                          <div className=\"item-price fw-bold\">\n                            ₡{item.price.toLocaleString()}\n                            {item.quantity > 1 && (\n                              <span className=\"quantity-badge ms-2\">x{item.quantity}</span>\n                            )}\n                          </div>\n                          {item.quantity > 1 && (\n                            <div className=\"small text-muted\">\n                              Total: ₡{(item.price * item.quantity).toLocaleString()}\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n\n                  {/* Desglose de Costos */}\n                  <div className=\"cost-breakdown mt-3 pt-3 border-top\">\n                    <div className=\"d-flex justify-content-between\">\n                      <span>Productos:</span>\n                      <span>₡{vendor.totalAmount.toLocaleString()}</span>\n                    </div>\n                    <div className=\"d-flex justify-content-between\">\n                      <span>Envío:</span>\n                      <span>\n                        {vendor.hasShipping ? '₡600' : (\n                          <Badge bg=\"success\">Gratis</Badge>\n                        )}\n                      </span>\n                    </div>\n                    <hr className=\"my-2\" />\n                    <div className=\"d-flex justify-content-between fw-bold text-primary\">\n                      <span>Total:</span>\n                      <span>₡{(vendor.totalAmount + (vendor.hasShipping ? 600 : 0)).toLocaleString()}</span>\n                    </div>\n                  </div>\n                </Card.Body>\n              )}\n            </Card>\n          ))}\n        </div>\n\n        {/* Configuración de Compra */}\n        <Card className=\"checkout-config mb-4\">\n          <Card.Header className=\"bg-light\">\n            <h6 className=\"mb-0\">⚙️ Configuración de Compra</h6>\n          </Card.Header>\n          <Card.Body>\n            {/* Método de Contacto */}\n            <Form.Group className=\"mb-3\">\n              <Form.Label>📞 Método de contacto preferido</Form.Label>\n              <div className=\"contact-methods\">\n                <Form.Check\n                  type=\"radio\"\n                  id=\"contact-whatsapp\"\n                  name=\"contactMethod\"\n                  value=\"whatsapp\"\n                  checked={contactMethod === 'whatsapp'}\n                  onChange={(e) => setContactMethod(e.target.value)}\n                  label={\n                    <span>\n                      <span className=\"me-2\">📱</span>\n                      WhatsApp <Badge bg=\"success\">Recomendado</Badge>\n                    </span>\n                  }\n                />\n                <Form.Check\n                  type=\"radio\"\n                  id=\"contact-email\"\n                  name=\"contactMethod\"\n                  value=\"email\"\n                  checked={contactMethod === 'email'}\n                  onChange={(e) => setContactMethod(e.target.value)}\n                  label={\n                    <span>\n                      <span className=\"me-2\">✉️</span>\n                      Email\n                    </span>\n                  }\n                />\n                <Form.Check\n                  type=\"radio\"\n                  id=\"contact-phone\"\n                  name=\"contactMethod\"\n                  value=\"phone\"\n                  checked={contactMethod === 'phone'}\n                  onChange={(e) => setContactMethod(e.target.value)}\n                  label={\n                    <span>\n                      <span className=\"me-2\">☎️</span>\n                      Llamada telefónica\n                    </span>\n                  }\n                />\n              </div>\n            </Form.Group>\n\n            {/* Notas del Comprador */}\n            <Form.Group>\n              <Form.Label>📝 Notas adicionales (opcional)</Form.Label>\n              <Form.Control\n                as=\"textarea\"\n                rows={3}\n                value={buyerNotes}\n                onChange={(e) => setBuyerNotes(e.target.value)}\n                placeholder=\"Mensaje para el vendedor, preferencias de entrega, etc...\"\n                maxLength={500}\n              />\n              <Form.Text className=\"text-muted\">\n                {buyerNotes.length}/500 caracteres\n              </Form.Text>\n            </Form.Group>\n          </Card.Body>\n        </Card>\n\n        {/* Resumen Final */}\n        {totals.vendorCount > 0 && (\n          <Card className=\"checkout-summary\">\n            <Card.Header className=\"bg-primary text-white\">\n              <h6 className=\"mb-0\">💰 Resumen de Compra</h6>\n            </Card.Header>\n            <Card.Body>\n              <div className=\"summary-rows\">\n                <div className=\"d-flex justify-content-between\">\n                  <span>Vendedores seleccionados:</span>\n                  <span className=\"fw-bold\">{totals.vendorCount}</span>\n                </div>\n                <div className=\"d-flex justify-content-between\">\n                  <span>Total de productos:</span>\n                  <span className=\"fw-bold\">{totals.totalItems}</span>\n                </div>\n                <div className=\"d-flex justify-content-between\">\n                  <span>Subtotal productos:</span>\n                  <span>₡{totals.totalAmount.toLocaleString()}</span>\n                </div>\n                <div className=\"d-flex justify-content-between\">\n                  <span>Costos de envío:</span>\n                  <span>\n                    {totals.shippingCost > 0 ? `₡${totals.shippingCost.toLocaleString()}` : 'Gratis'}\n                  </span>\n                </div>\n                <hr />\n                <div className=\"d-flex justify-content-between fs-5 fw-bold text-primary\">\n                  <span>Total a coordinar:</span>\n                  <span>₡{(totals.totalAmount + totals.shippingCost).toLocaleString()}</span>\n                </div>\n              </div>\n            </Card.Body>\n          </Card>\n        )}\n      </Modal.Body>\n\n      <Modal.Footer className=\"border-0 pt-0\">\n        <Button variant=\"outline-secondary\" onClick={onHide} disabled={actionLoading}>\n          Cancelar\n        </Button>\n        <Button \n          variant=\"primary\" \n          onClick={handleCheckout}\n          disabled={actionLoading || totals.vendorCount === 0 || (availabilityCheck && !availabilityCheck.available)}\n          className=\"px-4\"\n        >\n          {actionLoading ? (\n            <>\n              <Spinner size=\"sm\" className=\"me-2\" />\n              Procesando...\n            </>\n          ) : (\n            <>\n              🚀 Confirmar Compra{totals.vendorCount > 1 ? 's' : ''}\n              {totals.vendorCount > 0 && (\n                <span className=\"ms-2\">\n                  (₡{(totals.totalAmount + totals.shippingCost).toLocaleString()})\n                </span>\n              )}\n            </>\n          )}\n        </Button>\n      </Modal.Footer>\n    </Modal>\n  );\n}"],"mappings":"AAAA;AACA;AAEA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,KAAK,CAAEC,MAAM,CAAEC,IAAI,CAAEC,IAAI,CAAEC,KAAK,CAAEC,OAAO,CAAEC,KAAK,KAAQ,iBAAiB,CAClF,OAASC,kBAAkB,KAAQ,6BAA6B,CAChE,OAASC,OAAO,KAAQ,yBAAyB,CACjD,MAAO,CAAAC,mBAAmB,KAAM,iCAAiC,CACjE;AACA;AACA;AACA,MAAO,CAAAC,UAAU,KAAM,wBAAwB,CAC/C,MAAO,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAE3B,cAAe,SAAS,CAAAC,WAAWA,CAAAC,IAAA,CAA8B,KAAAC,qBAAA,IAA7B,CAAEC,IAAI,CAAEC,MAAM,CAAEC,SAAU,CAAC,CAAAJ,IAAA,CAC7D,KAAM,CACJK,qBAAqB,CACrBC,aAAa,CACbC,KAAK,CACLC,UAAU,CACVC,uBAAuB,CACvBC,eACF,CAAC,CAAGrB,kBAAkB,CAAC,CAAC,CAExB,KAAM,CAAEsB,IAAI,CAAEC,aAAa,CAAEC,SAAS,CAAEC,IAAK,CAAC,CAAGxB,OAAO,CAAC,CAAC,CAE1D,KAAM,CAACyB,OAAO,CAAEC,UAAU,CAAC,CAAGpC,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACqC,eAAe,CAAEC,kBAAkB,CAAC,CAAGtC,QAAQ,CAAC,GAAI,CAAAuC,GAAG,CAAC,CAAC,CAAC,CACjE,KAAM,CAACC,aAAa,CAAEC,gBAAgB,CAAC,CAAGzC,QAAQ,CAAC,UAAU,CAAC,CAC9D,KAAM,CAAC0C,UAAU,CAAEC,aAAa,CAAC,CAAG3C,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAAC4C,iBAAiB,CAAEC,oBAAoB,CAAC,CAAG7C,QAAQ,CAAC,IAAI,CAAC,CAChE,KAAM,CAAC8C,sBAAsB,CAAEC,yBAAyB,CAAC,CAAG/C,QAAQ,CAAC,KAAK,CAAC,CAC3E,KAAM,CAACgD,kBAAkB,CAAEC,qBAAqB,CAAC,CAAGjD,QAAQ,CAAC,IAAI,CAAC,CAClE,KAAM,CAACkD,sBAAsB,CAAEC,yBAAyB,CAAC,CAAGnD,QAAQ,CAAC,KAAK,CAAC,CAE3E;AACAC,SAAS,CAAC,IAAM,CACd,GAAIqB,IAAI,EAAIS,IAAI,CAACqB,MAAM,CAAG,CAAC,CAAE,CAC3B,KAAM,CAAAC,YAAY,CAAGvB,eAAe,CAAC,CAAC,CACtCM,UAAU,CAACiB,YAAY,CAAC,CACxBf,kBAAkB,CAAC,GAAI,CAAAC,GAAG,CAACc,YAAY,CAACC,GAAG,CAACC,CAAC,EAAIA,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAC,CAC9DC,iBAAiB,CAAC,CAAC,CACnBC,qBAAqB,CAAC,CAAC,CACzB,CACF,CAAC,CAAE,CAACpC,IAAI,CAAES,IAAI,CAAC,CAAC,CAEhB;AACA,KAAM,CAAA2B,qBAAqB,CAAG,KAAAA,CAAA,GAAY,CACxCP,yBAAyB,CAAC,IAAI,CAAC,CAC/B,GAAI,CACF;AACA;AACA;AACA;AACA;AACA;AAEA;AACAF,qBAAqB,CAAC,CACpBU,KAAK,CAAE,CAAEC,QAAQ,CAAE,IAAK,CAAC,CACzBC,QAAQ,CAAE,CAAED,QAAQ,CAAE,IAAK,CAAC,CAC5BE,SAAS,CAAE,IACb,CAAC,CAAC,CACJ,CAAE,MAAOnC,KAAK,CAAE,CACdoC,OAAO,CAACpC,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAAC,CACpD,CACAwB,yBAAyB,CAAC,KAAK,CAAC,CAClC,CAAC,CAED;AACA,KAAM,CAAAM,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpC,GAAI1B,IAAI,CAACqB,MAAM,GAAK,CAAC,CAAE,OAEvBL,yBAAyB,CAAC,IAAI,CAAC,CAC/B,GAAI,CACF,KAAM,CAAAiB,MAAM,CAAG,KAAM,CAAAnC,uBAAuB,CAACE,IAAI,CAAC,CAClDc,oBAAoB,CAACmB,MAAM,CAAC,CAC9B,CAAE,MAAOrC,KAAK,CAAE,CACdoC,OAAO,CAACpC,KAAK,CAAC,mCAAmC,CAAEA,KAAK,CAAC,CACzDkB,oBAAoB,CAAC,CACnBoB,SAAS,CAAE,KAAK,CAChBC,MAAM,CAAE,CAAC,CAAEC,IAAI,CAAE,SAAS,CAAEC,OAAO,CAAE,kCAAmC,CAAC,CAC3E,CAAC,CAAC,CACJ,CAAC,OAAS,CACRrB,yBAAyB,CAAC,KAAK,CAAC,CAClC,CACF,CAAC,CAED;AACA,KAAM,CAAAsB,kBAAkB,CAAIb,QAAQ,EAAK,CACvC,KAAM,CAAAc,WAAW,CAAG,GAAI,CAAA/B,GAAG,CAACF,eAAe,CAAC,CAC5C,GAAIiC,WAAW,CAACC,GAAG,CAACf,QAAQ,CAAC,CAAE,CAC7Bc,WAAW,CAACE,MAAM,CAAChB,QAAQ,CAAC,CAC9B,CAAC,IAAM,CACLc,WAAW,CAACG,GAAG,CAACjB,QAAQ,CAAC,CAC3B,CACAlB,kBAAkB,CAACgC,WAAW,CAAC,CACjC,CAAC,CAED;AACA,KAAM,CAAAI,kBAAkB,CAAGA,CAAA,GAAM,CAC/B,MAAO,CAAAvC,OAAO,CAACwC,MAAM,CAACC,MAAM,EAAIvC,eAAe,CAACkC,GAAG,CAACK,MAAM,CAACpB,QAAQ,CAAC,CAAC,CACvE,CAAC,CAED;AACA,KAAM,CAAAqB,iBAAiB,CAAGA,CAAA,GAAM,CAC9B,KAAM,CAAAC,QAAQ,CAAGJ,kBAAkB,CAAC,CAAC,CACrC,MAAO,CACLK,WAAW,CAAED,QAAQ,CAACE,MAAM,CAAC,CAACC,GAAG,CAAEL,MAAM,GAAKK,GAAG,CAAGL,MAAM,CAACG,WAAW,CAAE,CAAC,CAAC,CAC1EG,YAAY,CAAEJ,QAAQ,CAACE,MAAM,CAAC,CAACC,GAAG,CAAEL,MAAM,GAAKK,GAAG,EAAIL,MAAM,CAACO,WAAW,CAAG,GAAG,CAAG,CAAC,CAAC,CAAE,CAAC,CAAC,CACvFC,UAAU,CAAEN,QAAQ,CAACE,MAAM,CAAC,CAACC,GAAG,CAAEL,MAAM,GAAKK,GAAG,CAAGL,MAAM,CAACQ,UAAU,CAAE,CAAC,CAAC,CACxEC,WAAW,CAAEP,QAAQ,CAAC1B,MACxB,CAAC,CACH,CAAC,CAED;AACA,KAAM,CAAAkC,cAAc,CAAG,KAAAA,CAAA,GAAY,CACjC,GAAIjD,eAAe,CAACkD,IAAI,GAAK,CAAC,CAAE,CAC9BC,KAAK,CAAC,gDAAgD,CAAC,CACvD,OACF,CAEA;AACA,GAAI,CAACxC,kBAAkB,EAAK,CAACA,kBAAkB,CAACW,KAAK,EAAI,CAACX,kBAAkB,CAACa,QAAS,CAAE,CACtF2B,KAAK,CAAC,6EAA6E,CAAC,CACpF,OACF,CAEA5D,UAAU,CAAC,CAAC,CAEZ,GAAI,CACF,KAAM,CAAA6D,kBAAkB,CAAGf,kBAAkB,CAAC,CAAC,CAC/C,KAAM,CAAAgB,OAAO,CAAG,KAAM,CAAAjE,qBAAqB,CAACe,aAAa,CAAEE,UAAU,CAACiD,IAAI,CAAC,CAAC,CAAC,CAE7E;AACA,KAAM,CAAAC,UAAU,CAAGF,OAAO,CAACf,MAAM,CAACkB,CAAC,EAAIA,CAAC,CAACC,OAAO,CAAC,CACjD,KAAM,CAAAC,MAAM,CAAGL,OAAO,CAACf,MAAM,CAACkB,CAAC,EAAI,CAACA,CAAC,CAACC,OAAO,CAAC,CAE9C,GAAIF,UAAU,CAACxC,MAAM,CAAG,CAAC,EAAI2C,MAAM,CAAC3C,MAAM,GAAK,CAAC,CAAE,CAChD;AACA5B,SAAS,EAAIA,SAAS,CAAC,CACrBwE,IAAI,CAAE,UAAU,CAChBJ,UAAU,CACVxB,OAAO,CAAE,yBAAyBwB,UAAU,CAACxC,MAAM,eAAewC,UAAU,CAACxC,MAAM,CAAG,CAAC,CAAG,IAAI,CAAG,EAAE,gBACrG,CAAC,CAAC,CACJ,CAAC,IAAM,IAAIwC,UAAU,CAACxC,MAAM,CAAG,CAAC,EAAI2C,MAAM,CAAC3C,MAAM,CAAG,CAAC,CAAE,CACrD;AACA5B,SAAS,EAAIA,SAAS,CAAC,CACrBwE,IAAI,CAAE,SAAS,CACfJ,UAAU,CACVG,MAAM,CACN3B,OAAO,CAAE,GAAGwB,UAAU,CAACxC,MAAM,eAAewC,UAAU,CAACxC,MAAM,CAAG,CAAC,CAAG,IAAI,CAAG,EAAE,UAAUwC,UAAU,CAACxC,MAAM,CAAG,CAAC,CAAG,GAAG,CAAG,EAAE,UAAU2C,MAAM,CAAC3C,MAAM,SAAS2C,MAAM,CAAC3C,MAAM,CAAG,CAAC,CAAG,GAAG,CAAG,EAAE,GACrL,CAAC,CAAC,CACJ,CAAC,IAAM,CACL;AACA,KAAM,IAAI,CAAA6C,KAAK,CAAC,qEAAqE,CAAC,CACxF,CAEA1E,MAAM,CAAC,CAAC,CACV,CAAE,MAAOI,KAAK,CAAE,CACdoC,OAAO,CAACpC,KAAK,CAAC,oBAAoB,CAAEA,KAAK,CAAC,CAC1C;AACF,CACF,CAAC,CAED,KAAM,CAAAuE,MAAM,CAAGrB,iBAAiB,CAAC,CAAC,CAElC,mBACE7D,KAAA,CAACd,KAAK,EAACoB,IAAI,CAAEA,IAAK,CAACC,MAAM,CAAEA,MAAO,CAACgE,IAAI,CAAC,IAAI,CAACY,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACzEtF,IAAA,CAACZ,KAAK,CAACmG,MAAM,EAACC,WAAW,MAACH,SAAS,CAAC,eAAe,CAAAC,QAAA,cACjDtF,IAAA,CAACZ,KAAK,CAACqG,KAAK,EAACJ,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAAC,oCAE9C,CAAa,CAAC,CACF,CAAC,cAEfpF,KAAA,CAACd,KAAK,CAACsG,IAAI,EAACL,SAAS,CAAC,MAAM,CAAAC,QAAA,EAEzBzE,KAAK,eACJX,KAAA,CAACV,KAAK,EAACmG,OAAO,CAAC,QAAQ,CAACC,WAAW,MAACC,OAAO,CAAE/E,UAAW,CAAAwE,QAAA,eACtDtF,IAAA,CAACR,KAAK,CAACsG,OAAO,EAAAR,QAAA,CAAC,sBAAoB,CAAe,CAAC,cACnDtF,IAAA,MAAGqF,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAEzE,KAAK,CAAI,CAAC,EAC1B,CACR,CAGAmB,sBAAsB,eACrB9B,KAAA,CAACV,KAAK,EAACmG,OAAO,CAAC,MAAM,CAACN,SAAS,CAAC,2BAA2B,CAAAC,QAAA,eACzDtF,IAAA,CAACP,OAAO,EAACgF,IAAI,CAAC,IAAI,CAACY,SAAS,CAAC,MAAM,CAAE,CAAC,6CAExC,EAAO,CACR,CAEAvD,iBAAiB,EAAI,CAACA,iBAAiB,CAACqB,SAAS,eAChDjD,KAAA,CAACV,KAAK,EAACmG,OAAO,CAAC,SAAS,CAAAL,QAAA,eACtBtF,IAAA,CAACR,KAAK,CAACsG,OAAO,EAAAR,QAAA,CAAC,0CAA8B,CAAe,CAAC,cAC7DtF,IAAA,OAAIqF,SAAS,CAAC,MAAM,CAAAC,QAAA,EAAA/E,qBAAA,CACjBuB,iBAAiB,CAACsB,MAAM,UAAA7C,qBAAA,iBAAxBA,qBAAA,CAA0BiC,GAAG,CAAC,CAAC3B,KAAK,CAAEkF,KAAK,gBAC1C/F,IAAA,OAAAsF,QAAA,CAAiBzE,KAAK,CAACyC,OAAO,EAArByC,KAA0B,CACpC,CAAC,CACA,CAAC,cACL/F,IAAA,QAAK,CAAC,cACNA,IAAA,QAAKqF,SAAS,CAAC,4BAA4B,CAAAC,QAAA,cACzCtF,IAAA,CAACX,MAAM,EAACsG,OAAO,CAAC,iBAAiB,CAAClB,IAAI,CAAC,IAAI,CAACuB,OAAO,CAAErD,iBAAkB,CAAA2C,QAAA,CAAC,sBAExE,CAAQ,CAAC,CACN,CAAC,EACD,CACR,cAGDpF,KAAA,QAAKmF,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnCpF,KAAA,OAAImF,SAAS,CAAC,MAAM,CAAAC,QAAA,EAAC,2BAAe,CAACjE,OAAO,CAACiB,MAAM,CAAC,GAAC,EAAI,CAAC,CAEzDjB,OAAO,CAACmB,GAAG,CAAEsB,MAAM,eAClB5D,KAAA,CAACZ,IAAI,EAEH+F,SAAS,CAAE,oBAAoB9D,eAAe,CAACkC,GAAG,CAACK,MAAM,CAACpB,QAAQ,CAAC,CAAG,UAAU,CAAG,YAAY,EAAG,CAAA4C,QAAA,eAElGpF,KAAA,CAACZ,IAAI,CAACiG,MAAM,EAACF,SAAS,CAAC,uDAAuD,CAAAC,QAAA,eAC5EtF,IAAA,CAACT,IAAI,CAAC0G,KAAK,EACTf,IAAI,CAAC,UAAU,CACfgB,EAAE,CAAE,UAAUpC,MAAM,CAACpB,QAAQ,EAAG,CAChCyD,OAAO,CAAE5E,eAAe,CAACkC,GAAG,CAACK,MAAM,CAACpB,QAAQ,CAAE,CAC9C0D,QAAQ,CAAEA,CAAA,GAAM7C,kBAAkB,CAACO,MAAM,CAACpB,QAAQ,CAAE,CACpD2D,KAAK,cACHnG,KAAA,QAAKmF,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjCtF,IAAA,WAAAsF,QAAA,CAASxB,MAAM,CAACwC,UAAU,CAAS,CAAC,cACpCpG,KAAA,QAAKmF,SAAS,CAAC,kBAAkB,CAAAC,QAAA,EAAC,eAC7B,CAACxB,MAAM,CAACyC,WAAW,CAAC,uBAAM,CAACzC,MAAM,CAAC0C,WAAW,EAC7C,CAAC,EACH,CACN,CACF,CAAC,cACFtG,KAAA,QAAKmF,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eACtCpF,KAAA,QAAKmF,SAAS,CAAC,sBAAsB,CAAAC,QAAA,EAAC,QACnC,CAAC,CAACxB,MAAM,CAACG,WAAW,EAAIH,MAAM,CAACO,WAAW,CAAG,GAAG,CAAG,CAAC,CAAC,EAAEoC,cAAc,CAAC,CAAC,EACrE,CAAC,cACNvG,KAAA,QAAKmF,SAAS,CAAC,kBAAkB,CAAAC,QAAA,EAC9BxB,MAAM,CAACQ,UAAU,CAAC,OAAK,CAACR,MAAM,CAACQ,UAAU,CAAG,CAAC,CAAG,GAAG,CAAG,EAAE,CACxDR,MAAM,CAACO,WAAW,eACjBrE,IAAA,CAACN,KAAK,EAACgH,EAAE,CAAC,MAAM,CAACrB,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAC,WAAM,CAAO,CAChD,EACE,CAAC,EACH,CAAC,EACK,CAAC,CAEb/D,eAAe,CAACkC,GAAG,CAACK,MAAM,CAACpB,QAAQ,CAAC,eACnCxC,KAAA,CAACZ,IAAI,CAACoG,IAAI,EAACL,SAAS,CAAC,MAAM,CAAAC,QAAA,eACzBtF,IAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAC,QAAA,CACxBxB,MAAM,CAAC6C,KAAK,CAACnE,GAAG,CAAC,CAACa,IAAI,CAAE0C,KAAK,gBAC5B7F,KAAA,QAAiCmF,SAAS,CAAC,iEAAiE,CAAAC,QAAA,eAC1GpF,KAAA,QAAKmF,SAAS,CAAC,qCAAqC,CAAAC,QAAA,eAClDtF,IAAA,QACE4G,GAAG,CAAEvD,IAAI,CAACwD,SAAU,CACpBC,GAAG,CAAEzD,IAAI,CAAC0D,QAAS,CACnB1B,SAAS,CAAC,qBAAqB,CAC/B2B,OAAO,CAAGC,CAAC,EAAKA,CAAC,CAACC,MAAM,CAACN,GAAG,CAAG,uBAAwB,CACxD,CAAC,cACF1G,KAAA,QAAAoF,QAAA,eACEtF,IAAA,QAAKqF,SAAS,CAAC,qBAAqB,CAAAC,QAAA,CAAEjC,IAAI,CAAC0D,QAAQ,CAAM,CAAC,cAC1D7G,KAAA,QAAKmF,SAAS,CAAC,+BAA+B,CAAAC,QAAA,EAC3CjC,IAAI,CAAC8D,SAAS,CAAC,UAAG,CAAC9D,IAAI,CAAC+D,OAAO,EAC7B,CAAC,EACH,CAAC,EACH,CAAC,cACNlH,KAAA,QAAKmF,SAAS,CAAC,uBAAuB,CAAAC,QAAA,eACpCpF,KAAA,QAAKmF,SAAS,CAAC,oBAAoB,CAAAC,QAAA,EAAC,QACjC,CAACjC,IAAI,CAACgE,KAAK,CAACZ,cAAc,CAAC,CAAC,CAC5BpD,IAAI,CAACiE,QAAQ,CAAG,CAAC,eAChBpH,KAAA,SAAMmF,SAAS,CAAC,qBAAqB,CAAAC,QAAA,EAAC,GAAC,CAACjC,IAAI,CAACiE,QAAQ,EAAO,CAC7D,EACE,CAAC,CACLjE,IAAI,CAACiE,QAAQ,CAAG,CAAC,eAChBpH,KAAA,QAAKmF,SAAS,CAAC,kBAAkB,CAAAC,QAAA,EAAC,eACxB,CAAC,CAACjC,IAAI,CAACgE,KAAK,CAAGhE,IAAI,CAACiE,QAAQ,EAAEb,cAAc,CAAC,CAAC,EACnD,CACN,EACE,CAAC,GA3BE,GAAGpD,IAAI,CAAC6C,EAAE,IAAIH,KAAK,EA4BxB,CACN,CAAC,CACC,CAAC,cAGN7F,KAAA,QAAKmF,SAAS,CAAC,qCAAqC,CAAAC,QAAA,eAClDpF,KAAA,QAAKmF,SAAS,CAAC,gCAAgC,CAAAC,QAAA,eAC7CtF,IAAA,SAAAsF,QAAA,CAAM,YAAU,CAAM,CAAC,cACvBpF,KAAA,SAAAoF,QAAA,EAAM,QAAC,CAACxB,MAAM,CAACG,WAAW,CAACwC,cAAc,CAAC,CAAC,EAAO,CAAC,EAChD,CAAC,cACNvG,KAAA,QAAKmF,SAAS,CAAC,gCAAgC,CAAAC,QAAA,eAC7CtF,IAAA,SAAAsF,QAAA,CAAM,WAAM,CAAM,CAAC,cACnBtF,IAAA,SAAAsF,QAAA,CACGxB,MAAM,CAACO,WAAW,CAAG,MAAM,cAC1BrE,IAAA,CAACN,KAAK,EAACgH,EAAE,CAAC,SAAS,CAAApB,QAAA,CAAC,QAAM,CAAO,CAClC,CACG,CAAC,EACJ,CAAC,cACNtF,IAAA,OAAIqF,SAAS,CAAC,MAAM,CAAE,CAAC,cACvBnF,KAAA,QAAKmF,SAAS,CAAC,qDAAqD,CAAAC,QAAA,eAClEtF,IAAA,SAAAsF,QAAA,CAAM,QAAM,CAAM,CAAC,cACnBpF,KAAA,SAAAoF,QAAA,EAAM,QAAC,CAAC,CAACxB,MAAM,CAACG,WAAW,EAAIH,MAAM,CAACO,WAAW,CAAG,GAAG,CAAG,CAAC,CAAC,EAAEoC,cAAc,CAAC,CAAC,EAAO,CAAC,EACnF,CAAC,EACH,CAAC,EACG,CACZ,GAxFI3C,MAAM,CAACpB,QAyFR,CACP,CAAC,EACC,CAAC,cAGNxC,KAAA,CAACZ,IAAI,EAAC+F,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACpCtF,IAAA,CAACV,IAAI,CAACiG,MAAM,EAACF,SAAS,CAAC,UAAU,CAAAC,QAAA,cAC/BtF,IAAA,OAAIqF,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAC,yCAA0B,CAAI,CAAC,CACzC,CAAC,cACdpF,KAAA,CAACZ,IAAI,CAACoG,IAAI,EAAAJ,QAAA,eAERpF,KAAA,CAACX,IAAI,CAACgI,KAAK,EAAClC,SAAS,CAAC,MAAM,CAAAC,QAAA,eAC1BtF,IAAA,CAACT,IAAI,CAACiI,KAAK,EAAAlC,QAAA,CAAC,8CAA+B,CAAY,CAAC,cACxDpF,KAAA,QAAKmF,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BtF,IAAA,CAACT,IAAI,CAAC0G,KAAK,EACTf,IAAI,CAAC,OAAO,CACZgB,EAAE,CAAC,kBAAkB,CACrBuB,IAAI,CAAC,eAAe,CACpBC,KAAK,CAAC,UAAU,CAChBvB,OAAO,CAAEzE,aAAa,GAAK,UAAW,CACtC0E,QAAQ,CAAGa,CAAC,EAAKtF,gBAAgB,CAACsF,CAAC,CAACC,MAAM,CAACQ,KAAK,CAAE,CAClDrB,KAAK,cACHnG,KAAA,SAAAoF,QAAA,eACEtF,IAAA,SAAMqF,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAC,cAAE,CAAM,CAAC,YACvB,cAAAtF,IAAA,CAACN,KAAK,EAACgH,EAAE,CAAC,SAAS,CAAApB,QAAA,CAAC,aAAW,CAAO,CAAC,EAC5C,CACP,CACF,CAAC,cACFtF,IAAA,CAACT,IAAI,CAAC0G,KAAK,EACTf,IAAI,CAAC,OAAO,CACZgB,EAAE,CAAC,eAAe,CAClBuB,IAAI,CAAC,eAAe,CACpBC,KAAK,CAAC,OAAO,CACbvB,OAAO,CAAEzE,aAAa,GAAK,OAAQ,CACnC0E,QAAQ,CAAGa,CAAC,EAAKtF,gBAAgB,CAACsF,CAAC,CAACC,MAAM,CAACQ,KAAK,CAAE,CAClDrB,KAAK,cACHnG,KAAA,SAAAoF,QAAA,eACEtF,IAAA,SAAMqF,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAC,cAAE,CAAM,CAAC,QAElC,EAAM,CACP,CACF,CAAC,cACFtF,IAAA,CAACT,IAAI,CAAC0G,KAAK,EACTf,IAAI,CAAC,OAAO,CACZgB,EAAE,CAAC,eAAe,CAClBuB,IAAI,CAAC,eAAe,CACpBC,KAAK,CAAC,OAAO,CACbvB,OAAO,CAAEzE,aAAa,GAAK,OAAQ,CACnC0E,QAAQ,CAAGa,CAAC,EAAKtF,gBAAgB,CAACsF,CAAC,CAACC,MAAM,CAACQ,KAAK,CAAE,CAClDrB,KAAK,cACHnG,KAAA,SAAAoF,QAAA,eACEtF,IAAA,SAAMqF,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAC,cAAE,CAAM,CAAC,wBAElC,EAAM,CACP,CACF,CAAC,EACC,CAAC,EACI,CAAC,cAGbpF,KAAA,CAACX,IAAI,CAACgI,KAAK,EAAAjC,QAAA,eACTtF,IAAA,CAACT,IAAI,CAACiI,KAAK,EAAAlC,QAAA,CAAC,2CAA+B,CAAY,CAAC,cACxDtF,IAAA,CAACT,IAAI,CAACoI,OAAO,EACXC,EAAE,CAAC,UAAU,CACbC,IAAI,CAAE,CAAE,CACRH,KAAK,CAAE9F,UAAW,CAClBwE,QAAQ,CAAGa,CAAC,EAAKpF,aAAa,CAACoF,CAAC,CAACC,MAAM,CAACQ,KAAK,CAAE,CAC/CI,WAAW,CAAC,2DAA2D,CACvEC,SAAS,CAAE,GAAI,CAChB,CAAC,cACF7H,KAAA,CAACX,IAAI,CAACyI,IAAI,EAAC3C,SAAS,CAAC,YAAY,CAAAC,QAAA,EAC9B1D,UAAU,CAACU,MAAM,CAAC,iBACrB,EAAW,CAAC,EACF,CAAC,EACJ,CAAC,EACR,CAAC,CAGN8C,MAAM,CAACb,WAAW,CAAG,CAAC,eACrBrE,KAAA,CAACZ,IAAI,EAAC+F,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAChCtF,IAAA,CAACV,IAAI,CAACiG,MAAM,EAACF,SAAS,CAAC,uBAAuB,CAAAC,QAAA,cAC5CtF,IAAA,OAAIqF,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAC,gCAAoB,CAAI,CAAC,CACnC,CAAC,cACdtF,IAAA,CAACV,IAAI,CAACoG,IAAI,EAAAJ,QAAA,cACRpF,KAAA,QAAKmF,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BpF,KAAA,QAAKmF,SAAS,CAAC,gCAAgC,CAAAC,QAAA,eAC7CtF,IAAA,SAAAsF,QAAA,CAAM,2BAAyB,CAAM,CAAC,cACtCtF,IAAA,SAAMqF,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAEF,MAAM,CAACb,WAAW,CAAO,CAAC,EAClD,CAAC,cACNrE,KAAA,QAAKmF,SAAS,CAAC,gCAAgC,CAAAC,QAAA,eAC7CtF,IAAA,SAAAsF,QAAA,CAAM,qBAAmB,CAAM,CAAC,cAChCtF,IAAA,SAAMqF,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAEF,MAAM,CAACd,UAAU,CAAO,CAAC,EACjD,CAAC,cACNpE,KAAA,QAAKmF,SAAS,CAAC,gCAAgC,CAAAC,QAAA,eAC7CtF,IAAA,SAAAsF,QAAA,CAAM,qBAAmB,CAAM,CAAC,cAChCpF,KAAA,SAAAoF,QAAA,EAAM,QAAC,CAACF,MAAM,CAACnB,WAAW,CAACwC,cAAc,CAAC,CAAC,EAAO,CAAC,EAChD,CAAC,cACNvG,KAAA,QAAKmF,SAAS,CAAC,gCAAgC,CAAAC,QAAA,eAC7CtF,IAAA,SAAAsF,QAAA,CAAM,qBAAgB,CAAM,CAAC,cAC7BtF,IAAA,SAAAsF,QAAA,CACGF,MAAM,CAAChB,YAAY,CAAG,CAAC,CAAG,IAAIgB,MAAM,CAAChB,YAAY,CAACqC,cAAc,CAAC,CAAC,EAAE,CAAG,QAAQ,CAC5E,CAAC,EACJ,CAAC,cACNzG,IAAA,QAAK,CAAC,cACNE,KAAA,QAAKmF,SAAS,CAAC,0DAA0D,CAAAC,QAAA,eACvEtF,IAAA,SAAAsF,QAAA,CAAM,oBAAkB,CAAM,CAAC,cAC/BpF,KAAA,SAAAoF,QAAA,EAAM,QAAC,CAAC,CAACF,MAAM,CAACnB,WAAW,CAAGmB,MAAM,CAAChB,YAAY,EAAEqC,cAAc,CAAC,CAAC,EAAO,CAAC,EACxE,CAAC,EACH,CAAC,CACG,CAAC,EACR,CACP,EACS,CAAC,cAEbvG,KAAA,CAACd,KAAK,CAAC6I,MAAM,EAAC5C,SAAS,CAAC,eAAe,CAAAC,QAAA,eACrCtF,IAAA,CAACX,MAAM,EAACsG,OAAO,CAAC,mBAAmB,CAACK,OAAO,CAAEvF,MAAO,CAACyH,QAAQ,CAAEtH,aAAc,CAAA0E,QAAA,CAAC,UAE9E,CAAQ,CAAC,cACTtF,IAAA,CAACX,MAAM,EACLsG,OAAO,CAAC,SAAS,CACjBK,OAAO,CAAExB,cAAe,CACxB0D,QAAQ,CAAEtH,aAAa,EAAIwE,MAAM,CAACb,WAAW,GAAK,CAAC,EAAKzC,iBAAiB,EAAI,CAACA,iBAAiB,CAACqB,SAAW,CAC3GkC,SAAS,CAAC,MAAM,CAAAC,QAAA,CAEf1E,aAAa,cACZV,KAAA,CAAAE,SAAA,EAAAkF,QAAA,eACEtF,IAAA,CAACP,OAAO,EAACgF,IAAI,CAAC,IAAI,CAACY,SAAS,CAAC,MAAM,CAAE,CAAC,gBAExC,EAAE,CAAC,cAEHnF,KAAA,CAAAE,SAAA,EAAAkF,QAAA,EAAE,+BACmB,CAACF,MAAM,CAACb,WAAW,CAAG,CAAC,CAAG,GAAG,CAAG,EAAE,CACpDa,MAAM,CAACb,WAAW,CAAG,CAAC,eACrBrE,KAAA,SAAMmF,SAAS,CAAC,MAAM,CAAAC,QAAA,EAAC,SACnB,CAAC,CAACF,MAAM,CAACnB,WAAW,CAAGmB,MAAM,CAAChB,YAAY,EAAEqC,cAAc,CAAC,CAAC,CAAC,GACjE,EAAM,CACP,EACD,CACH,CACK,CAAC,EACG,CAAC,EACV,CAAC,CAEZ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}