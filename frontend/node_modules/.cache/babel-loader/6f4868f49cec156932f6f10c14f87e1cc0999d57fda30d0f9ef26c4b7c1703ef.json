{"ast":null,"code":"import{useState,useEffect}from'react';import{Container,Form,Button,Alert,Card,Spinner,Row,Col,Nav,Badge,Modal,Image}from'react-bootstrap';import apiClient from'../services/api';import{motion}from'framer-motion';import{FaWhatsapp,FaStar,FaEdit,FaSave,FaTimes,FaEye,FaCheckCircle,FaClock,FaShoppingCart,FaStore,FaUser,FaChartLine,FaCamera,FaUpload}from'react-icons/fa';import{useCart}from'../contexts/CartContext';import RatingSystem from'../components/RatingSystem';import DashboardContent from'../components/DashboardContent';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const provinces=['San José','Alajuela','Cartago','Heredia','Guanacaste','Puntarenas','Limón'];const StatusBadge=_ref=>{let{status}=_ref;const statusConfig={initiated:{variant:'warning',label:'Iniciada',icon:FaClock},contacted:{variant:'info',label:'Contactado',icon:FaEye},completed:{variant:'success',label:'Completada',icon:FaCheckCircle},rated:{variant:'primary',label:'Calificada',icon:FaStar}};const config=statusConfig[status]||statusConfig.initiated;const IconComponent=config.icon;return/*#__PURE__*/_jsxs(Badge,{bg:config.variant,className:\"d-flex align-items-center gap-1\",children:[/*#__PURE__*/_jsx(IconComponent,{size:12}),config.label]});};const TransactionCard=_ref2=>{var _transaction$items$,_transaction$items$2;let{transaction,type,onRateUser,onUpdateStatus}=_ref2;const[showDetails,setShowDetails]=useState(false);const isCompletedAndCanRate=transaction.status==='completed'&&type==='purchases';const canMarkAsCompleted=transaction.status==='contacted'&&type==='sales';return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Card,{className:\"mb-3 shadow-sm\",children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-muted small\",children:[\"ID: #\",transaction.id.slice(-6)]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-muted small\",children:new Date(transaction.createdAt).toLocaleDateString()})]})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:type==='purchases'?'Vendedor:':'Comprador:'}),/*#__PURE__*/_jsx(\"div\",{children:type==='purchases'?((_transaction$items$=transaction.items[0])===null||_transaction$items$===void 0?void 0:_transaction$items$.sellerName)||'Desconocido':transaction.buyerName||'Desconocido'})]})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"strong\",{children:[\"\\u20A1$\",transaction.totalAmount.toFixed(2)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-muted small\",children:[transaction.items.length,\" carta\",transaction.items.length>1?'s':'']})]})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(StatusBadge,{status:transaction.status})})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2 justify-content-end\",children:[/*#__PURE__*/_jsxs(Button,{variant:\"outline-primary\",size:\"sm\",onClick:()=>setShowDetails(true),children:[/*#__PURE__*/_jsx(FaEye,{className:\"me-1\",size:12}),\"Ver detalles\"]}),isCompletedAndCanRate&&/*#__PURE__*/_jsxs(Button,{variant:\"warning\",size:\"sm\",onClick:()=>onRateUser(transaction),children:[/*#__PURE__*/_jsx(FaStar,{className:\"me-1\",size:12}),\"Calificar\"]}),canMarkAsCompleted&&/*#__PURE__*/_jsxs(Button,{variant:\"success\",size:\"sm\",onClick:()=>onUpdateStatus(transaction.id,'completed'),children:[/*#__PURE__*/_jsx(FaCheckCircle,{className:\"me-1\",size:12}),\"Marcar completada\"]})]})})]})})}),/*#__PURE__*/_jsxs(Modal,{show:showDetails,onHide:()=>setShowDetails(false),size:\"lg\",children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsxs(Modal.Title,{children:[\"Detalles de Transacci\\xF3n #\",transaction.id.slice(-6)]})}),/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsxs(Row,{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Fecha:\"}),\" \",new Date(transaction.createdAt).toLocaleString()]}),/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Estado:\"}),\" \",/*#__PURE__*/_jsx(StatusBadge,{status:transaction.status})]}),/*#__PURE__*/_jsxs(Col,{md:6,className:\"mt-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:type==='purchases'?'Vendedor:':'Comprador:'}),type==='purchases'?((_transaction$items$2=transaction.items[0])===null||_transaction$items$2===void 0?void 0:_transaction$items$2.sellerName)||'Desconocido':transaction.buyerName||'Desconocido']}),/*#__PURE__*/_jsxs(Col,{md:6,className:\"mt-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Total:\"}),\" \\u20A1$\",transaction.totalAmount.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"h6\",{children:\"Cartas:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row g-2\",children:transaction.items.map((item,index)=>/*#__PURE__*/_jsx(Col,{sm:6,md:4,children:/*#__PURE__*/_jsx(Card,{className:\"h-100\",children:/*#__PURE__*/_jsxs(Row,{className:\"g-0\",children:[/*#__PURE__*/_jsx(Col,{xs:4,children:/*#__PURE__*/_jsx(\"img\",{src:item.cardImage||'https://via.placeholder.com/100',alt:item.cardName,className:\"img-fluid rounded-start\",style:{height:'80px',objectFit:'contain'}})}),/*#__PURE__*/_jsx(Col,{xs:8,children:/*#__PURE__*/_jsxs(Card.Body,{className:\"p-2\",children:[/*#__PURE__*/_jsx(Card.Title,{className:\"fs-6 mb-1\",children:item.cardName}),/*#__PURE__*/_jsxs(\"div\",{className:\"small text-muted\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u20A1$\",item.price,\" \\xB7 \",item.condition]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Cantidad: \",item.quantity]})]})]})})]})})},index))}),transaction.status==='initiated'&&type==='purchases'&&/*#__PURE__*/_jsxs(Alert,{variant:\"info\",className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Pr\\xF3ximos pasos:\"}),\" Los enlaces de WhatsApp se abrieron autom\\xE1ticamente para contactar a los vendedores. Una vez que confirmes la compra, el vendedor marcar\\xE1 la transacci\\xF3n como completada.\"]})]}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setShowDetails(false),children:\"Cerrar\"})})]})]});};const StarDisplay=_ref3=>{let{rating}=_ref3;const fullStars=Math.round(rating);return/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center mb-2\",children:Array.from({length:5},(_,index)=>/*#__PURE__*/_jsx(FaStar,{size:22,style:{marginRight:'4px'},color:index<fullStars?'#FFD700':'#ddd'},index))});};export default function Profile(){var _userData$verificatio,_userData$verificatio2,_userData$verificatio3,_userData$accountStat,_userData$accountStat2,_userData$accountStat3,_userData$accountStat4,_userData$rating,_userData$listings,_userData$binders,_userData$cart;const{user,userData,loading,syncUserData,updateTransactionStatus}=useCart();const[formData,setFormData]=useState({});const[editMode,setEditMode]=useState(false);const[error,setError]=useState('');const[success,setSuccess]=useState('');const[saving,setSaving]=useState(false);const[activeTab,setActiveTab]=useState('profile');const[transactions,setTransactions]=useState({purchases:[],sales:[]});const[transactionType,setTransactionType]=useState('purchases');const[loadingTransactions,setLoadingTransactions]=useState(true);const[ratingModal,setRatingModal]=useState({show:false,transaction:null,userRole:null});const[uploadingPhoto,setUploadingPhoto]=useState(false);const[selectedPhoto,setSelectedPhoto]=useState(null);const[photoPreview,setPhotoPreview]=useState(null);useEffect(()=>{if(userData){setFormData(userData);}},[userData]);useEffect(()=>{if(user&&activeTab==='transactions'){fetchTransactions();}},[user,activeTab]);const fetchTransactions=async()=>{setLoadingTransactions(true);try{// Por ahora simularemos transacciones hasta implementar el endpoint\n// TODO: Implementar endpoint /api/v1/transactions cuando esté listo\nconst mockTransactions={purchases:[],sales:[]};setTransactions(mockTransactions);}catch(error){console.error('Error fetching transactions:',error);}setLoadingTransactions(false);};const handleRateUser=transaction=>{setRatingModal({show:true,transaction:transaction,userRole:'buyer'// El usuario que está calificando es el comprador en Profile.js\n});};const handleUpdateStatus=async(transactionId,newStatus)=>{try{await updateTransactionStatus(transactionId,newStatus);await fetchTransactions();// Refrescar la lista\nalert('Estado de transacción actualizado correctamente');}catch(error){console.error('Error updating transaction status:',error);alert('Error al actualizar el estado de la transacción');}};const handlePhotoSelect=event=>{const file=event.target.files[0];if(file){// Validar tipo de archivo\nif(!file.type.startsWith('image/')){alert('Por favor selecciona un archivo de imagen válido');return;}// Validar tamaño (5MB máximo)\nif(file.size>5*1024*1024){alert('La imagen debe ser menor a 5MB');return;}setSelectedPhoto(file);// Crear preview\nconst reader=new FileReader();reader.onload=e=>setPhotoPreview(e.target.result);reader.readAsDataURL(file);}};const uploadPhoto=async()=>{if(!selectedPhoto||!user)return null;setUploadingPhoto(true);try{const formData=new FormData();formData.append('profilePicture',selectedPhoto);const response=await apiClient.post('/api/v1/users/upload-profile-picture',formData,{headers:{'Content-Type':'multipart/form-data'}});if(response.data.success){return response.data.profilePhoto;}throw new Error(response.data.message||'Error subiendo foto');}catch(error){console.error('Error subiendo foto:',error);throw error;}finally{setUploadingPhoto(false);}};const handleUpdate=async e=>{e.preventDefault();setError('');setSuccess('');setSaving(true);try{if(user){let updatedData={...formData};// Si hay una nueva foto seleccionada, subirla\nif(selectedPhoto){try{const photoData=await uploadPhoto();if(photoData){updatedData.profilePhoto=photoData;}}catch(photoError){console.error('Error subiendo foto:',photoError);setError('Error subiendo la foto de perfil');setSaving(false);return;}}// Actualizar perfil usando la API\nconst response=await apiClient.put('/api/v1/users/profile',updatedData);if(response.data.success){// Limpiar estados de foto\nsetSelectedPhoto(null);setPhotoPreview(null);setEditMode(false);setSuccess('Perfil actualizado correctamente');setTimeout(()=>setSuccess(''),3000);}else{throw new Error(response.data.message||'Error actualizando perfil');}}}catch(err){console.error('Error actualizando perfil:',err);setError(err.message||'Error al actualizar perfil');}finally{setSaving(false);}};if(loading){return/*#__PURE__*/_jsx(Container,{className:\"py-5 text-center\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Cargando...\"})})});}if(!user){return/*#__PURE__*/_jsx(Container,{className:\"py-5 text-center\",children:/*#__PURE__*/_jsx(Card,{className:\"shadow-sm\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Debes iniciar sesi\\xF3n\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Inicia sesi\\xF3n para ver tu perfil y gestionar tus datos.\"})]})})});}return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:0.5},className:\"section\",children:[/*#__PURE__*/_jsxs(Container,{className:\"py-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title text-center mb-4\",children:\"Mi Perfil\"}),/*#__PURE__*/_jsxs(Nav,{variant:\"pills\",className:\"justify-content-center mb-4\",children:[/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsxs(Nav.Link,{active:activeTab==='profile',onClick:()=>setActiveTab('profile'),className:\"d-flex align-items-center gap-2\",children:[/*#__PURE__*/_jsx(FaUser,{size:16}),\"Informaci\\xF3n Personal\"]})}),/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsxs(Nav.Link,{active:activeTab==='transactions',onClick:()=>setActiveTab('transactions'),className:\"d-flex align-items-center gap-2\",children:[/*#__PURE__*/_jsx(FaShoppingCart,{size:16}),\"Mis Transacciones\"]})}),/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsxs(Nav.Link,{active:activeTab==='dashboard',onClick:()=>setActiveTab('dashboard'),className:\"d-flex align-items-center gap-2\",children:[/*#__PURE__*/_jsx(FaChartLine,{size:16}),\"Dashboard\"]})})]}),activeTab==='profile'&&userData&&/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{lg:8,className:\"mx-auto\",children:/*#__PURE__*/_jsx(Card,{className:\"shadow-sm\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Informaci\\xF3n Personal\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>setEditMode(!editMode),variant:editMode?\"outline-secondary\":\"outline-primary\",className:\"d-flex align-items-center gap-2\",children:editMode?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FaTimes,{size:14}),\"Cancelar\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FaEdit,{size:14}),\"Editar\"]})})]}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),success&&/*#__PURE__*/_jsx(Alert,{variant:\"success\",children:success}),!editMode?/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",children:[/*#__PURE__*/_jsxs(Row,{className:\"align-items-start\",children:[/*#__PURE__*/_jsxs(Col,{md:3,className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-photo mb-3\",children:/*#__PURE__*/_jsx(Image,{src:userData.profilePhoto||'https://via.placeholder.com/150x150?text=Sin+Foto',alt:\"Foto de perfil\",roundedCircle:true,style:{width:'150px',height:'150px',objectFit:'cover',border:'3px solid #dee2e6'}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"verification-badges\",children:[((_userData$verificatio=userData.verification)===null||_userData$verificatio===void 0?void 0:_userData$verificatio.email)&&/*#__PURE__*/_jsx(Badge,{bg:\"success\",className:\"me-1 mb-1\",children:\"\\u2705 Email\"}),((_userData$verificatio2=userData.verification)===null||_userData$verificatio2===void 0?void 0:_userData$verificatio2.phone)&&/*#__PURE__*/_jsx(Badge,{bg:\"success\",className:\"me-1 mb-1\",children:\"\\u2705 Tel\\xE9fono\"}),((_userData$verificatio3=userData.verification)===null||_userData$verificatio3===void 0?void 0:_userData$verificatio3.identity)&&/*#__PURE__*/_jsx(Badge,{bg:\"success\",className:\"me-1 mb-1\",children:\"\\u2705 C\\xE9dula\"})]})]}),/*#__PURE__*/_jsxs(Col,{md:5,children:[/*#__PURE__*/_jsx(\"h4\",{className:\"mb-3\",children:userData.fullName||userData.username||'Usuario sin nombre'}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Usuario:\"}),\" @\",userData.username||'sin-usuario']}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",user.email]}),userData.cedula&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"C\\xE9dula:\"}),\" \",userData.cedula]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Tel\\xE9fono:\"}),\" \",userData.phone||'No registrado']}),userData.whatsapp&&userData.whatsapp!==userData.phone&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"WhatsApp:\"}),\" \",userData.whatsapp]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Ubicaci\\xF3n:\"}),\" \",userData.province||'No especificada']}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Miembro desde:\"}),\" \",userData.createdAt?new Date(userData.createdAt.toDate()).toLocaleDateString():'Reciente']}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Nivel de confianza:\"}),/*#__PURE__*/_jsx(Badge,{bg:((_userData$accountStat=userData.accountStatus)===null||_userData$accountStat===void 0?void 0:_userData$accountStat.trustLevel)==='premium'?'warning':((_userData$accountStat2=userData.accountStatus)===null||_userData$accountStat2===void 0?void 0:_userData$accountStat2.trustLevel)==='trusted'?'success':((_userData$accountStat3=userData.accountStatus)===null||_userData$accountStat3===void 0?void 0:_userData$accountStat3.trustLevel)==='verified'?'info':'secondary',className:\"ms-2\",children:((_userData$accountStat4=userData.accountStatus)===null||_userData$accountStat4===void 0?void 0:_userData$accountStat4.trustLevel)||'Nuevo'})]})]}),/*#__PURE__*/_jsxs(Col,{md:4,className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Calificaci\\xF3n:\"})}),/*#__PURE__*/_jsx(StarDisplay,{rating:userData.rating||0}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-muted small\",children:[\"(\",((_userData$rating=userData.rating)===null||_userData$rating===void 0?void 0:_userData$rating.toFixed(1))||'0.0',\" de 5, \",userData.reviews||0,\" reviews)\"]}),(userData.whatsapp||userData.phone)&&/*#__PURE__*/_jsxs(Button,{variant:\"success\",href:`https://wa.me/506${(userData.whatsapp||userData.phone).replace(/[^0-9]/g,'')}`,target:\"_blank\",rel:\"noopener noreferrer\",className:\"mt-3 d-flex align-items-center gap-2 mx-auto\",children:[/*#__PURE__*/_jsx(FaWhatsapp,{size:16}),\"Contactar por WhatsApp\"]})]})]}),/*#__PURE__*/_jsxs(Row,{className:\"mt-4 pt-4 border-top\",children:[/*#__PURE__*/_jsxs(Col,{md:4,className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-primary\",children:((_userData$listings=userData.listings)===null||_userData$listings===void 0?void 0:_userData$listings.length)||0}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"Cartas en venta\"})]}),/*#__PURE__*/_jsxs(Col,{md:4,className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-success\",children:((_userData$binders=userData.binders)===null||_userData$binders===void 0?void 0:_userData$binders.length)||0}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"Binders creados\"})]}),/*#__PURE__*/_jsxs(Col,{md:4,className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-info\",children:((_userData$cart=userData.cart)===null||_userData$cart===void 0?void 0:_userData$cart.length)||0}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"En carrito\"})]})]})]}):/*#__PURE__*/_jsxs(Form,{onSubmit:handleUpdate,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-4 text-center\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Foto de perfil\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-photo-upload\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"current-photo mb-3\",children:/*#__PURE__*/_jsx(Image,{src:photoPreview||formData.profilePhoto||'https://via.placeholder.com/150x150?text=Sin+Foto',alt:\"Foto de perfil\",roundedCircle:true,style:{width:'150px',height:'150px',objectFit:'cover',border:'3px solid #dee2e6'}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"photo-upload-controls d-flex gap-2 justify-content-center\",children:[/*#__PURE__*/_jsx(Form.Control,{type:\"file\",accept:\"image/*\",onChange:handlePhotoSelect,style:{display:'none'},id:\"photo-upload\"}),/*#__PURE__*/_jsxs(Button,{variant:\"outline-primary\",onClick:()=>document.getElementById('photo-upload').click(),disabled:uploadingPhoto,children:[/*#__PURE__*/_jsx(FaCamera,{className:\"me-2\"}),selectedPhoto?'Cambiar Foto':'Subir Foto']}),selectedPhoto&&/*#__PURE__*/_jsxs(Button,{variant:\"outline-secondary\",onClick:()=>{setSelectedPhoto(null);setPhotoPreview(null);},children:[/*#__PURE__*/_jsx(FaTimes,{className:\"me-2\"}),\"Cancelar\"]})]}),uploadingPhoto&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2\",children:[/*#__PURE__*/_jsx(Spinner,{size:\"sm\",animation:\"border\",className:\"me-2\"}),\"Subiendo foto...\"]}),/*#__PURE__*/_jsx(Form.Text,{className:\"text-muted d-block mt-2\",children:\"Formatos: JPG, PNG, GIF. M\\xE1ximo 5MB.\"})]})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Nombre de usuario\"}),/*#__PURE__*/_jsx(Form.Control,{value:formData.username||'',onChange:e=>setFormData({...formData,username:e.target.value}),placeholder:\"Tu nombre de usuario\"})]})}),/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Nombre completo\"}),/*#__PURE__*/_jsx(Form.Control,{value:formData.fullName||'',onChange:e=>setFormData({...formData,fullName:e.target.value}),placeholder:\"Tu nombre completo seg\\xFAn c\\xE9dula\"})]})})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"C\\xE9dula de identidad *\"}),/*#__PURE__*/_jsx(Form.Control,{value:formData.cedula||'',onChange:e=>setFormData({...formData,cedula:e.target.value}),placeholder:\"Ej: 1-1234-5678\",maxLength:12}),/*#__PURE__*/_jsx(Form.Text,{className:\"text-muted\",children:\"Requerido para verificaci\\xF3n de identidad\"})]})}),/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Fecha de nacimiento\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"date\",value:formData.birthDate||'',onChange:e=>setFormData({...formData,birthDate:e.target.value})})]})})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Tel\\xE9fono\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"tel\",value:formData.phone||'',onChange:e=>setFormData({...formData,phone:e.target.value}),placeholder:\"Ej: 8888-8888\"})]})}),/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"WhatsApp\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"tel\",value:formData.whatsapp||'',onChange:e=>setFormData({...formData,whatsapp:e.target.value}),placeholder:\"N\\xFAmero de WhatsApp (si es diferente)\"})]})})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Provincia\"}),/*#__PURE__*/_jsxs(Form.Select,{value:formData.province||'',onChange:e=>setFormData({...formData,province:e.target.value}),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecciona una provincia\"}),provinces.map(p=>/*#__PURE__*/_jsx(\"option\",{value:p,children:p},p))]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex gap-2 justify-content-end\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",disabled:saving,className:\"d-flex align-items-center gap-2\",children:saving?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Spinner,{size:\"sm\",animation:\"border\"}),\"Guardando...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FaSave,{size:14}),\"Guardar Cambios\"]})})})]})]})})})}),activeTab==='transactions'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Nav,{variant:\"pills\",className:\"justify-content-center mb-4\",children:[/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsxs(Nav.Link,{active:transactionType==='purchases',onClick:()=>setTransactionType('purchases'),className:\"d-flex align-items-center gap-2\",children:[/*#__PURE__*/_jsx(FaShoppingCart,{size:16}),\"Compras (\",transactions.purchases.length,\")\"]})}),/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsxs(Nav.Link,{active:transactionType==='sales',onClick:()=>setTransactionType('sales'),className:\"d-flex align-items-center gap-2\",children:[/*#__PURE__*/_jsx(FaStore,{size:16}),\"Ventas (\",transactions.sales.length,\")\"]})})]}),loadingTransactions?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(Spinner,{animation:\"border\",role:\"status\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-3 text-muted\",children:\"Cargando transacciones...\"})]}):(()=>{const currentTransactions=transactions[transactionType]||[];return currentTransactions.length===0?/*#__PURE__*/_jsxs(Alert,{variant:\"info\",className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"h5\",{children:[\"No hay \",transactionType==='purchases'?'compras':'ventas',\" registradas\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:transactionType==='purchases'?'Cuando realices compras, aparecerán aquí.':'Cuando realices ventas, aparecerán aquí.'})]}):/*#__PURE__*/_jsx(\"div\",{children:currentTransactions.map(transaction=>/*#__PURE__*/_jsx(TransactionCard,{transaction:transaction,type:transactionType,onRateUser:handleRateUser,onUpdateStatus:handleUpdateStatus},transaction.id))});})()]}),activeTab==='dashboard'&&/*#__PURE__*/_jsx(DashboardContent,{user:user})]}),ratingModal.show&&ratingModal.transaction&&/*#__PURE__*/_jsx(RatingSystem,{show:ratingModal.show,onHide:()=>setRatingModal({show:false,transaction:null,userRole:null}),transaction:ratingModal.transaction,userRole:ratingModal.userRole,onRatingSubmitted:ratingData=>{console.log('Rating submitted:',ratingData);setRatingModal({show:false,transaction:null,userRole:null});// Opcionalmente refrescar transacciones\nfetchTransactions();}})]});}","map":{"version":3,"names":["useState","useEffect","Container","Form","Button","Alert","Card","Spinner","Row","Col","Nav","Badge","Modal","Image","apiClient","motion","FaWhatsapp","FaStar","FaEdit","FaSave","FaTimes","FaEye","FaCheckCircle","FaClock","FaShoppingCart","FaStore","FaUser","FaChartLine","FaCamera","FaUpload","useCart","RatingSystem","DashboardContent","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","provinces","StatusBadge","_ref","status","statusConfig","initiated","variant","label","icon","contacted","completed","rated","config","IconComponent","bg","className","children","size","TransactionCard","_ref2","_transaction$items$","_transaction$items$2","transaction","type","onRateUser","onUpdateStatus","showDetails","setShowDetails","isCompletedAndCanRate","canMarkAsCompleted","Body","md","id","slice","Date","createdAt","toLocaleDateString","items","sellerName","buyerName","totalAmount","toFixed","length","onClick","show","onHide","Header","closeButton","Title","toLocaleString","map","item","index","sm","xs","src","cardImage","alt","cardName","style","height","objectFit","price","condition","quantity","Footer","StarDisplay","_ref3","rating","fullStars","Math","round","Array","from","_","marginRight","color","Profile","_userData$verificatio","_userData$verificatio2","_userData$verificatio3","_userData$accountStat","_userData$accountStat2","_userData$accountStat3","_userData$accountStat4","_userData$rating","_userData$listings","_userData$binders","_userData$cart","user","userData","loading","syncUserData","updateTransactionStatus","formData","setFormData","editMode","setEditMode","error","setError","success","setSuccess","saving","setSaving","activeTab","setActiveTab","transactions","setTransactions","purchases","sales","transactionType","setTransactionType","loadingTransactions","setLoadingTransactions","ratingModal","setRatingModal","userRole","uploadingPhoto","setUploadingPhoto","selectedPhoto","setSelectedPhoto","photoPreview","setPhotoPreview","fetchTransactions","mockTransactions","console","handleRateUser","handleUpdateStatus","transactionId","newStatus","alert","handlePhotoSelect","event","file","target","files","startsWith","reader","FileReader","onload","e","result","readAsDataURL","uploadPhoto","FormData","append","response","post","headers","data","profilePhoto","Error","message","handleUpdate","preventDefault","updatedData","photoData","photoError","put","setTimeout","err","animation","role","div","initial","opacity","animate","transition","duration","Item","Link","active","lg","roundedCircle","width","border","verification","email","phone","identity","fullName","username","cedula","whatsapp","province","toDate","accountStatus","trustLevel","reviews","href","replace","rel","listings","binders","cart","onSubmit","Group","Label","Control","accept","onChange","display","document","getElementById","click","disabled","Text","value","placeholder","maxLength","birthDate","Select","p","currentTransactions","onRatingSubmitted","ratingData","log"],"sources":["/home/frodev/Downloads/FroDev-CR-TropicalTCGPlayers/src/pages/Profile.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { Container, Form, Button, Alert, Card, Spinner, Row, Col, Nav, Badge, Modal, Image } from 'react-bootstrap';\nimport apiClient from '../services/api';\nimport { motion } from 'framer-motion';\nimport { FaWhatsapp, FaStar, FaEdit, FaSave, FaTimes, FaEye, FaCheckCircle, FaClock, FaShoppingCart, FaStore, FaUser, FaChartLine, FaCamera, FaUpload } from 'react-icons/fa';\nimport { useCart } from '../contexts/CartContext';\nimport RatingSystem from '../components/RatingSystem';\nimport DashboardContent from '../components/DashboardContent';\n\nconst provinces = ['San José', 'Alajuela', 'Cartago', 'Heredia', 'Guanacaste', 'Puntarenas', 'Limón'];\n\nconst StatusBadge = ({ status }) => {\n  const statusConfig = {\n    initiated: { variant: 'warning', label: 'Iniciada', icon: FaClock },\n    contacted: { variant: 'info', label: 'Contactado', icon: FaEye },\n    completed: { variant: 'success', label: 'Completada', icon: FaCheckCircle },\n    rated: { variant: 'primary', label: 'Calificada', icon: FaStar }\n  };\n\n  const config = statusConfig[status] || statusConfig.initiated;\n  const IconComponent = config.icon;\n\n  return (\n    <Badge bg={config.variant} className=\"d-flex align-items-center gap-1\">\n      <IconComponent size={12} />\n      {config.label}\n    </Badge>\n  );\n};\n\nconst TransactionCard = ({ transaction, type, onRateUser, onUpdateStatus }) => {\n  const [showDetails, setShowDetails] = useState(false);\n  \n  const isCompletedAndCanRate = transaction.status === 'completed' && type === 'purchases';\n  const canMarkAsCompleted = transaction.status === 'contacted' && type === 'sales';\n\n  return (\n    <>\n      <Card className=\"mb-3 shadow-sm\">\n        <Card.Body>\n          <Row className=\"align-items-center\">\n            <Col md={2}>\n              <div className=\"text-center\">\n                <div className=\"text-muted small\">ID: #{transaction.id.slice(-6)}</div>\n                <div className=\"text-muted small\">{new Date(transaction.createdAt).toLocaleDateString()}</div>\n              </div>\n            </Col>\n            <Col md={3}>\n              <div>\n                <strong>{type === 'purchases' ? 'Vendedor:' : 'Comprador:'}</strong>\n                <div>{type === 'purchases' ? \n                  transaction.items[0]?.sellerName || 'Desconocido' : \n                  transaction.buyerName || 'Desconocido'}</div>\n              </div>\n            </Col>\n            <Col md={2}>\n              <div className=\"text-center\">\n                <strong>₡${transaction.totalAmount.toFixed(2)}</strong>\n                <div className=\"text-muted small\">{transaction.items.length} carta{transaction.items.length > 1 ? 's' : ''}</div>\n              </div>\n            </Col>\n            <Col md={2}>\n              <div className=\"text-center\">\n                <StatusBadge status={transaction.status} />\n              </div>\n            </Col>\n            <Col md={3}>\n              <div className=\"d-flex gap-2 justify-content-end\">\n                <Button\n                  variant=\"outline-primary\"\n                  size=\"sm\"\n                  onClick={() => setShowDetails(true)}\n                >\n                  <FaEye className=\"me-1\" size={12} />\n                  Ver detalles\n                </Button>\n                \n                {isCompletedAndCanRate && (\n                  <Button\n                    variant=\"warning\"\n                    size=\"sm\"\n                    onClick={() => onRateUser(transaction)}\n                  >\n                    <FaStar className=\"me-1\" size={12} />\n                    Calificar\n                  </Button>\n                )}\n                \n                {canMarkAsCompleted && (\n                  <Button\n                    variant=\"success\"\n                    size=\"sm\"\n                    onClick={() => onUpdateStatus(transaction.id, 'completed')}\n                  >\n                    <FaCheckCircle className=\"me-1\" size={12} />\n                    Marcar completada\n                  </Button>\n                )}\n              </div>\n            </Col>\n          </Row>\n        </Card.Body>\n      </Card>\n\n      <Modal show={showDetails} onHide={() => setShowDetails(false)} size=\"lg\">\n        <Modal.Header closeButton>\n          <Modal.Title>Detalles de Transacción #{transaction.id.slice(-6)}</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <Row className=\"mb-3\">\n            <Col md={6}>\n              <strong>Fecha:</strong> {new Date(transaction.createdAt).toLocaleString()}\n            </Col>\n            <Col md={6}>\n              <strong>Estado:</strong> <StatusBadge status={transaction.status} />\n            </Col>\n            <Col md={6} className=\"mt-2\">\n              <strong>{type === 'purchases' ? 'Vendedor:' : 'Comprador:'}</strong>\n              {type === 'purchases' ? \n                transaction.items[0]?.sellerName || 'Desconocido' : \n                transaction.buyerName || 'Desconocido'}\n            </Col>\n            <Col md={6} className=\"mt-2\">\n              <strong>Total:</strong> ₡${transaction.totalAmount.toFixed(2)}\n            </Col>\n          </Row>\n\n          <h6>Cartas:</h6>\n          <div className=\"row g-2\">\n            {transaction.items.map((item, index) => (\n              <Col key={index} sm={6} md={4}>\n                <Card className=\"h-100\">\n                  <Row className=\"g-0\">\n                    <Col xs={4}>\n                      <img\n                        src={item.cardImage || 'https://via.placeholder.com/100'}\n                        alt={item.cardName}\n                        className=\"img-fluid rounded-start\"\n                        style={{ height: '80px', objectFit: 'contain' }}\n                      />\n                    </Col>\n                    <Col xs={8}>\n                      <Card.Body className=\"p-2\">\n                        <Card.Title className=\"fs-6 mb-1\">{item.cardName}</Card.Title>\n                        <div className=\"small text-muted\">\n                          <div>₡${item.price} · {item.condition}</div>\n                          <div>Cantidad: {item.quantity}</div>\n                        </div>\n                      </Card.Body>\n                    </Col>\n                  </Row>\n                </Card>\n              </Col>\n            ))}\n          </div>\n\n          {transaction.status === 'initiated' && type === 'purchases' && (\n            <Alert variant=\"info\" className=\"mt-3\">\n              <strong>Próximos pasos:</strong> Los enlaces de WhatsApp se abrieron automáticamente para contactar a los vendedores. \n              Una vez que confirmes la compra, el vendedor marcará la transacción como completada.\n            </Alert>\n          )}\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={() => setShowDetails(false)}>\n            Cerrar\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </>\n  );\n};\n\nconst StarDisplay = ({ rating }) => {\n  const fullStars = Math.round(rating);\n  return (\n    <div className=\"d-flex justify-content-center mb-2\">\n      {Array.from({ length: 5 }, (_, index) => (\n        <FaStar\n          key={index}\n          size={22}\n          style={{ marginRight: '4px' }}\n          color={index < fullStars ? '#FFD700' : '#ddd'}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default function Profile() {\n  const { user, userData, loading, syncUserData, updateTransactionStatus } = useCart();\n  const [formData, setFormData] = useState({});\n  const [editMode, setEditMode] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [saving, setSaving] = useState(false);\n  const [activeTab, setActiveTab] = useState('profile');\n  const [transactions, setTransactions] = useState({ purchases: [], sales: [] });\n  const [transactionType, setTransactionType] = useState('purchases');\n  const [loadingTransactions, setLoadingTransactions] = useState(true);\n  const [ratingModal, setRatingModal] = useState({\n    show: false,\n    transaction: null,\n    userRole: null\n  });\n  const [uploadingPhoto, setUploadingPhoto] = useState(false);\n  const [selectedPhoto, setSelectedPhoto] = useState(null);\n  const [photoPreview, setPhotoPreview] = useState(null);\n\n  useEffect(() => {\n    if (userData) {\n      setFormData(userData);\n    }\n  }, [userData]);\n\n  useEffect(() => {\n    if (user && activeTab === 'transactions') {\n      fetchTransactions();\n    }\n  }, [user, activeTab]);\n\n  const fetchTransactions = async () => {\n    setLoadingTransactions(true);\n    try {\n      // Por ahora simularemos transacciones hasta implementar el endpoint\n      // TODO: Implementar endpoint /api/v1/transactions cuando esté listo\n      const mockTransactions = {\n        purchases: [],\n        sales: []\n      };\n      \n      setTransactions(mockTransactions);\n    } catch (error) {\n      console.error('Error fetching transactions:', error);\n    }\n    setLoadingTransactions(false);\n  };\n\n  const handleRateUser = (transaction) => {\n    setRatingModal({\n      show: true,\n      transaction: transaction,\n      userRole: 'buyer' // El usuario que está calificando es el comprador en Profile.js\n    });\n  };\n\n  const handleUpdateStatus = async (transactionId, newStatus) => {\n    try {\n      await updateTransactionStatus(transactionId, newStatus);\n      await fetchTransactions(); // Refrescar la lista\n      alert('Estado de transacción actualizado correctamente');\n    } catch (error) {\n      console.error('Error updating transaction status:', error);\n      alert('Error al actualizar el estado de la transacción');\n    }\n  };\n\n  const handlePhotoSelect = (event) => {\n    const file = event.target.files[0];\n    if (file) {\n      // Validar tipo de archivo\n      if (!file.type.startsWith('image/')) {\n        alert('Por favor selecciona un archivo de imagen válido');\n        return;\n      }\n      \n      // Validar tamaño (5MB máximo)\n      if (file.size > 5 * 1024 * 1024) {\n        alert('La imagen debe ser menor a 5MB');\n        return;\n      }\n      \n      setSelectedPhoto(file);\n      \n      // Crear preview\n      const reader = new FileReader();\n      reader.onload = (e) => setPhotoPreview(e.target.result);\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const uploadPhoto = async () => {\n    if (!selectedPhoto || !user) return null;\n    \n    setUploadingPhoto(true);\n    try {\n      const formData = new FormData();\n      formData.append('profilePicture', selectedPhoto);\n      \n      const response = await apiClient.post('/api/v1/users/upload-profile-picture', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      \n      if (response.data.success) {\n        return response.data.profilePhoto;\n      }\n      \n      throw new Error(response.data.message || 'Error subiendo foto');\n    } catch (error) {\n      console.error('Error subiendo foto:', error);\n      throw error;\n    } finally {\n      setUploadingPhoto(false);\n    }\n  };\n\n  const handleUpdate = async (e) => {\n    e.preventDefault();\n    setError('');\n    setSuccess('');\n    setSaving(true);\n    \n    try {\n      if (user) {\n        let updatedData = { ...formData };\n        \n        // Si hay una nueva foto seleccionada, subirla\n        if (selectedPhoto) {\n          try {\n            const photoData = await uploadPhoto();\n            if (photoData) {\n              updatedData.profilePhoto = photoData;\n            }\n          } catch (photoError) {\n            console.error('Error subiendo foto:', photoError);\n            setError('Error subiendo la foto de perfil');\n            setSaving(false);\n            return;\n          }\n        }\n        \n        // Actualizar perfil usando la API\n        const response = await apiClient.put('/api/v1/users/profile', updatedData);\n        \n        if (response.data.success) {\n          // Limpiar estados de foto\n          setSelectedPhoto(null);\n          setPhotoPreview(null);\n          \n          setEditMode(false);\n          setSuccess('Perfil actualizado correctamente');\n          setTimeout(() => setSuccess(''), 3000);\n        } else {\n          throw new Error(response.data.message || 'Error actualizando perfil');\n        }\n      }\n    } catch (err) {\n      console.error('Error actualizando perfil:', err);\n      setError(err.message || 'Error al actualizar perfil');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <Container className=\"py-5 text-center\">\n        <Spinner animation=\"border\" role=\"status\">\n          <span className=\"visually-hidden\">Cargando...</span>\n        </Spinner>\n      </Container>\n    );\n  }\n\n  if (!user) {\n    return (\n      <Container className=\"py-5 text-center\">\n        <Card className=\"shadow-sm\">\n          <Card.Body>\n            <h3>Debes iniciar sesión</h3>\n            <p className=\"text-muted\">Inicia sesión para ver tu perfil y gestionar tus datos.</p>\n          </Card.Body>\n        </Card>\n      </Container>\n    );\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ duration: 0.5 }}\n      className=\"section\"\n    >\n      <Container className=\"py-5\">\n        <h2 className=\"section-title text-center mb-4\">Mi Perfil</h2>\n        \n        {/* Navegación por pestañas */}\n        <Nav variant=\"pills\" className=\"justify-content-center mb-4\">\n          <Nav.Item>\n            <Nav.Link \n              active={activeTab === 'profile'} \n              onClick={() => setActiveTab('profile')}\n              className=\"d-flex align-items-center gap-2\"\n            >\n              <FaUser size={16} />\n              Información Personal\n            </Nav.Link>\n          </Nav.Item>\n          <Nav.Item>\n            <Nav.Link \n              active={activeTab === 'transactions'} \n              onClick={() => setActiveTab('transactions')}\n              className=\"d-flex align-items-center gap-2\"\n            >\n              <FaShoppingCart size={16} />\n              Mis Transacciones\n            </Nav.Link>\n          </Nav.Item>\n          <Nav.Item>\n            <Nav.Link \n              active={activeTab === 'dashboard'} \n              onClick={() => setActiveTab('dashboard')}\n              className=\"d-flex align-items-center gap-2\"\n            >\n              <FaChartLine size={16} />\n              Dashboard\n            </Nav.Link>\n          </Nav.Item>\n        </Nav>\n\n        {/* Contenido de la pestaña de perfil */}\n        {activeTab === 'profile' && userData && (\n          <Row>\n            <Col lg={8} className=\"mx-auto\">\n              <Card className=\"shadow-sm\">\n                <Card.Body>\n                  <div className=\"d-flex justify-content-between align-items-center mb-4\">\n                    <h3>Información Personal</h3>\n                    <Button \n                      onClick={() => setEditMode(!editMode)} \n                      variant={editMode ? \"outline-secondary\" : \"outline-primary\"}\n                      className=\"d-flex align-items-center gap-2\"\n                    >\n                      {editMode ? (\n                        <>\n                          <FaTimes size={14} />\n                          Cancelar\n                        </>\n                      ) : (\n                        <>\n                          <FaEdit size={14} />\n                          Editar\n                        </>\n                      )}\n                    </Button>\n                  </div>\n\n                  {error && <Alert variant=\"danger\">{error}</Alert>}\n                  {success && <Alert variant=\"success\">{success}</Alert>}\n\n                  {!editMode ? (\n                    <div className=\"profile-info\">\n                      <Row className=\"align-items-start\">\n                        <Col md={3} className=\"text-center\">\n                          <div className=\"profile-photo mb-3\">\n                            <Image\n                              src={userData.profilePhoto || 'https://via.placeholder.com/150x150?text=Sin+Foto'}\n                              alt=\"Foto de perfil\"\n                              roundedCircle\n                              style={{ width: '150px', height: '150px', objectFit: 'cover', border: '3px solid #dee2e6' }}\n                            />\n                          </div>\n                          <div className=\"verification-badges\">\n                            {userData.verification?.email && (\n                              <Badge bg=\"success\" className=\"me-1 mb-1\">✅ Email</Badge>\n                            )}\n                            {userData.verification?.phone && (\n                              <Badge bg=\"success\" className=\"me-1 mb-1\">✅ Teléfono</Badge>\n                            )}\n                            {userData.verification?.identity && (\n                              <Badge bg=\"success\" className=\"me-1 mb-1\">✅ Cédula</Badge>\n                            )}\n                          </div>\n                        </Col>\n                        <Col md={5}>\n                          <h4 className=\"mb-3\">{userData.fullName || userData.username || 'Usuario sin nombre'}</h4>\n                          <div className=\"mb-2\">\n                            <strong>Usuario:</strong> @{userData.username || 'sin-usuario'}\n                          </div>\n                          <div className=\"mb-2\">\n                            <strong>Email:</strong> {user.email}\n                          </div>\n                          {userData.cedula && (\n                            <div className=\"mb-2\">\n                              <strong>Cédula:</strong> {userData.cedula}\n                            </div>\n                          )}\n                          <div className=\"mb-2\">\n                            <strong>Teléfono:</strong> {userData.phone || 'No registrado'}\n                          </div>\n                          {userData.whatsapp && userData.whatsapp !== userData.phone && (\n                            <div className=\"mb-2\">\n                              <strong>WhatsApp:</strong> {userData.whatsapp}\n                            </div>\n                          )}\n                          <div className=\"mb-2\">\n                            <strong>Ubicación:</strong> {userData.province || 'No especificada'}\n                          </div>\n                          <div className=\"mb-2\">\n                            <strong>Miembro desde:</strong> {userData.createdAt ? new Date(userData.createdAt.toDate()).toLocaleDateString() : 'Reciente'}\n                          </div>\n                          <div className=\"mb-2\">\n                            <strong>Nivel de confianza:</strong> \n                            <Badge \n                              bg={\n                                userData.accountStatus?.trustLevel === 'premium' ? 'warning' :\n                                userData.accountStatus?.trustLevel === 'trusted' ? 'success' :\n                                userData.accountStatus?.trustLevel === 'verified' ? 'info' : 'secondary'\n                              } \n                              className=\"ms-2\"\n                            >\n                              {userData.accountStatus?.trustLevel || 'Nuevo'}\n                            </Badge>\n                          </div>\n                        </Col>\n                        <Col md={4} className=\"text-center\">\n                          <div className=\"mb-3\">\n                            <strong>Calificación:</strong>\n                          </div>\n                          <StarDisplay rating={userData.rating || 0} />\n                          <p className=\"text-muted small\">\n                            ({userData.rating?.toFixed(1) || '0.0'} de 5, {userData.reviews || 0} reviews)\n                          </p>\n\n                          {(userData.whatsapp || userData.phone) && (\n                            <Button\n                              variant=\"success\"\n                              href={`https://wa.me/506${(userData.whatsapp || userData.phone).replace(/[^0-9]/g, '')}`}\n                              target=\"_blank\"\n                              rel=\"noopener noreferrer\"\n                              className=\"mt-3 d-flex align-items-center gap-2 mx-auto\"\n                            >\n                              <FaWhatsapp size={16} />\n                              Contactar por WhatsApp\n                            </Button>\n                          )}\n                        </Col>\n                      </Row>\n\n                      {/* Estadísticas del usuario */}\n                      <Row className=\"mt-4 pt-4 border-top\">\n                        <Col md={4} className=\"text-center\">\n                          <h5 className=\"text-primary\">{userData.listings?.length || 0}</h5>\n                          <small className=\"text-muted\">Cartas en venta</small>\n                        </Col>\n                        <Col md={4} className=\"text-center\">\n                          <h5 className=\"text-success\">{userData.binders?.length || 0}</h5>\n                          <small className=\"text-muted\">Binders creados</small>\n                        </Col>\n                        <Col md={4} className=\"text-center\">\n                          <h5 className=\"text-info\">{userData.cart?.length || 0}</h5>\n                          <small className=\"text-muted\">En carrito</small>\n                        </Col>\n                      </Row>\n                    </div>\n                  ) : (\n                    <Form onSubmit={handleUpdate}>\n                      {/* Foto de perfil */}\n                      <Form.Group className=\"mb-4 text-center\">\n                        <Form.Label>Foto de perfil</Form.Label>\n                        <div className=\"profile-photo-upload\">\n                          <div className=\"current-photo mb-3\">\n                            <Image\n                              src={photoPreview || formData.profilePhoto || 'https://via.placeholder.com/150x150?text=Sin+Foto'}\n                              alt=\"Foto de perfil\"\n                              roundedCircle\n                              style={{ width: '150px', height: '150px', objectFit: 'cover', border: '3px solid #dee2e6' }}\n                            />\n                          </div>\n                          <div className=\"photo-upload-controls d-flex gap-2 justify-content-center\">\n                            <Form.Control\n                              type=\"file\"\n                              accept=\"image/*\"\n                              onChange={handlePhotoSelect}\n                              style={{ display: 'none' }}\n                              id=\"photo-upload\"\n                            />\n                            <Button\n                              variant=\"outline-primary\"\n                              onClick={() => document.getElementById('photo-upload').click()}\n                              disabled={uploadingPhoto}\n                            >\n                              <FaCamera className=\"me-2\" />\n                              {selectedPhoto ? 'Cambiar Foto' : 'Subir Foto'}\n                            </Button>\n                            {selectedPhoto && (\n                              <Button\n                                variant=\"outline-secondary\"\n                                onClick={() => {\n                                  setSelectedPhoto(null);\n                                  setPhotoPreview(null);\n                                }}\n                              >\n                                <FaTimes className=\"me-2\" />\n                                Cancelar\n                              </Button>\n                            )}\n                          </div>\n                          {uploadingPhoto && (\n                            <div className=\"mt-2\">\n                              <Spinner size=\"sm\" animation=\"border\" className=\"me-2\" />\n                              Subiendo foto...\n                            </div>\n                          )}\n                          <Form.Text className=\"text-muted d-block mt-2\">\n                            Formatos: JPG, PNG, GIF. Máximo 5MB.\n                          </Form.Text>\n                        </div>\n                      </Form.Group>\n\n                      {/* Información básica */}\n                      <Row>\n                        <Col md={6}>\n                          <Form.Group className=\"mb-3\">\n                            <Form.Label>Nombre de usuario</Form.Label>\n                            <Form.Control\n                              value={formData.username || ''}\n                              onChange={(e) => setFormData({ ...formData, username: e.target.value })}\n                              placeholder=\"Tu nombre de usuario\"\n                            />\n                          </Form.Group>\n                        </Col>\n                        <Col md={6}>\n                          <Form.Group className=\"mb-3\">\n                            <Form.Label>Nombre completo</Form.Label>\n                            <Form.Control\n                              value={formData.fullName || ''}\n                              onChange={(e) => setFormData({ ...formData, fullName: e.target.value })}\n                              placeholder=\"Tu nombre completo según cédula\"\n                            />\n                          </Form.Group>\n                        </Col>\n                      </Row>\n\n                      {/* Información de identidad */}\n                      <Row>\n                        <Col md={6}>\n                          <Form.Group className=\"mb-3\">\n                            <Form.Label>Cédula de identidad *</Form.Label>\n                            <Form.Control\n                              value={formData.cedula || ''}\n                              onChange={(e) => setFormData({ ...formData, cedula: e.target.value })}\n                              placeholder=\"Ej: 1-1234-5678\"\n                              maxLength={12}\n                            />\n                            <Form.Text className=\"text-muted\">\n                              Requerido para verificación de identidad\n                            </Form.Text>\n                          </Form.Group>\n                        </Col>\n                        <Col md={6}>\n                          <Form.Group className=\"mb-3\">\n                            <Form.Label>Fecha de nacimiento</Form.Label>\n                            <Form.Control\n                              type=\"date\"\n                              value={formData.birthDate || ''}\n                              onChange={(e) => setFormData({ ...formData, birthDate: e.target.value })}\n                            />\n                          </Form.Group>\n                        </Col>\n                      </Row>\n\n                      {/* Contacto */}\n                      <Row>\n                        <Col md={6}>\n                          <Form.Group className=\"mb-3\">\n                            <Form.Label>Teléfono</Form.Label>\n                            <Form.Control\n                              type=\"tel\"\n                              value={formData.phone || ''}\n                              onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\n                              placeholder=\"Ej: 8888-8888\"\n                            />\n                          </Form.Group>\n                        </Col>\n                        <Col md={6}>\n                          <Form.Group className=\"mb-3\">\n                            <Form.Label>WhatsApp</Form.Label>\n                            <Form.Control\n                              type=\"tel\"\n                              value={formData.whatsapp || ''}\n                              onChange={(e) => setFormData({ ...formData, whatsapp: e.target.value })}\n                              placeholder=\"Número de WhatsApp (si es diferente)\"\n                            />\n                          </Form.Group>\n                        </Col>\n                      </Row>\n                      <Form.Group className=\"mb-3\">\n                        <Form.Label>Provincia</Form.Label>\n                        <Form.Select\n                          value={formData.province || ''}\n                          onChange={(e) => setFormData({ ...formData, province: e.target.value })}\n                        >\n                          <option value=\"\">Selecciona una provincia</option>\n                          {provinces.map((p) => (\n                            <option key={p} value={p}>{p}</option>\n                          ))}\n                        </Form.Select>\n                      </Form.Group>\n                      <div className=\"d-flex gap-2 justify-content-end\">\n                        <Button \n                          type=\"submit\" \n                          variant=\"primary\"\n                          disabled={saving}\n                          className=\"d-flex align-items-center gap-2\"\n                        >\n                          {saving ? (\n                            <>\n                              <Spinner size=\"sm\" animation=\"border\" />\n                              Guardando...\n                            </>\n                          ) : (\n                            <>\n                              <FaSave size={14} />\n                              Guardar Cambios\n                            </>\n                          )}\n                        </Button>\n                      </div>\n                    </Form>\n                  )}\n                </Card.Body>\n              </Card>\n            </Col>\n          </Row>\n        )}\n\n        {/* Contenido de la pestaña de transacciones */}\n        {activeTab === 'transactions' && (\n          <div>\n            <Nav variant=\"pills\" className=\"justify-content-center mb-4\">\n              <Nav.Item>\n                <Nav.Link \n                  active={transactionType === 'purchases'} \n                  onClick={() => setTransactionType('purchases')}\n                  className=\"d-flex align-items-center gap-2\"\n                >\n                  <FaShoppingCart size={16} />\n                  Compras ({transactions.purchases.length})\n                </Nav.Link>\n              </Nav.Item>\n              <Nav.Item>\n                <Nav.Link \n                  active={transactionType === 'sales'} \n                  onClick={() => setTransactionType('sales')}\n                  className=\"d-flex align-items-center gap-2\"\n                >\n                  <FaStore size={16} />\n                  Ventas ({transactions.sales.length})\n                </Nav.Link>\n              </Nav.Item>\n            </Nav>\n\n            {loadingTransactions ? (\n              <div className=\"text-center\">\n                <Spinner animation=\"border\" role=\"status\" />\n                <p className=\"mt-3 text-muted\">Cargando transacciones...</p>\n              </div>\n            ) : (() => {\n              const currentTransactions = transactions[transactionType] || [];\n              \n              return currentTransactions.length === 0 ? (\n                <Alert variant=\"info\" className=\"text-center\">\n                  <h5>No hay {transactionType === 'purchases' ? 'compras' : 'ventas'} registradas</h5>\n                  <p className=\"mb-0\">\n                    {transactionType === 'purchases' \n                      ? 'Cuando realices compras, aparecerán aquí.' \n                      : 'Cuando realices ventas, aparecerán aquí.'}\n                  </p>\n                </Alert>\n              ) : (\n                <div>\n                  {currentTransactions.map(transaction => (\n                    <TransactionCard\n                      key={transaction.id}\n                      transaction={transaction}\n                      type={transactionType}\n                      onRateUser={handleRateUser}\n                      onUpdateStatus={handleUpdateStatus}\n                    />\n                  ))}\n                </div>\n              );\n            })()}\n          </div>\n        )}\n\n        {/* Contenido de la pestaña Dashboard */}\n        {activeTab === 'dashboard' && (\n          <DashboardContent user={user} />\n        )}\n      </Container>\n\n      {ratingModal.show && ratingModal.transaction && (\n        <RatingSystem\n          show={ratingModal.show}\n          onHide={() => setRatingModal({ show: false, transaction: null, userRole: null })}\n          transaction={ratingModal.transaction}\n          userRole={ratingModal.userRole}\n          onRatingSubmitted={(ratingData) => {\n            console.log('Rating submitted:', ratingData);\n            setRatingModal({ show: false, transaction: null, userRole: null });\n            // Opcionalmente refrescar transacciones\n            fetchTransactions();\n          }}\n        />\n      )}\n    </motion.div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}