{"ast":null,"code":"// src/pages/Cart.js\nimport React,{useState}from'react';import{Container,Row,Col,Card,Button,Image,Badge,Alert,Form,Modal}from'react-bootstrap';import{FaShoppingCart,FaUser,FaStar,FaMapMarkerAlt,FaTrash,FaWhatsapp,FaComments,FaHandshake,FaCreditCard}from'react-icons/fa';import{motion}from'framer-motion';import{useCart}from'../contexts/CartContext';// FIREBASE REMOVED - TODO: Replace with backend API\n// FIREBASE REMOVED - TODO: Replace with backend API\n// FIREBASE REMOVED - TODO: Replace with backend API\nimport{useNavigate}from'react-router-dom';import P2PCheckout from'../components/P2PCheckout';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Cart(){const[user]=useAuthState(/* auth */null);const{cart,removeFromCart,clearCart,getTotalPrice,getTotalItems}=useCart();const[showProposeModal,setShowProposeModal]=useState(false);const[showP2PCheckout,setShowP2PCheckout]=useState(false);const[selectedSeller,setSelectedSeller]=useState(null);const[selectedItems,setSelectedItems]=useState([]);const[buyerNotes,setBuyerNotes]=useState('');const[loading,setLoading]=useState(false);const navigate=useNavigate();// Agrupar carrito por vendedores\nconst groupedCart=cart.reduce((groups,item)=>{const sellerId=item.sellerId;if(!groups[sellerId]){groups[sellerId]={sellerId,sellerName:item.sellerName,sellerPhone:item.userPhone,sellerEmail:item.userEmail,sellerRating:item.sellerRating||4.5,// Simulado por ahora\nsellerReviews:item.sellerReviews||15,// Simulado por ahora\nitems:[]};}groups[sellerId].items.push(item);return groups;},{});const sellerGroups=Object.values(groupedCart);const totalItems=getTotalItems();const totalPrice=getTotalPrice();const handleProposeDeal=seller=>{if(!user){alert('Debes iniciar sesi√≥n para proponer un trato');return;}setSelectedSeller(seller);setSelectedItems(seller.items);setShowProposeModal(true);};const handleSubmitProposal=async()=>{if(!user||!selectedSeller||selectedItems.length===0)return;setLoading(true);try{// Crear transacci√≥n\nconst transactionData={buyerId:user.uid,buyerName:user.displayName||user.email,buyerEmail:user.email,sellerId:selectedSeller.sellerId,sellerName:selectedSeller.sellerName,sellerEmail:selectedSeller.sellerEmail,items:selectedItems.map(item=>({listingId:item.listingId,cardId:item.cardId,cardName:item.cardName,cardImage:item.cardImage,price:item.price,quantity:item.quantity,condition:item.condition,tcgType:item.tcgType})),totalAmount:selectedItems.reduce((sum,item)=>sum+item.price*item.quantity,0),status:'PENDIENTE',buyerNotes:buyerNotes.trim(),createdAt:new Date(),updatedAt:new Date()};const transactionRef=await addDoc(collection(/* db */null,'transactions'),transactionData);// Crear notificaci√≥n para el vendedor\nconst notificationData={userId:selectedSeller.sellerId,type:'NUEVA_OFERTA',transactionId:transactionRef.id,title:'Nueva oferta recibida',message:`${user.displayName||user.email} est√° interesado en ${selectedItems.length} carta(s)`,read:false,createdAt:new Date()};await addDoc(collection(/* db */null,'notifications'),notificationData);// Remover items del carrito\nselectedItems.forEach(item=>{removeFromCart(item.listingId);});alert('¬°Oferta enviada exitosamente! El vendedor ser√° notificado.');setShowProposeModal(false);setBuyerNotes('');// Redirigir al dashboard para ver la transacci√≥n\nnavigate('/dashboard?tab=transactions');}catch(error){console.error('Error creating transaction:',error);alert('Error al enviar la oferta. Int√©ntalo de nuevo.');}setLoading(false);};const openWhatsAppChat=seller=>{var _seller$sellerPhone;const items=seller.items;const itemsList=items.map(item=>`‚Ä¢ ${item.cardName} (${item.condition}) - ‚Ç°${item.price.toLocaleString()}`).join('\\\\n');const message=`¬°Hola! Me interesa comprar estas cartas de TCG:\\\\n\\\\n${itemsList}\\\\n\\\\nTotal: ‚Ç°${items.reduce((sum,item)=>sum+item.price*item.quantity,0).toLocaleString()}\\\\n\\\\n¬øPodemos coordinar la compra?`;const phoneNumber=(_seller$sellerPhone=seller.sellerPhone)===null||_seller$sellerPhone===void 0?void 0:_seller$sellerPhone.replace(/[^\\\\d]/g,'');if(phoneNumber){window.open(`https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`);}else{alert('N√∫mero de WhatsApp no disponible');}};if(!user){return/*#__PURE__*/_jsx(Container,{className:\"py-5\",children:/*#__PURE__*/_jsxs(Alert,{variant:\"info\",className:\"text-center\",children:[/*#__PURE__*/_jsx(FaShoppingCart,{className:\"me-2\",size:24}),/*#__PURE__*/_jsx(\"h5\",{children:\"Inicia sesi\\xF3n para ver tu carrito\"})]})});}if(totalItems===0){return/*#__PURE__*/_jsx(Container,{className:\"py-5\",children:/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:\"text-center\",children:/*#__PURE__*/_jsxs(Alert,{variant:\"info\",children:[/*#__PURE__*/_jsx(FaShoppingCart,{className:\"me-2\",size:24}),/*#__PURE__*/_jsx(\"h5\",{children:\"Tu carrito est\\xE1 vac\\xEDo\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\xA1Explora nuestro marketplace y encuentra las mejores cartas!\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:()=>navigate('/marketplace'),children:\"Ir al Marketplace\"})]})})});}return/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},className:\"section\",children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-4\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"section-title\",children:[\"\\uD83D\\uDED2 Mi Carrito (\",totalItems,\" productos)\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2\",children:[/*#__PURE__*/_jsx(Button,{variant:\"outline-secondary\",onClick:()=>navigate('/marketplace'),children:\"Seguir Comprando\"}),/*#__PURE__*/_jsxs(Button,{variant:\"outline-danger\",onClick:()=>{if(window.confirm('¬øVaciar todo el carrito?')){clearCart();}},children:[/*#__PURE__*/_jsx(FaTrash,{className:\"me-2\"}),\"Vaciar Carrito\"]})]})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{lg:8,children:sellerGroups.map((seller,index)=>{const sellerTotal=seller.items.reduce((sum,item)=>sum+item.price*item.quantity,0);return/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:index*0.1},className:\"mb-4\",children:/*#__PURE__*/_jsxs(Card,{className:\"seller-group-card shadow-sm\",children:[/*#__PURE__*/_jsx(Card.Header,{className:\"seller-header\",children:/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsx(Col,{md:8,children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"seller-avatar\",children:/*#__PURE__*/_jsx(FaUser,{size:24})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-1\",children:seller.sellerName}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex align-items-center gap-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(FaStar,{className:\"text-warning me-1\",size:14}),/*#__PURE__*/_jsx(\"span\",{children:seller.sellerRating}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted ms-1\",children:[\"(\",seller.sellerReviews,\" rese\\xF1as)\"]})]})})]})]})}),/*#__PURE__*/_jsxs(Col,{md:4,className:\"text-end\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fw-bold fs-5 text-success\",children:[\"\\u20A1\",sellerTotal.toLocaleString()]}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[seller.items.length,\" producto\",seller.items.length>1?'s':'']})]})]})}),/*#__PURE__*/_jsxs(Card.Body,{children:[seller.items.map((item,itemIndex)=>{var _item$tcgType;return/*#__PURE__*/_jsx(\"div\",{className:\"cart-item mb-3 p-3 rounded\",children:/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsx(Col,{xs:3,md:2,children:/*#__PURE__*/_jsx(Image,{src:item.cardImage||'https://via.placeholder.com/100',alt:item.cardName,className:\"w-100\",style:{height:'100px',objectFit:'contain'}})}),/*#__PURE__*/_jsxs(Col,{xs:6,md:7,children:[/*#__PURE__*/_jsx(\"h6\",{className:\"mb-1\",children:item.cardName}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-wrap gap-2 mb-2\",children:[/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:(_item$tcgType=item.tcgType)===null||_item$tcgType===void 0?void 0:_item$tcgType.toUpperCase()}),/*#__PURE__*/_jsx(Badge,{bg:\"info\",children:item.condition}),/*#__PURE__*/_jsxs(Badge,{bg:\"warning\",text:\"dark\",children:[\"Cant: \",item.quantity]})]}),item.location&&/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[/*#__PURE__*/_jsx(FaMapMarkerAlt,{className:\"me-1\"}),item.location]})]}),/*#__PURE__*/_jsxs(Col,{xs:3,md:3,className:\"text-end\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fw-bold text-success\",children:[\"\\u20A1\",(item.price*item.quantity).toLocaleString()]}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[\"\\u20A1\",item.price.toLocaleString(),\" c/u\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsx(Button,{variant:\"outline-danger\",size:\"sm\",onClick:()=>removeFromCart(item.listingId),children:/*#__PURE__*/_jsx(FaTrash,{size:12})})})]})]})},`${item.listingId}-${itemIndex}`);}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2 mt-3\",children:[/*#__PURE__*/_jsxs(Button,{variant:\"primary\",onClick:()=>handleProposeDeal(seller),className:\"flex-fill\",children:[/*#__PURE__*/_jsx(FaHandshake,{className:\"me-2\"}),\"Proponer Trato\"]}),/*#__PURE__*/_jsxs(Button,{variant:\"success\",onClick:()=>openWhatsAppChat(seller),children:[/*#__PURE__*/_jsx(FaWhatsapp,{className:\"me-2\"}),\"WhatsApp\"]})]})]})]})},seller.sellerId);})}),/*#__PURE__*/_jsx(Col,{lg:4,children:/*#__PURE__*/_jsxs(Card,{className:\"cart-summary-card sticky-top shadow-sm\",children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"\\uD83D\\uDCCA Resumen de Compra\"})}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item d-flex justify-content-between mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Productos:\"}),/*#__PURE__*/_jsx(\"span\",{children:totalItems})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item d-flex justify-content-between mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Vendedores:\"}),/*#__PURE__*/_jsx(\"span\",{children:sellerGroups.length})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-total d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"fw-bold fs-5\",children:\"Total:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"fw-bold fs-4 text-success\",children:[\"\\u20A1\",totalPrice.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-grid gap-2 mt-3\",children:[/*#__PURE__*/_jsxs(Button,{variant:\"success\",size:\"lg\",onClick:()=>setShowP2PCheckout(true),disabled:!user||cart.length===0,children:[/*#__PURE__*/_jsx(FaCreditCard,{className:\"me-2\"}),\"Checkout P2P\"]}),!user&&/*#__PURE__*/_jsx(\"small\",{className:\"text-muted text-center\",children:\"Inicia sesi\\xF3n para usar el checkout P2P\"})]}),/*#__PURE__*/_jsxs(Alert,{variant:\"info\",className:\"mt-3 small\",children:[/*#__PURE__*/_jsx(FaComments,{className:\"me-2\"}),\"El checkout P2P maneja autom\\xE1ticamente m\\xFAltiples vendedores y coordina todo el proceso de compra.\"]})]})]})})]}),/*#__PURE__*/_jsxs(Modal,{show:showProposeModal,onHide:()=>setShowProposeModal(false),size:\"lg\",centered:true,className:\"glassmorphism-modal\",children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,className:\"glassmorphism-header\",children:/*#__PURE__*/_jsxs(Modal.Title,{children:[/*#__PURE__*/_jsx(FaHandshake,{className:\"me-2\"}),\"Proponer Trato a \",selectedSeller===null||selectedSeller===void 0?void 0:selectedSeller.sellerName]})}),/*#__PURE__*/_jsx(Modal.Body,{className:\"glassmorphism-body\",children:selectedItems.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Productos seleccionados:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"selected-items mb-3\",children:selectedItems.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center mb-2 p-2 rounded bg-light\",children:[/*#__PURE__*/_jsx(Image,{src:item.cardImage,alt:item.cardName,style:{width:'40px',height:'56px',objectFit:'contain'},className:\"me-2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-grow-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fw-bold small\",children:item.cardName}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[item.condition,\" \\u2022 Cant: \",item.quantity]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fw-bold text-success\",children:[\"\\u20A1\",(item.price*item.quantity).toLocaleString()]})]},index))}),/*#__PURE__*/_jsx(\"div\",{className:\"total-proposal p-3 rounded bg-primary text-white mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"fw-bold\",children:\"Total de la oferta:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"fw-bold fs-4\",children:[\"\\u20A1\",selectedItems.reduce((sum,item)=>sum+item.price*item.quantity,0).toLocaleString()]})]})}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Mensaje adicional (opcional):\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",rows:3,placeholder:\"Agrega cualquier comentario o pregunta para el vendedor...\",value:buyerNotes,onChange:e=>setBuyerNotes(e.target.value)})]}),/*#__PURE__*/_jsxs(Alert,{variant:\"info\",children:[/*#__PURE__*/_jsx(FaComments,{className:\"me-2\"}),\"Al enviar esta oferta, se notificar\\xE1 al vendedor y podr\\xE1s hacer seguimiento desde tu dashboard.\"]})]})}),/*#__PURE__*/_jsxs(Modal.Footer,{className:\"glassmorphism-body\",children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setShowProposeModal(false),children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleSubmitProposal,disabled:loading,children:loading?'Enviando...':'Enviar Oferta'})]})]}),/*#__PURE__*/_jsx(P2PCheckout,{show:showP2PCheckout,onHide:()=>setShowP2PCheckout(false),onTransactionCreated:results=>{console.log('Transacciones P2P creadas:',results);setShowP2PCheckout(false);// Navegar al dashboard para ver las transacciones\nnavigate('/dashboard');}})]})});}","map":{"version":3,"names":["React","useState","Container","Row","Col","Card","Button","Image","Badge","Alert","Form","Modal","FaShoppingCart","FaUser","FaStar","FaMapMarkerAlt","FaTrash","FaWhatsapp","FaComments","FaHandshake","FaCreditCard","motion","useCart","useNavigate","P2PCheckout","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Cart","user","useAuthState","cart","removeFromCart","clearCart","getTotalPrice","getTotalItems","showProposeModal","setShowProposeModal","showP2PCheckout","setShowP2PCheckout","selectedSeller","setSelectedSeller","selectedItems","setSelectedItems","buyerNotes","setBuyerNotes","loading","setLoading","navigate","groupedCart","reduce","groups","item","sellerId","sellerName","sellerPhone","userPhone","sellerEmail","userEmail","sellerRating","sellerReviews","items","push","sellerGroups","Object","values","totalItems","totalPrice","handleProposeDeal","seller","alert","handleSubmitProposal","length","transactionData","buyerId","uid","buyerName","displayName","email","buyerEmail","map","listingId","cardId","cardName","cardImage","price","quantity","condition","tcgType","totalAmount","sum","status","trim","createdAt","Date","updatedAt","transactionRef","addDoc","collection","notificationData","userId","type","transactionId","id","title","message","read","forEach","error","console","openWhatsAppChat","_seller$sellerPhone","itemsList","toLocaleString","join","phoneNumber","replace","window","open","encodeURIComponent","className","children","variant","size","div","initial","opacity","y","animate","onClick","confirm","lg","index","sellerTotal","transition","delay","Header","md","Body","itemIndex","_item$tcgType","xs","src","alt","style","height","objectFit","bg","toUpperCase","text","location","disabled","show","onHide","centered","closeButton","Title","width","Group","Label","Control","as","rows","placeholder","value","onChange","e","target","Footer","onTransactionCreated","results","log"],"sources":["/home/frodev/Downloads/FroDev-CR-TropicalTCGPlayers/src/pages/Cart.js"],"sourcesContent":["// src/pages/Cart.js\nimport React, { useState } from 'react';\nimport { Container, Row, Col, Card, Button, Image, Badge, Alert, Form, Modal } from 'react-bootstrap';\nimport { FaShoppingCart, FaUser, FaStar, FaMapMarkerAlt, FaTrash, FaWhatsapp, FaComments, FaHandshake, FaCreditCard } from 'react-icons/fa';\nimport { motion } from 'framer-motion';\nimport { useCart } from '../contexts/CartContext';\n// FIREBASE REMOVED - TODO: Replace with backend API\n// FIREBASE REMOVED - TODO: Replace with backend API\n// FIREBASE REMOVED - TODO: Replace with backend API\nimport { useNavigate } from 'react-router-dom';\nimport P2PCheckout from '../components/P2PCheckout';\n\nexport default function Cart() {\n  const [user] = useAuthState(/* auth */ null);\n  const { cart, removeFromCart, clearCart, getTotalPrice, getTotalItems } = useCart();\n  const [showProposeModal, setShowProposeModal] = useState(false);\n  const [showP2PCheckout, setShowP2PCheckout] = useState(false);\n  const [selectedSeller, setSelectedSeller] = useState(null);\n  const [selectedItems, setSelectedItems] = useState([]);\n  const [buyerNotes, setBuyerNotes] = useState('');\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n\n  // Agrupar carrito por vendedores\n  const groupedCart = cart.reduce((groups, item) => {\n    const sellerId = item.sellerId;\n    if (!groups[sellerId]) {\n      groups[sellerId] = {\n        sellerId,\n        sellerName: item.sellerName,\n        sellerPhone: item.userPhone,\n        sellerEmail: item.userEmail,\n        sellerRating: item.sellerRating || 4.5, // Simulado por ahora\n        sellerReviews: item.sellerReviews || 15, // Simulado por ahora\n        items: []\n      };\n    }\n    groups[sellerId].items.push(item);\n    return groups;\n  }, {});\n\n  const sellerGroups = Object.values(groupedCart);\n  const totalItems = getTotalItems();\n  const totalPrice = getTotalPrice();\n\n  const handleProposeDeal = (seller) => {\n    if (!user) {\n      alert('Debes iniciar sesi√≥n para proponer un trato');\n      return;\n    }\n    setSelectedSeller(seller);\n    setSelectedItems(seller.items);\n    setShowProposeModal(true);\n  };\n\n  const handleSubmitProposal = async () => {\n    if (!user || !selectedSeller || selectedItems.length === 0) return;\n    \n    setLoading(true);\n    try {\n      // Crear transacci√≥n\n      const transactionData = {\n        buyerId: user.uid,\n        buyerName: user.displayName || user.email,\n        buyerEmail: user.email,\n        sellerId: selectedSeller.sellerId,\n        sellerName: selectedSeller.sellerName,\n        sellerEmail: selectedSeller.sellerEmail,\n        items: selectedItems.map(item => ({\n          listingId: item.listingId,\n          cardId: item.cardId,\n          cardName: item.cardName,\n          cardImage: item.cardImage,\n          price: item.price,\n          quantity: item.quantity,\n          condition: item.condition,\n          tcgType: item.tcgType\n        })),\n        totalAmount: selectedItems.reduce((sum, item) => sum + (item.price * item.quantity), 0),\n        status: 'PENDIENTE',\n        buyerNotes: buyerNotes.trim(),\n        createdAt: new Date(),\n        updatedAt: new Date()\n      };\n\n      const transactionRef = await addDoc(collection(/* db */ null, 'transactions'), transactionData);\n      \n      // Crear notificaci√≥n para el vendedor\n      const notificationData = {\n        userId: selectedSeller.sellerId,\n        type: 'NUEVA_OFERTA',\n        transactionId: transactionRef.id,\n        title: 'Nueva oferta recibida',\n        message: `${user.displayName || user.email} est√° interesado en ${selectedItems.length} carta(s)`,\n        read: false,\n        createdAt: new Date()\n      };\n\n      await addDoc(collection(/* db */ null, 'notifications'), notificationData);\n\n      // Remover items del carrito\n      selectedItems.forEach(item => {\n        removeFromCart(item.listingId);\n      });\n\n      alert('¬°Oferta enviada exitosamente! El vendedor ser√° notificado.');\n      setShowProposeModal(false);\n      setBuyerNotes('');\n      \n      // Redirigir al dashboard para ver la transacci√≥n\n      navigate('/dashboard?tab=transactions');\n\n    } catch (error) {\n      console.error('Error creating transaction:', error);\n      alert('Error al enviar la oferta. Int√©ntalo de nuevo.');\n    }\n    setLoading(false);\n  };\n\n  const openWhatsAppChat = (seller) => {\n    const items = seller.items;\n    const itemsList = items.map(item => \n      `‚Ä¢ ${item.cardName} (${item.condition}) - ‚Ç°${item.price.toLocaleString()}`\n    ).join('\\\\n');\n    \n    const message = `¬°Hola! Me interesa comprar estas cartas de TCG:\\\\n\\\\n${itemsList}\\\\n\\\\nTotal: ‚Ç°${items.reduce((sum, item) => sum + (item.price * item.quantity), 0).toLocaleString()}\\\\n\\\\n¬øPodemos coordinar la compra?`;\n    \n    const phoneNumber = seller.sellerPhone?.replace(/[^\\\\d]/g, '');\n    if (phoneNumber) {\n      window.open(`https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`);\n    } else {\n      alert('N√∫mero de WhatsApp no disponible');\n    }\n  };\n\n  if (!user) {\n    return (\n      <Container className=\"py-5\">\n        <Alert variant=\"info\" className=\"text-center\">\n          <FaShoppingCart className=\"me-2\" size={24} />\n          <h5>Inicia sesi√≥n para ver tu carrito</h5>\n        </Alert>\n      </Container>\n    );\n  }\n\n  if (totalItems === 0) {\n    return (\n      <Container className=\"py-5\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"text-center\"\n        >\n          <Alert variant=\"info\">\n            <FaShoppingCart className=\"me-2\" size={24} />\n            <h5>Tu carrito est√° vac√≠o</h5>\n            <p>¬°Explora nuestro marketplace y encuentra las mejores cartas!</p>\n            <Button variant=\"primary\" onClick={() => navigate('/marketplace')}>\n              Ir al Marketplace\n            </Button>\n          </Alert>\n        </motion.div>\n      </Container>\n    );\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      className=\"section\"\n    >\n      <Container>\n        <div className=\"d-flex justify-content-between align-items-center mb-4\">\n          <h2 className=\"section-title\">üõí Mi Carrito ({totalItems} productos)</h2>\n          <div className=\"d-flex gap-2\">\n            <Button \n              variant=\"outline-secondary\" \n              onClick={() => navigate('/marketplace')}\n            >\n              Seguir Comprando\n            </Button>\n            <Button \n              variant=\"outline-danger\"\n              onClick={() => {\n                if (window.confirm('¬øVaciar todo el carrito?')) {\n                  clearCart();\n                }\n              }}\n            >\n              <FaTrash className=\"me-2\" />\n              Vaciar Carrito\n            </Button>\n          </div>\n        </div>\n\n        <Row>\n          <Col lg={8}>\n            {/* Productos agrupados por vendedor */}\n            {sellerGroups.map((seller, index) => {\n              const sellerTotal = seller.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);\n              \n              return (\n                <motion.div\n                  key={seller.sellerId}\n                  initial={{ opacity: 0, y: 20 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  transition={{ delay: index * 0.1 }}\n                  className=\"mb-4\"\n                >\n                  <Card className=\"seller-group-card shadow-sm\">\n                    <Card.Header className=\"seller-header\">\n                      <Row className=\"align-items-center\">\n                        <Col md={8}>\n                          <div className=\"d-flex align-items-center gap-3\">\n                            <div className=\"seller-avatar\">\n                              <FaUser size={24} />\n                            </div>\n                            <div>\n                              <h5 className=\"mb-1\">{seller.sellerName}</h5>\n                              <div className=\"d-flex align-items-center gap-2\">\n                                <div className=\"d-flex align-items-center\">\n                                  <FaStar className=\"text-warning me-1\" size={14} />\n                                  <span>{seller.sellerRating}</span>\n                                  <small className=\"text-muted ms-1\">({seller.sellerReviews} rese√±as)</small>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        </Col>\n                        <Col md={4} className=\"text-end\">\n                          <div className=\"fw-bold fs-5 text-success\">\n                            ‚Ç°{sellerTotal.toLocaleString()}\n                          </div>\n                          <small className=\"text-muted\">\n                            {seller.items.length} producto{seller.items.length > 1 ? 's' : ''}\n                          </small>\n                        </Col>\n                      </Row>\n                    </Card.Header>\n\n                    <Card.Body>\n                      {/* Lista de productos del vendedor */}\n                      {seller.items.map((item, itemIndex) => (\n                        <div key={`${item.listingId}-${itemIndex}`} className=\"cart-item mb-3 p-3 rounded\">\n                          <Row className=\"align-items-center\">\n                            <Col xs={3} md={2}>\n                              <Image\n                                src={item.cardImage || 'https://via.placeholder.com/100'}\n                                alt={item.cardName}\n                                className=\"w-100\"\n                                style={{ height: '100px', objectFit: 'contain' }}\n                              />\n                            </Col>\n                            <Col xs={6} md={7}>\n                              <h6 className=\"mb-1\">{item.cardName}</h6>\n                              <div className=\"d-flex flex-wrap gap-2 mb-2\">\n                                <Badge bg=\"secondary\">{item.tcgType?.toUpperCase()}</Badge>\n                                <Badge bg=\"info\">{item.condition}</Badge>\n                                <Badge bg=\"warning\" text=\"dark\">Cant: {item.quantity}</Badge>\n                              </div>\n                              {item.location && (\n                                <small className=\"text-muted\">\n                                  <FaMapMarkerAlt className=\"me-1\" />\n                                  {item.location}\n                                </small>\n                              )}\n                            </Col>\n                            <Col xs={3} md={3} className=\"text-end\">\n                              <div className=\"fw-bold text-success\">\n                                ‚Ç°{(item.price * item.quantity).toLocaleString()}\n                              </div>\n                              <small className=\"text-muted\">\n                                ‚Ç°{item.price.toLocaleString()} c/u\n                              </small>\n                              <div className=\"mt-2\">\n                                <Button\n                                  variant=\"outline-danger\"\n                                  size=\"sm\"\n                                  onClick={() => removeFromCart(item.listingId)}\n                                >\n                                  <FaTrash size={12} />\n                                </Button>\n                              </div>\n                            </Col>\n                          </Row>\n                        </div>\n                      ))}\n\n                      {/* Botones de acci√≥n del vendedor */}\n                      <div className=\"d-flex gap-2 mt-3\">\n                        <Button\n                          variant=\"primary\"\n                          onClick={() => handleProposeDeal(seller)}\n                          className=\"flex-fill\"\n                        >\n                          <FaHandshake className=\"me-2\" />\n                          Proponer Trato\n                        </Button>\n                        <Button\n                          variant=\"success\"\n                          onClick={() => openWhatsAppChat(seller)}\n                        >\n                          <FaWhatsapp className=\"me-2\" />\n                          WhatsApp\n                        </Button>\n                      </div>\n                    </Card.Body>\n                  </Card>\n                </motion.div>\n              );\n            })}\n          </Col>\n\n          <Col lg={4}>\n            {/* Resumen del carrito */}\n            <Card className=\"cart-summary-card sticky-top shadow-sm\">\n              <Card.Header>\n                <h5 className=\"mb-0\">üìä Resumen de Compra</h5>\n              </Card.Header>\n              <Card.Body>\n                <div className=\"summary-item d-flex justify-content-between mb-2\">\n                  <span>Productos:</span>\n                  <span>{totalItems}</span>\n                </div>\n                <div className=\"summary-item d-flex justify-content-between mb-2\">\n                  <span>Vendedores:</span>\n                  <span>{sellerGroups.length}</span>\n                </div>\n                <hr />\n                <div className=\"summary-total d-flex justify-content-between\">\n                  <span className=\"fw-bold fs-5\">Total:</span>\n                  <span className=\"fw-bold fs-4 text-success\">‚Ç°{totalPrice.toLocaleString()}</span>\n                </div>\n\n                {/* Bot√≥n P2P Checkout */}\n                <div className=\"d-grid gap-2 mt-3\">\n                  <Button\n                    variant=\"success\"\n                    size=\"lg\"\n                    onClick={() => setShowP2PCheckout(true)}\n                    disabled={!user || cart.length === 0}\n                  >\n                    <FaCreditCard className=\"me-2\" />\n                    Checkout P2P\n                  </Button>\n                  {!user && (\n                    <small className=\"text-muted text-center\">\n                      Inicia sesi√≥n para usar el checkout P2P\n                    </small>\n                  )}\n                </div>\n\n                <Alert variant=\"info\" className=\"mt-3 small\">\n                  <FaComments className=\"me-2\" />\n                  El checkout P2P maneja autom√°ticamente m√∫ltiples vendedores y \n                  coordina todo el proceso de compra.\n                </Alert>\n              </Card.Body>\n            </Card>\n          </Col>\n        </Row>\n\n        {/* Modal para proponer trato */}\n        <Modal \n          show={showProposeModal} \n          onHide={() => setShowProposeModal(false)}\n          size=\"lg\"\n          centered\n          className=\"glassmorphism-modal\"\n        >\n          <Modal.Header closeButton className=\"glassmorphism-header\">\n            <Modal.Title>\n              <FaHandshake className=\"me-2\" />\n              Proponer Trato a {selectedSeller?.sellerName}\n            </Modal.Title>\n          </Modal.Header>\n          <Modal.Body className=\"glassmorphism-body\">\n            {selectedItems.length > 0 && (\n              <>\n                <h6>Productos seleccionados:</h6>\n                <div className=\"selected-items mb-3\">\n                  {selectedItems.map((item, index) => (\n                    <div key={index} className=\"d-flex align-items-center mb-2 p-2 rounded bg-light\">\n                      <Image\n                        src={item.cardImage}\n                        alt={item.cardName}\n                        style={{ width: '40px', height: '56px', objectFit: 'contain' }}\n                        className=\"me-2\"\n                      />\n                      <div className=\"flex-grow-1\">\n                        <div className=\"fw-bold small\">{item.cardName}</div>\n                        <small className=\"text-muted\">{item.condition} ‚Ä¢ Cant: {item.quantity}</small>\n                      </div>\n                      <div className=\"fw-bold text-success\">\n                        ‚Ç°{(item.price * item.quantity).toLocaleString()}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n\n                <div className=\"total-proposal p-3 rounded bg-primary text-white mb-3\">\n                  <div className=\"d-flex justify-content-between align-items-center\">\n                    <span className=\"fw-bold\">Total de la oferta:</span>\n                    <span className=\"fw-bold fs-4\">\n                      ‚Ç°{selectedItems.reduce((sum, item) => sum + (item.price * item.quantity), 0).toLocaleString()}\n                    </span>\n                  </div>\n                </div>\n\n                <Form.Group className=\"mb-3\">\n                  <Form.Label>Mensaje adicional (opcional):</Form.Label>\n                  <Form.Control\n                    as=\"textarea\"\n                    rows={3}\n                    placeholder=\"Agrega cualquier comentario o pregunta para el vendedor...\"\n                    value={buyerNotes}\n                    onChange={(e) => setBuyerNotes(e.target.value)}\n                  />\n                </Form.Group>\n\n                <Alert variant=\"info\">\n                  <FaComments className=\"me-2\" />\n                  Al enviar esta oferta, se notificar√° al vendedor y podr√°s hacer seguimiento desde tu dashboard.\n                </Alert>\n              </>\n            )}\n          </Modal.Body>\n          <Modal.Footer className=\"glassmorphism-body\">\n            <Button variant=\"secondary\" onClick={() => setShowProposeModal(false)}>\n              Cancelar\n            </Button>\n            <Button \n              variant=\"primary\" \n              onClick={handleSubmitProposal}\n              disabled={loading}\n            >\n              {loading ? 'Enviando...' : 'Enviar Oferta'}\n            </Button>\n          </Modal.Footer>\n        </Modal>\n\n        {/* Modal P2P Checkout */}\n        <P2PCheckout\n          show={showP2PCheckout}\n          onHide={() => setShowP2PCheckout(false)}\n          onTransactionCreated={(results) => {\n            console.log('Transacciones P2P creadas:', results);\n            setShowP2PCheckout(false);\n            // Navegar al dashboard para ver las transacciones\n            navigate('/dashboard');\n          }}\n        />\n      </Container>\n    </motion.div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}